define("views/shared/jobstatus/Count",["underscore","module","views/Base","util/time","splunk.i18n","splunk.util"],function(e,t,n,r,i,s){return n.extend({className:"status",moduleId:t.id,initialize:function(e){n.prototype.initialize.apply(this,arguments),this.resultsModel=e.resultsModel,this.activate({skipRender:!0})},startListening:function(){this.listenTo(this.model,"jobProgress prepared sync",this.render),this.listenTo(this.model,"destroy",this.empty),this.resultsModel&&this.listenTo(this.resultsModel,"change",this.render)},activate:function(e){return e=e||{},this.active?n.prototype.activate.apply(this,arguments):(e.skipRender||this.render(),n.prototype.activate.apply(this,arguments))},empty:function(){return this.$el.empty(),this},render:function(){this.canvasLoader&&(this.canvasLoader.kill(),this.canvasLoader=null);var t=e("Starting job...").t(),n=this.model.entry.content.get("isRealTimeSearch");this.model.entry.content.get("isDone")?t=e("Complete").t():this.model.isFinalizing()?t=e("Finalizing job...").t():this.model.entry.content.get("isPaused")?t=e("Paused").t():n?t=e("Real-time").t():this.model.isQueued()?t=e("Queued").t():this.model.isParsing()?t=e("Parsing job...").t():this.model.isRunning()&&(t=e("Running").t());var o=this.model.entry.content.get("eventCount");this.resultsModel&&!e(this.resultsModel.get("post_process_count")).isUndefined()&&(o=this.resultsModel.get("post_process_count")),o=i.format_decimal(o||0);var u="loader-"+this.cid,a=this.model.entry.content.get("earliestTime"),f=this.model.latestTimeSafe(),l=this.compiledTemplate({progress:t,earliest_date:this.model.isOverAllTime()?null:r.isoToDateObject(a),latest_date:f?r.isoToDateObject(f):new Date(0),eventCount:o,scanCount:i.format_decimal(this.model.entry.content.get("scanCount")||0),model:this.model,loaderId:u,time_utils:r,i18n:i,splunkUtil:s,_:e});return this.$el.html(l),this.$el.attr("data-job-state",t),this},template:'            <% if (!model.isNew()) { %>                <% if (model.entry.content.get("isDone")) { %>                    <i class="icon-check"></i>                    <%= splunkUtil.sprintf(i18n.ungettext("%s event", "%s events", eventCount), \'<span class="number">\' + eventCount + \'</span>\') %>                    <%if (model.entry.content.get("isFinalized")) { %>                        <% if(earliest_date) { %>                            <%- splunkUtil.sprintf(_("(Partial results for %s to %s)").t(), i18n.format_datetime_microseconds(time_utils.jsDateToSplunkDateTimeWithMicroseconds(earliest_date)), i18n.format_datetime_microseconds(time_utils.jsDateToSplunkDateTimeWithMicroseconds(latest_date))) %>                        <% } else { %>                            <%- splunkUtil.sprintf(_("(Partial results for before %s)").t(), i18n.format_datetime_microseconds(time_utils.jsDateToSplunkDateTimeWithMicroseconds(latest_date))) %>                        <% } %>                    <% } else { %>                        <% if(earliest_date) { %>                            <%- splunkUtil.sprintf(_("(%s to %s)").t(), i18n.format_datetime_microseconds(time_utils.jsDateToSplunkDateTimeWithMicroseconds(earliest_date)), i18n.format_datetime_microseconds(time_utils.jsDateToSplunkDateTimeWithMicroseconds(latest_date))) %>                        <% } else { %>                            <%- splunkUtil.sprintf(_("(before %s)").t(), i18n.format_datetime_microseconds(time_utils.jsDateToSplunkDateTimeWithMicroseconds(latest_date))) %>                        <% } %>                    <% } %>                <% } else if (model.isRunning()) { %>                    <%= splunkUtil.sprintf(i18n.ungettext("%s of %s event matched", "%s of %s events matched", scanCount), \'<span class="number">\' + eventCount + \'</span>\', \'<span class="number">\' + scanCount + \'</span>\') %>                <% } else if (model.entry.content.get("isPaused")) { %>                    <i class="icon-warning icon-warning-paused"></i><%- _("Your search is paused.").t() %>                <% } else { %>                    <%- progress %>                <% } %>            <% } %>        '})}),define("views/shared/jobstatus/controls/Cancel",["underscore","module","views/Base","bootstrap.tooltip"],function(e,t,n){return n.extend({moduleId:t.id,className:"cancel btn-pill btn-square",tagName:"a",attributes:{href:"#"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.$el.tooltip({animation:!1,title:e("Delete").t(),container:"body"})},events:{click:function(e){e.preventDefault();if(!this.isActive())return!0;this.model.destroy(),this.model.clear()}},isActive:function(){return!this.model.isNew()&&!this.model.entry.content.get("isDone")},render:function(){return this.$el.html('<i class="icon-trash"></i><span class="hide-text">'+e("Cancel").t()+"</span>"),this}})}),define("views/shared/jobstatus/controls/Stop",["underscore","module","views/Base","bootstrap.tooltip"],function(e,t,n){return n.extend({moduleId:t.id,className:"stop btn-pill btn-square",tagName:"a",attributes:{href:"#"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.$el.tooltip({animation:!1,title:e("Stop").t(),container:"body"})},events:{click:function(e){e.preventDefault();if(!this.isActive())return!0;this.model.isQueued()||this.model.isParsing()?this.model.destroy({success:function(){this.model.clear()}.bind(this)}):this.model.finalize({success:function(){this.model.fetch()}.bind(this)}),this.$el.blur()}},isActive:function(){return!this.model.isNew()&&!this.model.entry.content.get("isDone")},render:function(){return this.$el.html('<i class="icon-stop"></i><span class="hide-text">'+e("Stop").t()+"</span>"),this}})}),define("views/shared/jobstatus/controls/PlayPause",["jquery","underscore","module","views/Base","bootstrap.tooltip"],function(e,t,n,r){return r.extend({moduleId:n.id,className:"playpause btn-pill btn-square",tagName:"a",attributes:{href:"#"},initialize:function(){r.prototype.initialize.apply(this,arguments),this.activate()},startListening:function(){this.listenTo(this.model.entry.content,"change",this.render)},events:{click:function(t){t.preventDefault();if(!this.isActive())return!0;var n=e(t.currentTarget).data("mode"),r={success:function(){this.model.fetch()}.bind(this)};n==="pause"?this.model.pause(r):n==="unpause"&&this.model.unpause(r)}},isActive:function(){return this.model.isRunning()||this.model.entry.content.get("isPaused")},render:function(){var e=this.model.entry.content.get("isPaused"),n=this.$el.data("mode");return e&&n!=="unpause"&&(this.$el.data("mode","unpause").html('<i class="icon-play"></i><span class="hide-text">'+t("Resume").t()+"</span>"),this.$el.blur().tooltip("destroy").tooltip({animation:!1,title:t("Resume").t(),container:"body"})),!e&&n!=="pause"&&(this.$el.data("mode","pause").html('<i class="icon-pause"></i><span class="hide-text">'+t("Pause").t()+"</span>"),this.$el.blur().tooltip("destroy").tooltip({animation:!1,title:t("Pause").t(),container:"body"})),this.$el.css("display",""),this}})}),define("views/shared/jobstatus/controls/Reload",["underscore","module","views/Base","bootstrap.tooltip"],function(e,t,n){return n.extend({moduleId:t.id,className:"reload btn-pill btn-square",tagName:"a",attributes:{href:"#"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.$el.tooltip({animation:!1,title:e("Reload").t(),container:"body"})},events:{click:function(e){e.preventDefault();if(!this.isActive())return!0;this.model.trigger("reload")}},isActive:function(){return this.model.entry.content.get("isDone")},render:function(){return this.$el.html('<i class="icon-rotate-counter"></i><span class="hide-text">'+e("Reload").t()+"</span>"),this},remove:function(){return this.$el.tooltip("destroy"),n.prototype.remove.apply(this,arguments)}})}),define("views/shared/jobstatus/controls/menu/Messages",["underscore","module","views/Base","util/splunkd_utils"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"job_messages hidden",tagName:"ul",initialize:function(){n.prototype.initialize.apply(this,arguments),this.activate()},startListening:function(){this.listenTo(this.model.searchJob,"serverValidated",this.checkMessages)},checkMessages:function(e,t,n){var i=r.filterMessagesByTypes(n,[r.INFO,r.WARNING]);i.length?this.showMessages(i):this.$el.empty()},showMessages:function(t){this.$el.empty(),e.each(t,function(t,n){this.$el.append(e.template(this.messagesTemplate,{message:t}))}.bind(this))},render:function(){return this.checkMessages(),this},messagesTemplate:'                <li class="job_message"><%- message.text %></li>            '})}),define("views/shared/jobstatus/controls/menu/EditModal",["underscore","backbone","module","views/shared/Modal","views/shared/FlashMessages","views/shared/controls/ControlGroup","models/search/Job","uri/route","util/splunkd_utils","util/time"],function(e,t,n,r,i,s,o,u,a,f){return r.extend({moduleId:n.id,initialize:function(){r.prototype.initialize.apply(this,arguments),this.model.inmem=this.model.searchJob.clone(),this.children.flashMessages=new i({model:this.model.inmem});var t=this.model.application.get("app"),n=this.model.application.get("owner"),o=this.model.inmem.entry.acl.permsToObj(),a=o.read;this.everyoneRead=e.indexOf(a,"*")!=-1,this.model.inmem.set("everyoneRead",this.everyoneRead),this.startTTL=this.model.inmem.entry.content.get("ttl"),this.defaultTTL=parseInt(this.model.searchJob.entry.content.get("defaultTTL"),10),this.defaultSaveTTL=parseInt(this.model.searchJob.entry.content.get("defaultSaveTTL"),10);var l={sid:this.model.searchJob.id};this.model.application.get("page")==="report"&&this.model.report&&!this.model.report.isNew()&&(l.s=this.model.report.id),this.linkToJob=u[this.model.application.get("page")](this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),{data:l,absolute:!0}),this.children.owner=new s({label:e("Owner").t(),controlType:"Label",controlOptions:{model:this.model.inmem.entry.acl,modelAttribute:"owner"}}),this.children.app=new s({label:e("App").t(),controlType:"Label",controlOptions:{model:this.model.inmem.entry.acl,modelAttribute:"app"}}),this.children.permissions=new s({label:e("Read Permissions").t(),controlType:"SyntheticRadio",controlOptions:{className:"btn-group btn-group-2",items:[{value:!1,label:e("Private").t()},{value:!0,label:e("Everyone").t()}],model:this.model.inmem,modelAttribute:"everyoneRead"}}),this.children.lifetime=new s({label:e("Lifetime").t(),controlType:"SyntheticRadio",tooltip:e("The job will be deleted if it's not accessed in its lifetime.  Calculated from the time the job finishes.").t(),controlOptions:{className:"btn-group btn-group-2",items:[{value:this.defaultTTL,label:f.getRelativeStringFromSeconds(this.defaultTTL,!0)},{value:this.defaultSaveTTL,label:f.getRelativeStringFromSeconds(this.defaultSaveTTL,!0)}],model:this.model.inmem.entry.content,modelAttribute:"ttl"}}),this.children.link=new s({label:e("Link To Job").t(),controlType:"Text",help:e("Copy or bookmark the link by right-clicking the icon, or drag the icon into your bookmarks bar.").t(),controlOptions:{defaultValue:this.linkToJob,append:'<a class="add-on bookmark" href="'+this.linkToJob+'"><i class="icon-bookmark"></i><span class="hide-text">'+e("Splunk Search Job").t()+"</span></a>"}}),this.on("hidden",function(){this.model.searchJob.fetch()},this)},events:$.extend({},r.prototype.events,{"click .btn-primary":function(e){e.preventDefault();var t=this.model.inmem.get("everyoneRead"),n=this.model.inmem.entry.content.get("ttl"),r=this.model.inmem.entry.content.get("isRealTimeSearch"),i=$.Deferred(),s=$.Deferred();if(this.everyoneRead!==t){var u={success:function(e,t){i.resolve()},error:function(e,t){i.resolve()}};t?this.model.inmem.makeWorldReadable(u):this.model.inmem.undoWorldReadable(u)}else i.resolve();$.when(i).then(function(){var e={success:function(e,t){s.resolve()},error:function(e,t){s.resolve()}};this.startTTL===n||n!==this.defaultTTL&&n!==this.defaultSaveTTL?s.resolve():n===this.defaultTTL?this.model.inmem.unsaveJob($.extend(!0,e,{data:{auto_cancel:o.DEFAULT_AUTO_CANCEL}})):n===this.defaultSaveTTL&&(r?this.model.inmem.saveJob($.extend(!0,e,{data:{auto_cancel:o.DEFAULT_AUTO_CANCEL}})):this.model.inmem.saveJob(e))}.bind(this)),$.when(s).then(function(){this.hide()}.bind(this))},"click a.bookmark":function(e){e.preventDefault()}}),render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Job Settings").t()),this.children.flashMessages.render().prependTo(this.$(r.BODY_SELECTOR)),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.children.owner.render().appendTo(this.$(r.BODY_FORM_SELECTOR)),this.children.app.render().appendTo(this.$(r.BODY_FORM_SELECTOR)),this.children.permissions.render().appendTo(this.$(r.BODY_FORM_SELECTOR)),this.children.lifetime.render().appendTo(this.$(r.BODY_FORM_SELECTOR)),this.children.link.render().appendTo(this.$(r.BODY_FORM_SELECTOR)),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_SAVE),this}})}),define("views/shared/jobstatus/controls/menu/Edit",["underscore","module","views/Base","views/shared/jobstatus/controls/menu/EditModal"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"edit",tagName:"li",initialize:function(){n.prototype.initialize.apply(this,arguments)},events:{'click a[class!="disabled"]':function(e){this.children.editModal=new r({model:{searchJob:this.model.searchJob,application:this.model.application,report:this.model.report},onHiddenRemove:!0}),this.children.editModal.render().appendTo($("body")),this.children.editModal.show(),e.preventDefault()},"click a.disabled":function(e){e.preventDefault()}},render:function(){var t=this.model.searchJob.entry.acl.canWrite();return t?this.$el.html('<a href="#">'+e("Edit Job Settings").t()+"</a>"):this.$el.html('<a href="#" class="disabled">'+e("Edit Job Settings").t()+"</a>"),this}})}),define("views/shared/jobstatus/controls/menu/sendbackgroundmodal/Settings",["underscore","module","views/Base","views/shared/controls/ControlGroup","views/shared/FlashMessages","views/shared/Modal","splunk.util","uri/route","util/console"],function(e,t,n,r,i,s,o,u,a){return n.extend({moduleId:t.id,initialize:function(){n.prototype.initialize.apply(this,arguments),this.children.flashMessages=new i({model:{inmen:this.model.inmem}});var t="http://docs.splunk.com/";this.model.appLocal&&this.model.application?t=u.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.alert.email"):a.warn("The settings view needs the AppLocal and Application model passed to it"),this.children.email=new r({label:e("Email when complete").t(),controlType:"SyntheticCheckbox",controlOptions:{model:this.model.inmem,modelAttribute:"email",value:!0},help:o.sprintf(e("Email must be configured in System&nbsp;Settings > Alert&nbsp;Email&nbsp;Settings. %s").t(),' <a href="'+t+'" target="_blank">'+e("Learn More").t()+' <i class="icon-external"></i></a>')}),this.children.subject=new r({label:e("Email Subject Line").t(),controlType:"Text",controlOptions:{model:this.model.inmem,modelAttribute:"subject"}}),this.children.addresses=new r({label:e("Email Addresses").t(),controlType:"Textarea",controlOptions:{model:this.model.inmem,modelAttribute:"addresses"},help:e("Comma separated list.").t()}),this.model.inmem.on("change:email",function(){var e=this.model.inmem.get("email");e?(this.children.subject.$el.show(),this.children.addresses.$el.show()):(this.children.subject.$el.hide(),this.children.addresses.$el.hide())},this)},events:{"click .modal-btn-primary":function(t){t.preventDefault();var n=this.model.inmem.get("email"),r=this.model.inmem.get("subject"),i=this.model.inmem.get("addresses"),s=this.model.inmem.entry.acl.permsToObj(),o=s.read,u=e.indexOf(o,"*")!=-1,a=$.Deferred(),f=$.Deferred(),l=$.Deferred(),c=this.model.inmem.saveIsBackground();$.when(c).then(function(){var e={success:function(e,t){a.resolve()},error:function(e,t){a.resolve()}};n?this.model.inmem.saveJob($.extend(!0,e,{data:{email_list:i,email_subject:r}})):this.model.inmem.saveJob(e)}.bind(this)),$.when(a).then(function(){u?f.resolve():this.model.inmem.makeWorldReadable({success:function(e,t){f.resolve()},error:function(e,t){f.resolve()}})}.bind(this)),$.when(f).then(function(){this.model.inmem.disablePreview({success:function(e,t){l.resolve()},error:function(e,t){l.resolve()}})}.bind(this)),$.when(l).then(function(){var e=this.model.inmem.fetch();$.when(e).then(function(){this.model.inmem.trigger("saveSuccess")}.bind(this))}.bind(this))}},render:function(){return this.$el.html(s.TEMPLATE),this.$(s.HEADER_TITLE_SELECTOR).html(e("Send Job to Background").t()),this.children.flashMessages.render().prependTo(this.$(s.BODY_SELECTOR)),this.$(s.BODY_SELECTOR).append(s.FORM_HORIZONTAL),this.children.email.render().appendTo(this.$(s.BODY_FORM_SELECTOR)),this.children.subject.render().appendTo(this.$(s.BODY_FORM_SELECTOR)),this.children.addresses.render().appendTo(this.$(s.BODY_FORM_SELECTOR)),this.children.subject.$el.hide(),this.children.addresses.$el.hide(),this.$(s.FOOTER_SELECTOR).append(s.BUTTON_CANCEL),this.$(s.FOOTER_SELECTOR).append('<a class="btn btn-primary modal-btn-primary">'+e("Send to Background").t()+"</a>"),this}})}),define("views/shared/jobstatus/controls/menu/sendbackgroundmodal/Success",["underscore","module","views/Base","views/shared/Modal","views/shared/controls/ControlGroup","uri/route","util/time","splunk.util"],function(e,t,n,r,i,s,o,u){return n.extend({moduleId:t.id,initialize:function(){n.prototype.initialize.apply(this,arguments);var t=s.search(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),{data:{sid:this.model.inmem.id},absolute:!0});this.children.link=new i({label:e("Link To Job").t(),controlType:"Text",help:e("Copy or bookmark the link by right-clicking the icon, or drag the icon into your bookmarks bar.").t(),controlOptions:{defaultValue:t,append:'<a class="add-on bookmark" href="'+t+'"><i class="icon-bookmark"></i><span class="hide-text">'+e("Splunk Search Job").t()+"</span></a>"}}),this.model.inmem.entry.content.on("change:ttl",this.updateTTL,this)},events:$.extend({},r.prototype.events,{"click a.bookmark":function(e){e.preventDefault()}}),updateTTL:function(){var e=this.model.inmem.entry.acl.get("ttl")||0,t=o.getRelativeStringFromSeconds(e,!0);this.$(".ttl").html(t)},render:function(){var t=this.compiledTemplate({_:e,splunkUtil:u});return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("The Job is Running in the Background").t()),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.children.link.render().appendTo(this.$(r.BODY_FORM_SELECTOR)),this.$(r.BODY_SELECTOR).prepend(t),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_DONE),this.updateTTL(),this},template:'                <p>                    <%= splunkUtil.sprintf(_("The job&#39;s lifetime has been extended to %s.").t(), \'<span class="ttl">0</span>\') %>                </p>            '})}),define("views/shared/jobstatus/controls/menu/sendbackgroundmodal/Master",["underscore","backbone","module","views/shared/Modal","views/shared/jobstatus/controls/menu/sendbackgroundmodal/Settings","views/shared/jobstatus/controls/menu/sendbackgroundmodal/Success"],function(e,t,n,r,i,s){return r.extend({moduleId:n.id,initialize:function(){r.prototype.initialize.apply(this,arguments),this.model.inmem=this.model.searchJob.clone(),this.model.inmem.set({email:!1,results:"none",subject:e("Splunk Job Complete: $name$").t()}),this.children.settings=new i({model:{application:this.model.application,inmem:this.model.inmem,appLocal:this.model.appLocal}}),this.children.success=new s({model:{application:this.model.application,inmem:this.model.inmem}}),this.model.inmem.on("saveSuccess",function(){this.children.settings.$el.hide(),this.children.success.$el.show()},this),this.on("hidden",function(){this.model.inmem.isBackground()&&this.model.searchJob.trigger("close")},this)},render:function(){this.children.settings.render().appendTo(this.$el),this.children.success.render().appendTo(this.$el),this.children.success.$el.hide()}})}),define("views/shared/jobstatus/controls/menu/SendBackground",["underscore","module","views/Base","views/shared/jobstatus/controls/menu/sendbackgroundmodal/Master"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"send-background",tagName:"li",initialize:function(){n.prototype.initialize.apply(this,arguments),this.activate()},startListening:function(){this.listenTo(this.model.searchJob.entry.content,"change",this.render)},events:{'click a[class!="disabled"]':function(e){this.children.sendBackgroundModal=new r({model:{searchJob:this.model.searchJob,application:this.model.application,appLocal:this.model.appLocal},onHiddenRemove:!0}),this.children.sendBackgroundModal.render().appendTo($("body")),this.children.sendBackgroundModal.show(),e.preventDefault()},"click a.disabled":function(e){e.preventDefault()}},render:function(){var t=this.model.searchJob.entry.acl.canWrite(),n=this.model.searchJob.isBackground(),r=this.model.searchJob.entry.content.get("isRealTimeSearch");return this.$el.html('<a href="#">Send Job to Background</a>'),t&&this.model.searchJob.isRunning()&&!r&&!n?this.$el.html('<a href="#">'+e("Send Job to Background").t()+"</a>"):this.$el.html('<a href="#" class="disabled">'+e("Send Job to Background").t()+"</a>"),this}})}),define("views/shared/jobstatus/controls/menu/Inspect",["underscore","module","views/Base","uri/route","splunk.window"],function(e,t,n,r,i){return n.extend({moduleId:t.id,className:"inspect",tagName:"li",initialize:function(){n.prototype.initialize.apply(this,arguments)},events:{"click a":function(e){i.open(r.jobInspector(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),this.model.searchJob.id),"splunk_job_inspector",{width:870,height:560,menubar:!1}),e.preventDefault()}},render:function(){return this.$el.html('<a href="#">'+e("Inspect Job").t()+"</a>"),this}})}),define("views/shared/jobstatus/controls/menu/DeleteModal",["underscore","backbone","module","views/shared/Modal","views/shared/FlashMessages"],function(e,t,n,r,i){return r.extend({moduleId:n.id,initialize:function(){r.prototype.initialize.apply(this,arguments),this.children.flashMessages=new i({model:this.model})},events:$.extend({},r.prototype.events,{"click .btn-primary":function(e){this.model.destroy({success:function(e,t){this.hide(),this.model.unset("id")}.bind(this)}),e.preventDefault()}}),render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Delete Job").t()),this.children.flashMessages.render().prependTo(this.$(r.BODY_SELECTOR)),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.$(r.BODY_FORM_SELECTOR).append("<p>"+e("Are you sure you want to delete this job?").t()+"</p>"),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_DELETE),this}})}),define("views/shared/jobstatus/controls/menu/Delete",["underscore","module","views/Base","views/shared/jobstatus/controls/menu/DeleteModal"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"delete",tagName:"li",initialize:function(){n.prototype.initialize.apply(this,arguments)},events:{'click a[class!="disabled"]':function(e){this.children.deleteModal=new r({model:this.model.searchJob,onHiddenRemove:!0}),this.children.deleteModal.render().appendTo($("body")),this.children.deleteModal.show(),e.preventDefault()},"click a.disabled":function(e){e.preventDefault()}},render:function(){var t=this.model.searchJob.entry.acl.canWrite();return t?this.$el.html('<a href="#">'+e("Delete Job").t()+"</a>"):this.$el.html('<a href="#" class="disabled">'+e("Delete Job").t()+"</a>"),this}})}),define("views/shared/jobstatus/controls/menu/Master",["underscore","module","views/Base","views/shared/jobstatus/controls/menu/Messages","views/shared/jobstatus/controls/menu/Edit","views/shared/jobstatus/controls/menu/SendBackground","views/shared/jobstatus/controls/menu/Inspect","views/shared/jobstatus/controls/menu/Delete","views/shared/delegates/Popdown","util/splunkd_utils"],function(e,t,n,r,i,s,o,u,a,f){return n.extend({moduleId:t.id,className:"job-menu dropdown",initialize:function(){n.prototype.initialize.apply(this,arguments),this.children.messages=new r({model:{searchJob:this.model.searchJob,application:this.model.application}}),this.children.edit=new i({model:{searchJob:this.model.searchJob,application:this.model.application,report:this.model.report}}),this.children.sendBackground=new s({model:{searchJob:this.model.searchJob,application:this.model.application,appLocal:this.model.appLocal}}),this.children.inspect=new o({model:{searchJob:this.model.searchJob,application:this.model.application}}),this.children.del=new u({model:{searchJob:this.model.searchJob,application:this.model.application}}),this.activate()},startListening:function(){this.listenTo(this.model.searchJob,"serverValidated",this.checkMessages)},checkMessages:function(e,t,n){var r=f.messagesContainsOneOfTypes(n,[f.INFO]),i=f.messagesContainsOneOfTypes(n,[f.WARNING]);i?this.showMessageIndicator(f.WARNING):r?this.showMessageIndicator(f.INFO):(this.$(".message-indicator").hide(),this.children.messages.$el.addClass("hidden"))},showMessageIndicator:function(e){var t=f.normalizeType(e)=="info"?"icon-info-circle":"icon-warning";this.$(".message-indicator").attr("class","message-indicator "+t).show(),this.children.messages.$el.removeClass("hidden")},render:function(){var t;return this.$el.html().length?this:(this.$el.html(this.compiledTemplate({_:e})),this.$(".dropdown-menu > .arrow").after(this.children.messages.render().el),t=this.$(".controls"),this.children.edit.render().appendTo(t),this.children.sendBackground.render().appendTo(t),this.children.inspect.render().appendTo(t),this.options.allowDelete&&this.children.del.render().appendTo(t),this.children.popdown=new a({el:this.el,attachDialogTo:"body"}),this.checkMessages(),this)},template:'                <a class="btn-pill dropdown-toggle" href="#">                    <i class="message-indicator" style="display:none"></i>                    <%- _("Job").t() %><span class="caret"></span>                </a>                <div class="dropdown-menu">                    <div class="arrow"></div>                    <ul class="controls"></ul>                </div>            '})}),define("views/shared/jobstatus/controls/Master",["underscore","module","views/Base","views/shared/jobstatus/controls/Cancel","views/shared/jobstatus/controls/Stop","views/shared/jobstatus/controls/PlayPause","views/shared/jobstatus/controls/Reload","views/shared/jobstatus/controls/menu/Master","util/console"],function(e,t,n,r,i,s,o,u,a){return n.extend({moduleId:t.id,className:"pull-left includes-job-menu",initialize:function(){n.prototype.initialize.apply(this,arguments),this.options.showJobMenu!==!1?this.children.menu=new u({model:{searchJob:this.model.searchJob,application:this.model.application,appLocal:this.model.appLocal,report:this.model.report},allowDelete:this.options.allowDelete}):this.$el.removeClass("includes-job-menu"),this.children.playPause=new s({model:this.model.searchJob}),this.children.stop=new i({model:this.model.searchJob}),this.options.enableReload&&(this.children.reload=new o({model:this.model.searchJob})),this.activate({skipRender:!0})},startListening:function(){this.listenTo(this.model.searchJob,"sync",this.render)},activate:function(e){return e=e||{},this.active?n.prototype.activate.apply(this,arguments):(e.skipRender||this.render(),n.prototype.activate.apply(this,arguments))},render:function(){this.el.innerHTML||e.each(this.children,function(e){e.render().appendTo(this.$el)},this);var t=[this.children.playPause,this.children.stop];return this.options.enableReload&&t.push(this.children.reload),e.each(t,function(e){e.$el[e.isActive()?"removeClass":"addClass"]("disabled"),$.contains(this.el,e.el)||e.appendTo(this.$el);var t=e.$el.is(":focus");t&&e.$el.focus()},this),this}})}),define("views/shared/jobstatus/buttons/ShareDialog",["jquery","underscore","module","views/Base","views/shared/Modal","views/shared/controls/ControlGroup","views/shared/jobstatus/controls/menu/EditModal","uri/route","util/time","splunk.util"],function(e,t,n,r,i,s,o,u,a,f){return i.extend({moduleId:n.id,initialize:function(){r.prototype.initialize.apply(this,arguments);var e={sid:this.model.searchJob.id};this.model.application.get("page")==="report"&&this.model.report&&!this.model.report.isNew()&&(e.s=this.model.report.id),this.linkToJob=u[this.model.application.get("page")](this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),{data:e,absolute:!0}),this.children.link=new s({label:t("Link To Job").t(),controlType:"Text",help:t("Copy or bookmark the link by right-clicking the icon, or drag the icon into your bookmarks bar.").t(),controlOptions:{defaultValue:this.linkToJob,append:'<a class="add-on bookmark" href="'+this.linkToJob+'"><i class="icon-bookmark"></i><span class="hide-text">'+t("Splunk Search Job").t()+"</span></a>"}})},events:e.extend({},i.prototype.events,{"click .jobSettings":function(t){this.hide(),this.children.editModal=new o({model:{searchJob:this.model.searchJob,application:this.model.application,report:this.model.report},onHiddenRemove:!0}),this.children.editModal.render().appendTo(e("body")),this.children.editModal.show(),t.preventDefault()},"click a.bookmark":function(e){e.preventDefault()}}),render:function(){var e=this.model.searchJob.entry.acl.get("ttl")||0,n=a.getRelativeStringFromSeconds(e,!0),r=this.compiledTemplate({settingsAnchor:'<a class="jobSettings" href="#">'+t("Job&nbsp;Settings").t()+"</a>",time:n,_:t,splunkUtil:f});return this.$el.html(i.TEMPLATE),this.$(i.HEADER_TITLE_SELECTOR).html(t("Share Job").t()),this.$(i.BODY_SELECTOR).append(i.FORM_HORIZONTAL),this.children.link.render().appendTo(this.$(i.BODY_FORM_SELECTOR)),this.$(i.BODY_SELECTOR).prepend(r),this},template:'                <p>                    <%=  splunkUtil.sprintf(_("The job&#39;s lifetime has been extended to %s and read permissions have been set to Everyone. Manage the job via %s.").t(), time, settingsAnchor) %>                </p>            '})}),define("views/shared/jobstatus/buttons/ShareButton",["underscore","module","views/Base","views/shared/jobstatus/buttons/ShareDialog","models/search/Job","bootstrap.tooltip"],function(e,t,n,r,i){return n.extend({moduleId:t.id,className:"share btn-pill btn-square disabled",tagName:"a",attributes:{href:"#"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.$el.html('<i class="icon-share"></i><span class="hide-text">'+e("Share").t()+"</span>"),this.$el.tooltip({animation:!1,title:e("Share").t(),container:"body"}),this.activate()},startListening:function(){this.listenTo(this.model.searchJob.entry.acl,"change",this.render),this.listenTo(this.model.searchJob.entry.content,"change:ttl",this.render)},activate:function(e){return this.active?n.prototype.activate.apply(this,arguments):(this.defaultSaveTTL=parseInt(this.model.searchJob.entry.content.get("defaultSaveTTL"),10),n.prototype.activate.apply(this,arguments))},events:{click:function(e){var t=$(e.currentTarget),n=this.model.searchJob.entry.content.get("isRealTimeSearch"),s;e.preventDefault();if(t.hasClass("disabled"))return;n?s=this.model.searchJob.saveJob({auto_cancel:i.DEFAULT_AUTO_CANCEL}):s=this.model.searchJob.saveJob(),$.when(s).then(function(){this.model.searchJob.makeWorldReadable({success:function(){var e=this.model.searchJob.fetch();$.when(e).then(function(){this.children.shareDialog=new r({model:{searchJob:this.model.searchJob,application:this.model.application,report:this.model.report},onHiddenRemove:!0}),this.children.shareDialog.render().appendTo($("body")),this.children.shareDialog.show()}.bind(this))}.bind(this)})}.bind(this))}},render:function(){var e=this.model.searchJob.entry.acl.canWrite(),t=this.model.searchJob.isSharedAccordingToTTL(this.defaultSaveTTL);return e?this.$el.removeClass("disabled"):this.$el.addClass("disabled"),this}})}),define("views/shared/jobstatus/buttons/ExportButton",["underscore","module","views/Base","views/shared/jobstatus/buttons/ExportResultsDialog","bootstrap.tooltip"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"export btn-pill btn-square",tagName:"a",attributes:{href:"#"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.$el.html('<i class="icon-export"></i><span class="hide-text">'+e("Export").t()+"</span>"),this.$el.tooltip({animation:!1,title:e("Export").t(),container:"body"}),this.activate()},startListening:function(){this.listenTo(this.model.searchJob.entry.content,"change:dispatchState",e.debounce(this.enableDisable,0))},events:{click:function(e){this.$el.hasClass("disabled")||(this.children.exportDialog=new r({model:{searchJob:this.model.searchJob,application:this.model.application,report:this.model.report},onHiddenRemove:!0}),this.children.exportDialog.render().appendTo($("body")),this.children.exportDialog.show()),e.preventDefault()}},enableDisable:function(){this.model.searchJob.isPreparing()||this.model.searchJob.isRunning()||(this.model.searchJob.isReportSearch()||this.model.searchJob.isRealtime())&&!this.model.searchJob.entry.content.get("isDone")?(this.$el.tooltip("hide"),this.$el.data("tooltip",!1),this.$el.tooltip({animation:!1,title:e("Export - You can only export results for completed jobs.").t(),container:"body"}),this.$el.addClass("disabled")):(this.$el.tooltip("hide"),this.$el.data("tooltip",!1),this.$el.tooltip({animation:!1,title:e("Export").t(),container:"body"}),this.$el.removeClass("disabled"))},render:function(){return this.enableDisable(),this}})}),define("views/shared/jobstatus/buttons/PrintButton",["underscore","module","views/Base","helpers/Printer","bootstrap.tooltip"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"print btn-pill btn-square",tagName:"a",attributes:{href:"#"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.$el.html('<i class="icon-print"></i><span class="hide-text">'+e("Print").t()+"</span>"),this.$el.tooltip({animation:!1,title:e("Print").t(),container:"body"})},events:{click:function(e){return r.printPage(),!1}},render:function(){return this}})}),define("views/shared/jobstatus/buttons/Master",["module","views/Base","views/shared/jobstatus/buttons/ShareButton","views/shared/jobstatus/buttons/ExportButton","views/shared/jobstatus/buttons/PrintButton"],function(e,t,n,r,i){return t.extend({moduleId:e.id,className:"pull-left export-print-group",initialize:function(){t.prototype.initialize.apply(this,arguments),this.children.shareButton=new n({model:{searchJob:this.model.searchJob,application:this.model.application,report:this.model.report}}),this.children.exportButton=new r({model:{searchJob:this.model.searchJob,application:this.model.application,report:this.model.report}}),this.children.printButton=new i},render:function(){return this.children.shareButton.render().appendTo(this.$el),this.children.exportButton.render().appendTo(this.$el),this.children.printButton.render().appendTo(this.$el),this}})}),define("views/shared/jobstatus/SearchMode",["underscore","module","views/shared/controls/SyntheticSelectControl","util/splunkd_utils"],function(e,t,n,r){return n.extend({className:"pull-left",moduleId:t.id,initialize:function(t){t.items=[{value:r.FAST,label:e("Fast Mode").t(),icon:"lightning",description:e("Field discovery off for event searches. No event or field data for stats searches.").t()},{value:r.SMART,label:e("Smart Mode").t(),icon:"bulb",description:e("Field discovery on for event searches. No event or field data for stats searches.").t()},{value:r.VERBOSE,label:e("Verbose Mode").t(),icon:"speech-bubble",description:e("All event & field data.").t()}],t.modelAttribute="display.page.search.mode",t.defaultValue=r.SMART,t.toggleClassName="btn-pill dropdown-toggle-search-mode",t.menuClassName="dropdown-menu-search-mode",t.iconClassName="link-icon",n.prototype.initialize.call(this,t)}})}),define("views/shared/jobstatus/AutoPause",["underscore","module","views/Base","util/splunkd_utils","splunk.util","splunk.i18n"],function(e,t,n,r,i,s){return n.extend({moduleId:t.id,initialize:function(){n.prototype.initialize.apply(this,arguments),this.activate()},startListening:function(){this.listenTo(this.model.searchJob.entry.content,"change:isDone change:isPaused",this.debouncedRender),this.listenTo(this.model.searchJob,"sync",this.render)},activate:function(e){return this.active?n.prototype.activate.apply(this,arguments):(this.autoPauseInterval=parseInt(this.model.searchJob.entry.content.runtime.get("auto_pause"),10)*1e3,this.autoPauseStartTime=new Date,n.prototype.activate.apply(this,arguments))},events:{"click a.auto-pause-cancel":function(e){e.preventDefault(),this.model.searchJob.saveJob({data:{auto_pause:0},success:function(e,t){this.remove()}.bind(this)})}},render:function(){if(this.model.searchJob.isNew()||this.model.searchJob.entry.content.get("isDone")||this.model.searchJob.entry.content.get("isPaused")||parseInt(this.model.searchJob.entry.content.runtime.get("auto_pause"),10)===0)this.$el.hide(),this.remove();else{var t=parseInt(new Date-this.autoPauseStartTime,10),n=Math.round((this.autoPauseInterval-t)/1e3),r=this.compiledTemplate({_:e,i18n:s,splunkUtil:i,timeRemaining:n});this.el.innerHTML=r}return this},template:'                <div class="alert alert-warning">                    <i class="icon-alert"></i>                    <%- splunkUtil.sprintf(i18n.ungettext("Your search will automatically pause in %s second.", "Your search will automatically pause in %s seconds.", timeRemaining), timeRemaining) %>                    <a href="#" class="auto-pause-cancel"><%- _("Do not pause").t() %></a>                </div>            '})}),define("views/shared/jobstatus/Progress",["underscore","module","views/Base","splunk.util","bootstrap.tooltip"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"progress-bar",tagName:"div",initialize:function(){var t={frameCount:28,maxStep:3,fps:12};e.defaults(this.options,t),n.prototype.initialize.apply(this,arguments),this.frame=0,this.percentage=0,this.targetPercentage=0,this.lastStep=0,this.animating=!1,this.activate({skipRender:!0})},activate:function(e){return e=e||{},this.animating?n.prototype.activate.apply(this,arguments):(this.model.entry.content.on("change",this.render,this),this.model.on("change:id",this.render,this),e.skipRender||this.render(),n.prototype.activate.apply(this,arguments))},deactivate:function(e){return this.animating?(n.prototype.deactivate.apply(this,arguments),this.model.entry.content.off(null,null,this),this.model.off(null,null,this),this.stop(),this):n.prototype.deactivate.apply(this,arguments)},stop:function(){return this.animating=!1,this.interval&&window.clearInterval(this.interval),this.$el.hide(),this},start:function(){return this.animating=!0,this.$el.show(),this.interval&&window.clearInterval(this.interval),this.interval=setInterval(this.step.bind(this),1e3/this.options.fps),this},step:function(){var e=this.frame<this.options.frameCount/2?this.frame:this.options.frameCount-this.frame,t=Math.min(1,e/(this.options.frameCount/2)*1.1);this.$progressCursor.css({opacity:t,filter:"alpha(opacity="+t*100+")"});if(this.targetPercentage!=this.percentage&&this.targetPercentage==0)this.percentage=0,this.$(".progress-animation").css("width","0%");else if(this.targetPercentage!=this.percentage){var n=this.targetPercentage-this.percentage,r=n>this.options.maxStep+this.lastStep?this.options.maxStep+this.lastStep:n;this.percentage+=r,this.lastStep=r,this.$(".progress-animation").css("width",this.percentage+"%")}else this.lastStep=0;return this.frame++,this.frame=this.frame==this.options.frameCount?0:this.frame,this},render:function(){this.el.innerHTML||(this.$el.html(this.compiledTemplate({_:e})),this.$progressAnimation=this.$(".progress-animation"),this.$progressCursor=this.$(".progress-cursor"));if(this.model.isNew())return this.$el.hide(),this;if(this.model.isRunning()||this.model.isParsing()||this.model.isFinalizing()){this.targetPercentage=(this.model.entry.content.get("doneProgress")*100).toFixed(1);var t=this.$progressAnimation.next(".tooltip:visible").length;t&&this.$progressAnimation.tooltip("hide"),this.$progressAnimation.data("tooltip",!1),this.model.entry.content.get("isRealTimeSearch")&&this.targetPercentage==100?(this.$el.addClass("real-time"),this.$progressAnimation.tooltip({animation:!1,title:e("Updating in Real-time.").t()})):(this.$el.removeClass("real-time"),this.$progressAnimation.tooltip({animation:!1,title:r.sprintf(e("%s%% of the time range scanned.").t(),this.targetPercentage)})),t&&this.$progressAnimation.tooltip("show"),this.animating||(this.start(),this.$(".progress-animation").show())}else this.animating&&this.stop(),this.$el.show().children().hide();return this},template:'                <div class="progress-animation" tabindex="0"><div class="progress-cursor"></div></div>        '})}),define("views/shared/jobstatus/Master",["underscore","module","models/classicurl","views/Base","views/shared/jobstatus/Count","views/shared/jobstatus/controls/Master","views/shared/jobstatus/buttons/Master","views/shared/jobstatus/SearchMode","views/shared/jobstatus/AutoPause","views/shared/jobstatus/Progress","uri/route","splunk.window","splunk.util","util/splunkd_utils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){return r.extend({moduleId:t.id,initialize:function(){r.prototype.initialize.apply(this,arguments),this.fatalErrorTypes=[p.FATAL,p.NOT_FOUND],this.renderableErrorTypes=[p.ERROR,p.FATAL,p.NOT_FOUND];var t={allowDelete:!0};e.defaults(this.options,t),this.options.enableSearchMode&&(this.children.searchMode=new u({model:this.model.state,btnClass:"btn-mini",rightAlign:!0})),this.options.showJobButtons!==!1&&(this.children.buttons=new o({model:{searchJob:this.model.searchJob,application:this.model.application,report:this.model.report}})),this.children.controls=new s({showJobMenu:this.options.showJobMenu,allowDelete:this.options.allowDelete,enableReload:this.options.enableReload,model:{searchJob:this.model.searchJob,application:this.model.application,appLocal:this.model.appLocal,report:this.model.report}}),this.children.count=new i({model:this.model.searchJob}),this.options.showAutoPause&&(this.children.autoPause=new a({model:{searchJob:this.model.searchJob}})),this.children.progress=new f({model:this.model.searchJob}),this.activate()},startListening:function(){this.listenTo(this.model.searchJob,"sync error",function(e,t){var n=this.model.searchJob.error.get("messages");p.messagesContainsOneOfTypes(n,this.renderableErrorTypes)&&this.renderError(n,t)}),this.listenTo(this.model.searchJob.control,"error",function(e,t){var n=this.model.searchJob.control.error.get("messages");p.messagesContainsOneOfTypes(n,this.renderableErrorTypes)&&this.renderError(n,t)})},events:{"click a.job_inspector":function(e){c.open(l.jobInspector(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),this.model.searchJob.id),"splunk_job_inspector",{width:870,height:560,menubar:!1}),e.preventDefault()}},render:function(){if(p.messagesContainsOneOfTypes(this.model.searchJob.error.get("messages"),this.fatalErrorTypes)||this.model.searchJob.entry.content.get("isFailed"))return this.renderError();this.options.showAutoPause&&this.children.autoPause.render().appendTo(this.$el);if(this.$(".jobstatus-control-grouping").length===0){var e=this.compiledTemplate({});this.$el.append(e)}return this.children.controls.render().appendTo(this.$(".jobstatus-control-grouping")),this.options.showJobButtons!==!1&&this.children.buttons.render().appendTo(this.$(".jobstatus-control-grouping")),this.options.enableSearchMode&&this.children.searchMode.render().appendTo(this.$(".jobstatus-control-grouping")),this.children.count.render().appendTo(this.$el),this.children.progress.render().appendTo(this.$el),this},renderError:function(t,n){var r='<a class="job_inspector" href="#">'+e("Job Inspector").t()+"</a>",i=this.model.searchJob.id||e("unknown").t(),s,o;return p.messagesContainsOneOfTypes(t,[p.NOT_FOUND])||n&&n.hasOwnProperty("status")&&n.status==404?s=h.sprintf(e('The search job "%s" was canceled remotely or expired.').t(),i):this.model.searchJob.entry.content.get("isFailed")&&(s=h.sprintf(e("The search job has failed due to an error. You may be able view the job in the %s.").t(),r)),s&&(o=e.template(this.errorTemplate,{_:e,link:r,splunkUtil:h,error:s}),this.el.innerHTML=o),this},template:'                <div class="pull-right jobstatus-control-grouping"></div>            ',errorTemplate:'                <div class="alert alert-error">                    <i class="icon-alert"></i>                    <%= error %>                </div>            ',notFoundTemplate:'                <div class="alert alert-error">                    <i class="icon-alert"></i>                    <%= splunkUtil.sprintf(_("The job has failed due to an error. You may be able view the job in the %s.").t(), link) %>                </div>            '})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/bunny-button.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/searchcontrolsview",["require","exports","module","underscore","backbone","./mvc","./basesplunkview","views/shared/jobstatus/Master","models/ACLReadOnly","models/shared/Application","./utils","util/time","./sharedmodels","css!../css/bunny-button"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=e("./mvc"),o=e("./basesplunkview"),u=e("views/shared/jobstatus/Master"),a=e("models/ACLReadOnly"),f=e("models/shared/Application"),l=e("./utils"),c=e("util/time"),h=e("./sharedmodels");e("css!../css/bunny-button");var p=i.Model.extend({constructor:function(){this.control=new i.Model,this.error=new i.Model,this.entry=new i.Model,this.entry.content=new i.Model,this.entry.content.custom=new i.Model,this.entry.acl=new a,i.Model.prototype.constructor.apply(this,arguments)},initialize:function(){this._isNew=!0},set:function(){i.Model.prototype.set.apply(this,arguments),i.Model.prototype.set.apply(this.entry.content,arguments)},isNew:function(){return this._isNew},fetch:function(){return this},clear:function(){this.entry.clear(),this.entry.content.clear(),this.entry.content.custom.clear(),this._isNew=!0},destroy:function(e){this.cancel(),e.success&&e.success()},pause:function(e){this.manager&&this.manager.pause()},unpause:function(e){this.manager&&this.manager.unpause()},finalize:function(e){this.manager&&this.manager.finalize()},cancel:function(e){this.manager&&this.manager.cancel()},touch:function(e){this.manager&&this.manager.touch()},saveIsBackground:function(e){this.entry.content.custom.set("isBackground","1")},isBackground:function(){return this.entry.content.custom.get("isBackground")==="1"},resultCountSafe:function(){return this.entry.content.get("isPreviewEnabled")&&!this.entry.content.get("isDone")?this.entry.content.get("resultPreviewCount"):this.entry.content.get("resultCount")},eventAvailableCountSafe:function(){return this.entry.content.get("statusBuckets")==0?this.resultCountSafe():this.entry.content.get("eventAvailableCount")},latestTimeSafe:function(){var e=this.entry;return e.content.get("latestTime")||e.get("published")},isQueued:function(){return this.checkUppercaseValue("dispatchState",p.QUEUED)},isParsing:function(){return this.checkUppercaseValue("dispatchState",p.PARSING)},isFinalizing:function(){return this.checkUppercaseValue("dispatchState",p.FINALIZING)},isPreparing:function(){return this.isQueued()||this.isParsing()},isRunning:function(){return!this.isNew()&&!this.entry.content.get("isPaused")&&!this.entry.content.get("isDone")&&!this.isPreparing()&&!this.isFinalizing()},isAdHocLevelFast:function(){return this.checkUppercaseValue("adhoc_search_level","FAST")},isReportSearch:function(){return this.entry.content.get("reportSearch")?!0:!1},isOverAllTime:function(){var e=this.entry.content.request;return e?!e.get("earliest_time")&&!e.get("latest_time"):!1},isRealtime:function(){var e=this.entry.content.request;return e&&c.isRealtime(e.get("earliest_time"))&&c.isRealtime(e.get("latest_time"))},checkUppercaseValue:function(e,t){var n=this.entry.content.get(e);return n?n.toUpperCase()===t:!1}},{QUEUED:"QUEUED",PARSING:"PARSING",RUNNING:"RUNNING",PAUSED:"PAUSED",FINALIZING:"FINALIZING",FAILED:"FAILED",DONE:"DONE"}),d=o.extend({moduleId:n.id,className:"splunk-searchcontrols",options:{managerid:null},initialize:function(){this.configure(),this._searchJob=new p,this._state=new i.Model({"display.page.search.mode":"smart"});var e=h.get("app"),t=h.get("appLocal"),n=this;this._statusDfd=$.when(t.dfd).done(function(){n.jobStatus=new u({model:{searchJob:n._searchJob,state:n._state,application:e,appLocal:t},collection:{limits:new i.Collection},enableSearchMode:!0,showAutoPause:!1,showJobButtons:!1})}),this.bindToComponentSetting("managerid",this.onManagerChange,this),this._state.on("change",this._onSearchModeChange,this)},onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager.settings.off(null,null,this)),this.manager=t,t&&(this._searchJob.manager=t,t.on("search:start",this._onSearchStart,this),t.on("search:cancelled",this._onSearchCancelled,this),t.on("search:failed",this._onSearchFailed,this),t.on("search:progress",this._onSearchProgress,this),this.manager.settings.get("adhoc_search_level")?this._state.set("display.page.search.mode",this.manager.settings.get("adhoc_search_level")):this._onSearchModeChange())},render:function(){var e=this;return $.when(this._statusDfd).done(function(){e.$el.append(e.jobStatus.render().el)}),this},_onSearchModeChange:function(){var e=this._state.get("display.page.search.mode");e&&this.manager&&this.manager.settings.set("adhoc_search_level",e)},_onSearchStart:function(e){this._searchJob._isNew=!0,this._searchJob.clear()},_onSearchCancelled:function(e){this._searchJob._isNew=!0,this._searchJob.clear()},_onSearchFailed:function(e){this._searchJob._isNew=!0,this._searchJob.clear()},_onSearchProgress:function(e){this._searchJob._isNew=!1,this._searchJob.entry.set(e),this._searchJob.entry.content.set(e.content),this._searchJob.entry.acl.set(e.acl),this._searchJob.trigger("jobProgress"),e.content&&e.content.sid&&(this._searchJob.id=e.content.sid);var t=this;$.when(this._statusDfd).done(function(){r.each(t.jobStatus.children.controls.children.menu.children,function(e){e.render()})})}});return d}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer('.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:"";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\n.dropdown-toggle-search-mode i[class^="icon-"]::before{vertical-align:top;}\n.dropdown-menu-search-mode{width:26em;}.dropdown-menu-search-mode .link-label{*display:block;}\n.dropdown-menu-search-mode li>a{padding-left:45px ;}\n.dropdown-menu-search-mode .link-description{color:#999999;display:block;font-size:0.85em;}\n.dropdown-menu-search-mode .link-icon{display:block;position:absolute;color:#999999;left:0;top:5px;font-size:2em;width:1.5em;line-height:1em;opacity:0.8;filter:alpha(opacity=80);}\n.dropdown-menu-search-mode a .icon-check{left:30px;}\n.dropdown-menu-search-mode li>a{white-space:normal;}\n')}),requirejs.s.contexts._.nextTick=requirejs.nextTick;
