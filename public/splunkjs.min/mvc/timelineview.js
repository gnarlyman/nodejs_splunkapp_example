define("splunk/brushes/BorderStrokeBrush",["require","jg_global","jgatt","jgatt","jgatt","jgatt"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").graphics.brushes.Brush,r=e("jgatt").properties.ObservableArrayProperty,i=e("jgatt").properties.ObservableProperty,s=e("jgatt").utils.NumberUtils;return t(n,function(e,t){this.colors=(new r("colors",Number,[0,0,0,0])).readFilter(function(e){return e.concat()}).writeFilter(function(e){var t=e?e.length:0,n=t>0&&!isNaN(e[0])?s.minMax(Math.floor(e[0]),0,16777215):0,r=t>1&&!isNaN(e[1])?s.minMax(Math.floor(e[1]),0,16777215):n,i=t>2&&!isNaN(e[2])?s.minMax(Math.floor(e[2]),0,16777215):n,o=t>3&&!isNaN(e[3])?s.minMax(Math.floor(e[3]),0,16777215):r;return[n,r,i,o]}),this.alphas=(new r("alphas",Number,[1,1,1,1])).readFilter(function(e){return e.concat()}).writeFilter(function(e){var t=e?e.length:0,n=t>0&&!isNaN(e[0])?s.minMax(e[0],0,1):1,r=t>1&&!isNaN(e[1])?s.minMax(e[1],0,1):n,i=t>2&&!isNaN(e[2])?s.minMax(e[2],0,1):n,o=t>3&&!isNaN(e[3])?s.minMax(e[3],0,1):r;return[n,r,i,o]}),this.thicknesses=(new r("thicknesses",Number,[1,1,1,1])).readFilter(function(e){return e.concat()}).writeFilter(function(e){var t=e?e.length:0,n=t>0&&e[0]<Infinity?Math.max(e[0],0):1,r=t>1&&e[1]<Infinity?Math.max(e[1],0):n,i=t>2&&e[2]<Infinity?Math.max(e[2],0):n,s=t>3&&e[3]<Infinity?Math.max(e[3],0):r;return[n,r,i,s]}),this.caps=(new i("caps",String,"none")).writeFilter(function(e){switch(e){case"none":case"round":case"square":return e;default:return"none"}}),this.joints=(new i("joints",String,"miter")).writeFilter(function(e){switch(e){case"miter":case"round":case"bevel":return e;default:return"miter"}}),this.miterLimit=(new i("miterLimit",Number,10)).writeFilter(function(e){return e>0&&e<Infinity?e:10}),this.pixelHinting=new i("pixelHinting",Boolean,!0),this.constructor=function(e,n,r,i,s,o,u){t.constructor.call(this),e!=null&&this.set(this.colors,e),n!=null&&this.set(this.alphas,n),r!=null&&this.set(this.thicknesses,r),i!=null&&this.set(this.caps,i),s!=null&&this.set(this.joints,s),o!=null&&this.set(this.miterLimit,o),u!=null&&this.set(this.pixelHinting,u)},this.draw=function(e,t,n,r,i){var s=t.length;if(s===0)return;var o=Infinity,u=-Infinity,a=Infinity,f=-Infinity,l,c;for(c=0;c<s;c++)l=t[c],l.name==="moveTo"||l.name==="lineTo"?(o=Math.min(o,l.x),u=Math.max(u,l.x),a=Math.min(a,l.y),f=Math.max(f,l.y)):l.name==="curveTo"&&(o=Math.min(o,l.controlX,l.anchorX),u=Math.max(u,l.controlX,l.anchorX),a=Math.min(a,l.controlY,l.anchorY),f=Math.max(f,l.controlY,l.anchorY));var h=[{x:o,y:a},{x:u,y:a},{x:u,y:f},{x:o,y:f},{x:o,y:a}],p=NaN,d=NaN,v=NaN,m=!0;for(c=0;c<4;c++){e.thicknesses[c]!==p&&(p=e.thicknesses[c],m=!0);if(p===0)continue;e.colors[c]!==d&&(d=e.colors[c],m=!0),e.alphas[c]!==v&&(v=e.alphas[c],m=!0),m&&(n.endStroke(),n.setStrokeStyle(p,e.caps,e.joints,e.miterLimit,e.pixelHinting),n.beginSolidStroke(d,v),n.moveTo(h[c].x,h[c].y),m=!1),n.lineTo(h[c+1].x,h[c+1].y)}n.endStroke()}})}),define("splunk/charting/LogScale",["require","jg_global","jgatt"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").utils.NumberUtils;return t(Object,function(e,t){this._base=0,this._baseMultiplier=0,this.constructor=function(e){if(e!=null&&typeof e!="number")throw new Error("Parameter base must be a number.");this._base=e>0&&e<Infinity?e:10,this._baseMultiplier=Math.log(this._base)},this.base=function(){return this._base},this.valueToScale=function(e){if(this._base<=1)return 0;var t=0,r=e<0;return r&&(e=-e),e<this._base&&(e+=(this._base-e)/this._base),t=Math.log(e)/this._baseMultiplier,t=n.toPrecision(t,-1),r&&(t=-t),t},this.scaleToValue=function(e){if(this._base<=1)return 0;var t=0,r=e<0;return r&&(e=-e),t=Math.exp(e*this._baseMultiplier),t<this._base&&(t=this._base*(t-1)/(this._base-1)),t=n.toPrecision(t,-1),r&&(t=-t),t}})}),define("splunk/time/TimeZone",["require","jg_global"],function(e){var t=e("jg_global").jg_extend;return t(Object,function(e,t){this.getStandardOffset=function(){return 0},this.getOffset=function(e){return 0}})}),define("splunk/time/SimpleTimeZone",["require","jg_global","splunk/time/TimeZone"],function(e){var t=e("jg_global").jg_extend,n=e("splunk/time/TimeZone");return t(n,function(e,t){this._offset=0,this.constructor=function(e){this._offset=e!==undefined?e:0},this.getStandardOffset=function(){return this._offset},this.getOffset=function(e){return this._offset}})}),define("splunk/time/LocalTimeZone",["require","jg_global","splunk/time/TimeZone"],function(e){var t=e("jg_global").jg_extend,n=e("splunk/time/TimeZone");return t(n,function(e,t){this.getStandardOffset=function(){var e=new Date(0);return-e.getTimezoneOffset()*60},this.getOffset=function(e){var t=new Date(e*1e3);return-t.getTimezoneOffset()*60}})}),define("splunk/time/TimeZones",["require","jg_global","splunk/time/LocalTimeZone","splunk/time/SimpleTimeZone"],function(e){var t=e("jg_global").jg_static,n=e("splunk/time/LocalTimeZone"),r=e("splunk/time/SimpleTimeZone");return t(function(e){e.LOCAL=new n,e.UTC=new r(0)})}),define("splunk/time/DateTime",["require","jg_global","splunk/time/SimpleTimeZone","splunk/time/TimeZone","splunk/time/TimeZones"],function(e){var t=e("jg_global").jg_extend,n=e("splunk/time/SimpleTimeZone"),r=e("splunk/time/TimeZone"),i=e("splunk/time/TimeZones");return t(Object,function(e,t){var s=/([\+\-])?(\d{4,})(?:(?:\-(\d{2}))(?:(?:\-(\d{2}))(?:(?:[T ](\d{2}))(?:(?:\:(\d{2}))(?:(?:\:(\d{2}(?:\.\d+)?)))?)?(?:(Z)|([\+\-])(\d{2})(?:\:(\d{2}))?)?)?)?)?/,o=function(e){return Number(e.toFixed(6))},u=function(e,t,n){if(e!=e)return"NaN";if(e==Infinity)return"Infinity";if(e==-Infinity)return"-Infinity";t=t!==undefined?t:0,n=n!==undefined?n:0;var r=e.toFixed(20),i=r.indexOf(".");i<0?i=r.length:n<1?r=r.substring(0,i):r=r.substring(0,i)+"."+r.substring(i+1,i+n+1);for(var s=i;s<t;s++)r="0"+r;return r};this._year=0,this._month=1,this._day=1,this._weekday=0,this._hours=0,this._minutes=0,this._seconds=0,this._timeZone=i.LOCAL,this._timeZoneOffset=0,this._time=0,this._isValid=!0,this.constructor=function(e,t,o,u,a,f,l){switch(arguments.length){case 0:var c=new Date;this._time=c.getTime()/1e3,this._updateProperties();break;case 1:if(typeof e=="number")this._time=e,this._updateProperties();else if(typeof e=="string"){var h=s.exec(e),p=h?h.length:0,d;d=p>1?h[1]:null;var v=d=="-"?-1:1;d=p>2?h[2]:null,this._year=d?v*Number(d):0,d=p>3?h[3]:null,this._month=d?Number(d):1,d=p>4?h[4]:null,this._day=d?Number(d):1,d=p>5?h[5]:null,this._hours=d?Number(d):0,d=p>6?h[6]:null,this._minutes=d?Number(d):0,d=p>7?h[7]:null,this._seconds=d?Number(d):0,d=p>8?h[8]:null;var m=d=="Z";d=p>9?h[9]:null;var g=d=="-"?-1:1;d=p>10?h[10]:null;var y=d?Number(d):NaN;d=p>11?h[11]:null;var b=d?Number(d):NaN;m?this._timeZone=i.UTC:!isNaN(y)&&!isNaN(b)?this._timeZone=new n(g*(y*60+b)*60):this._timeZone=i.LOCAL,this._updateTime()}else this._time=NaN,this._updateProperties();break;default:typeof e=="number"?(this._year=e,this._month=t!==undefined?t:1,this._day=o!==undefined?o:1,this._hours=u!==undefined?u:0,this._minutes=a!==undefined?a:0,this._seconds=f!==undefined?f:0,this._timeZone=l instanceof r?l:i.LOCAL,this._updateTime()):(this._time=NaN,this._updateProperties())}},this.getYear=function(){return this._year},this.setYear=function(e){this._year=e,this._updateTime()},this.getMonth=function(){return this._month},this.setMonth=function(e){this._month=e,this._updateTime()},this.getDay=function(){return this._day},this.setDay=function(e){this._day=e,this._updateTime()},this.getWeekday=function(){return this._weekday},this.getHours=function(){return this._hours},this.setHours=function(e){this._hours=e,this._updateTime()},this.getMinutes=function(){return this._minutes},this.setMinutes=function(e){this._minutes=e,this._updateTime()},this.getSeconds=function(){return this._seconds},this.setSeconds=function(e){this._seconds=e,this._updateTime()},this.getTimeZone=function(){return this._timeZone},this.setTimeZone=function(e){this._timeZone=e instanceof r?e:i.LOCAL,this._updateTime()},this.getTimeZoneOffset=function(){return this._timeZoneOffset},this.getTime=function(){return this._time},this.setTime=function(e){this._time=e,this._updateProperties()},this.toUTC=function(){return this.toTimeZone(i.UTC)},this.toLocal=function(){return this.toTimeZone(i.LOCAL)},this.toTimeZone=function(t){var n=new e;return n.setTimeZone(t),n.setTime(this._time),n},this.clone=function(){var t=new e;return t.setTimeZone(this._timeZone),t.setTime(this._time),t},this.equals=function(e){return this._time===e._time&&this._timeZoneOffset===e._timeZoneOffset},this.toString=function(){if(!this._isValid)return"Invalid Date";var e="";this._year<0?e+="-"+u(-this._year,4):e+=u(this._year,4),e+="-"+u(this._month,2)+"-"+u(this._day,2),e+="T"+u(this._hours,2)+":"+u(this._minutes,2)+":"+u(this._seconds,2,3);var t=this._timeZoneOffset/60;if(t==0)e+="Z";else{t<0?e+="-":e+="+",t<0&&(t=-t);var n=Math.floor(t/60),r=Math.floor(t%60);e+=u(n,2)+":"+u(r,2)}return e},this.valueOf=function(){return this._time},this._updateTime=function(){if(this._validate()){var e=this._year,t=this._month-1,n=this._day-1,r=this._hours,i=this._minutes,s=this._seconds,o=60,u=o*60,a=u*24,f=t+e*12,l=Math.floor(f),c=f-l,h=s+i*o+r*u+n*a,p=Math.floor(h),d=h-p,v=new Date(0);v.setUTCFullYear(0),v.setUTCMonth(l);if(c!=0){v.setUTCMonth(v.getUTCMonth()+1),v.setUTCDate(0);var m=v.getUTCDate()*c*a,g=Math.floor(m),y=m-g;p+=g,d+=y,d>=1&&(d--,p++),v.setUTCDate(1)}v.setUTCSeconds(p);var b=v.getTime()/1e3+d,w=this._timeZone;this._time=b-w.getOffset(b-w.getStandardOffset()),this._updateProperties()}},this._updateProperties=function(){if(this._validate()){var e=o(this._time),t=o(this._timeZone.getOffset(e)),n=e+t,r=Math.floor(n),i=o(n-r);i>=1&&(i=0,r++);var s=new Date(r*1e3);this._year=s.getUTCFullYear(),this._month=s.getUTCMonth()+1,this._day=s.getUTCDate(),this._weekday=s.getUTCDay(),this._hours=s.getUTCHours(),this._minutes=s.getUTCMinutes(),this._seconds=s.getUTCSeconds()+i,this._time=e,this._timeZoneOffset=t,this._validate()}},this._validate=function(){if(this._isValid){this._year*=1,this._month*=1,this._day*=1,this._weekday*=1,this._hours*=1,this._minutes*=1,this._seconds*=1,this._timeZoneOffset*=1,this._time*=1;var e=this._year+this._month+this._day+this._weekday+this._hours+this._minutes+this._seconds+this._timeZoneOffset+this._time;if(isNaN(e)||e==Infinity||e==-Infinity||!this._timeZone)this._isValid=!1}else this._year*=1,this._time*=1,this._year>-Infinity&&this._year<Infinity?(this._month=1,this._day=1,this._hours=0,this._minutes=0,this._seconds=0,this._isValid=!0):this._time>-Infinity&&this._time<Infinity&&(this._isValid=!0);return this._isValid||(this._year=NaN,this._month=NaN,this._day=NaN,this._weekday=NaN,this._hours=NaN,this._minutes=NaN,this._seconds=NaN,this._timeZoneOffset=NaN,this._time=NaN),this._isValid}})}),define("splunk/viz/GraphicsVizBase",["require","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","splunk/viz/VizBase"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").geom.Point,r=e("jgatt").graphics.Graphics,i=e("jgatt").properties.ObservableProperty,s=e("jgatt").utils.PropertyComparator,o=e("jgatt").validation.ValidatePass,u=e("splunk/viz/VizBase");return t(u,function(e,t){this.renderGraphicsPass=new o("renderGraphics",2,new s("renderGraphicsPriority")),this.x=(new i("x",Number,0)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:0}).setter(function(e){this.setStyle({left:e+"px"})}),this.y=(new i("y",Number,0)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:0}).setter(function(e){this.setStyle({top:e+"px"})}),this.width=(new i("width",Number,0)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:0}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.height=(new i("height",Number,0)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:0}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.renderGraphicsPriority=0,this.graphics=null,this.constructor=function(e){t.constructor.call(this,e),this.addStyleClass("splunk-viz-GraphicsVizBase"),this.setStyle({position:"absolute",left:"0px",top:"0px"}),this.graphics=new r,this.graphics.appendTo(this.element),this.invalidate("renderGraphicsPass")},this.renderGraphics=function(){this.validatePreceding("renderGraphicsPass");if(this.isValid("renderGraphicsPass"))return;var e=this.getInternal("width"),t=this.getInternal("height"),n=this.graphics;n.setSize(e,t),this.renderGraphicsOverride(n,e,t),this.setValid("renderGraphicsPass")},this.localToGlobal=function(e){if(e==null)throw new Error("Parameter point must be non-null.");if(e instanceof n){var t=this.$element.offset();return new n(e.x+t.left,e.y+t.top)}throw new Error("Parameter point must be of type splunk.geom.Point.")},this.globalToLocal=function(e){if(e==null)throw new Error("Parameter point must be non-null.");if(e instanceof n){var t=this.$element.offset();return new n(e.x-t.left,e.y-t.top)}throw new Error("Parameter point must be of type splunk.geom.Point.")},this.renderGraphicsOverride=function(e,t,n){}})}),define("splunk/charting/Histogram",["require","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","splunk/charting/LogScale","splunk/time/DateTime","splunk/viz/GraphicsVizBase"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").events.ChainedEvent,r=e("jgatt").events.EventData,i=e("jgatt").geom.Point,s=e("jgatt").geom.Rectangle,o=e("jgatt").graphics.Graphics,u=e("jgatt").graphics.brushes.DrawingUtils,a=e("jgatt").graphics.brushes.Brush,f=e("jgatt").graphics.brushes.SolidFillBrush,l=e("jgatt").properties.ObservableProperty,c=e("jgatt").properties.Property,h=e("jgatt").utils.ArrayUtils,p=e("jgatt").utils.Comparator,d=e("jgatt").utils.NumberUtils,v=e("jgatt").validation.ValidatePass,m=e("splunk/charting/LogScale"),g=e("splunk/time/DateTime"),y=e("splunk/viz/GraphicsVizBase"),b=t(y,function(e,t){this.processDataPass=new v("processData",.1),this.updateRangeXPass=new v("updateRangeX",.2),this.updateRangeYPass=new v("updateRangeY",.2),this.rangeXChanged=new n("rangeXChanged",this.changed),this.rangeYChanged=new n("rangeYChanged",this.changed),this.containedRangeXChanged=new n("containedRangeXChanged",this.changed),this.containedRangeYChanged=new n("containedRangeYChanged",this.changed),this.data=(new l("data",Array,null)).onChanged(function(e){this.invalidate("processDataPass")}),this.brush=(new l("brush",a,null)).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.minimumX=(new l("minimumX",Number,NaN)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:NaN}).onChanged(function(e){this.invalidate("updateRangeXPass")}),this.maximumX=(new l("maximumX",Number,NaN)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:NaN}).onChanged(function(e){this.invalidate("updateRangeXPass")}),this.minimumY=(new l("minimumY",Number,NaN)).readFilter(function(e){return this.valueToAbsoluteY(e)}).writeFilter(function(e){return e>-Infinity&&e<Infinity?this.absoluteToValueY(e):NaN}).onChanged(function(e){this.invalidate("updateRangeYPass")}),this.maximumY=(new l("maximumY",Number,NaN)).readFilter(function(e){return this.valueToAbsoluteY(e)}).writeFilter(function(e){return e>-Infinity&&e<Infinity?this.absoluteToValueY(e):NaN}).onChanged(function(e){this.invalidate("updateRangeYPass")}),this.scaleY=(new l("scaleY",m,null)).onChanged(function(e){this._cachedScaleY=e.newValue,this.invalidate("processDataPass")}),this.containedMinimumX=(new c("containedMinimumX",Number,null,!0)).onRead(function(){this.validate("updateRangeXPass")}).getter(function(){return this._containedMinimumX}),this.containedMaximumX=(new c("containedMaximumX",Number,null,!0)).onRead(function(){this.validate("updateRangeXPass")}).getter(function(){return this._containedMaximumX}),this.containedMinimumY=(new c("containedMinimumY",Number,null,!0)).onRead(function(){this.validate("updateRangeYPass")}).getter(function(){return this._containedMinimumY}),this.containedMaximumY=(new c("containedMaximumY",Number,null,!0)).onRead(function(){this.validate("updateRangeYPass")}).getter(function(){return this._containedMaximumY}),this.actualMinimumX=(new c("actualMinimumX",Number,null,!0)).onRead(function(){this.validate("updateRangeXPass")}).getter(function(){return this._actualMinimumX}),this.actualMaximumX=(new c("actualMaximumX",Number,null,!0)).onRead(function(){this.validate("updateRangeXPass")}).getter(function(){return this._actualMaximumX}),this.actualMinimumY=(new c("actualMinimumY",Number,null,!0)).onRead(function(){this.validate("updateRangeYPass")}).getter(function(){return this._actualMinimumY}),this.actualMaximumY=(new c("actualMaximumY",Number,null,!0)).onRead(function(){this.validate("updateRangeYPass")}).getter(function(){return this._actualMaximumY}),this._cachedScaleY=null,this._containedMinimumX=0,this._containedMaximumX=0,this._containedMinimumY=0,this._containedMaximumY=100,this._actualMinimumX=0,this._actualMaximumX=0,this._actualMinimumY=0,this._actualMaximumY=100,this._actualRangeX=0,this._actualRangeY=100,this._actualScaleY=null,this._valueDatasX=null,this._valueDatasY=null,this._renderDatas=null,this._sortComparator=null,this._searchComparator=null,this.constructor=function(){t.constructor.call(this),this.addStyleClass("splunk-charting-Histogram");var e=new g;e=e.toUTC(),e.setMinutes(0),e.setSeconds(0),this._containedMinimumX=e.getTime(),this._containedMaximumX=e.getTime()+3600,this._actualMinimumX=this._containedMinimumX,this._actualMaximumX=this._containedMaximumX,this._actualRangeX=this._actualMaximumX-this._actualMinimumX,this._valueDatasX=[],this._valueDatasY=[],this._renderDatas=[],this._sortComparator=new w,this._searchComparator=new E},this.processData=function(){this.validatePreceding("processDataPass");if(this.isValid("processDataPass"))return;this.invalidate("updateRangeXPass"),this.invalidate("updateRangeYPass");var e=this._valueDatasX=[],t=this._valueDatasY=[],n=this._renderDatas=[],r=this.getInternal("data"),i=r?r.length:0;if(i>0){var s,o,u,a,f={value:0,absolute:this.valueToAbsoluteY(0)},l,c;t.push(f);for(c=0;c<i;c++)s=r[c],o={value:s.x1,absolute:this.valueToAbsoluteX(s.x1)},u={value:s.x2,absolute:this.valueToAbsoluteX(s.x2)},a={value:s.y,absolute:this.valueToAbsoluteY(s.y)},o.absolute>-Infinity&&o.absolute<Infinity&&u.absolute>-Infinity&&u.absolute<Infinity&&a.absolute>-Infinity&&a.absolute<Infinity&&(l={valueDataX1:o,valueDataX2:u,valueDataY1:a,valueDataY2:f},l.data={x1:o.value,x2:u.value,y:a.value},l.bounds=null,e.push(o),e.push(u),t.push(a),n.push(l))}this.setValid("processDataPass")},this.updateRangeX=function(){this.validatePreceding("updateRangeXPass");if(this.isValid("updateRangeXPass"))return;this.invalidate("renderGraphicsPass");var e=this._valueDatasX,t=e.length,n,i=Infinity,s=-Infinity,o;for(o=0;o<t;o++)n=e[o],n.absolute<i&&(i=n.absolute),n.absolute>s&&(s=n.absolute);if(i==Infinity){var u=new g;u=u.toUTC(),u.setMinutes(0),u.setSeconds(0),i=u.getTime(),s=u.getTime()+3600}var a=i!=this._containedMinimumX||s!=this._containedMaximumX;this._containedMinimumX=i,this._containedMaximumX=s;var f=this.getInternal("minimumX");isNaN(f)||(i=f);var l=this.getInternal("maximumX");isNaN(l)||(s=l);if(i>s){var c=i;i=s,s=c}var p=s-i;for(o=0;o<t;o++)n=e[o],n.relative=p>0?(n.absolute-i)/p:0;h.sort(this._renderDatas,this._sortComparator);var d=i!=this._actualMinimumX||s!=this._actualMaximumX;this._actualMinimumX=i,this._actualMaximumX=s,this._actualRangeX=p,this.setValid("updateRangeXPass"),a&&this.dispatchEvent("containedRangeXChanged",new r),d&&this.dispatchEvent("rangeXChanged",new r)},this.updateRangeY=function(){this.validatePreceding("updateRangeYPass");if(this.isValid("updateRangeYPass"))return;this.invalidate("renderGraphicsPass");var e=this._valueDatasY,t=e.length,n,i=Infinity,s=-Infinity,o;for(o=0;o<t;o++)n=e[o],n.absolute<i&&(i=n.absolute),n.absolute>s&&(s=n.absolute);if(i==Infinity)i=this.valueToAbsoluteY(0),s=this.valueToAbsoluteY(100);else{var u=50,a=i,f=s,l,c;for(o=0;o<2;o++){l=this._computeAutoUnits(f-a);if(l<=0)break;f-a>=1&&(l=Math.max(Math.round(l),1)),c=1+Math.floor((f-a)/l),l*=Math.ceil(c/u),a=Math.ceil(i/l)*l,a!=i&&(a-=l),f=Math.ceil(s/l)*l}i=a,s=f}var h=i!=this._containedMinimumY||s!=this._containedMaximumY;this._containedMinimumY=i,this._containedMaximumY=s;var p=this.getInternal("minimumY");isNaN(p)||(i=this.valueToAbsoluteY(p));var d=this.getInternal("maximumY");isNaN(d)||(s=this.valueToAbsoluteY(d));if(i>s){var v=i;i=s,s=v}var m=s-i;for(o=0;o<t;o++)n=e[o],n.relative=m>0?(n.absolute-i)/m:0;var g=this._cachedScaleY,y=i!=this._actualMinimumY||s!=this._actualMaximumY||g!=this._actualScaleY;this._actualMinimumY=i,this._actualMaximumY=s,this._actualRangeY=m,this._actualScaleY=g,this.setValid("updateRangeYPass"),h&&this.dispatchEvent("containedRangeYChanged",new r),y&&this.dispatchEvent("rangeYChanged",new r)},this.valueToAbsoluteX=function(e){if(e==null)return NaN;if(e instanceof g)return e.getTime();if(e instanceof Date)return e.getTime()/1e3;if(typeof e=="string"){if(!e)return NaN;var t=Number(e);if(!isNaN(t))return t>-Infinity&&t<Infinity?t:NaN;var n=new g(e);return n.getTime()}return typeof e=="number"?e>-Infinity&&e<Infinity?e:NaN:NaN},this.absoluteToValueX=function(e){return e>-Infinity&&e<Infinity?(new g(e)).toUTC():null},this.absoluteToRelativeX=function(e){return(e-this._actualMinimumX)/this._actualRangeX},this.relativeToAbsoluteX=function(e){return this._actualMinimumX+this._actualRangeX*e},this.valueToAbsoluteY=function(e){var t=this._cachedScaleY;return t?t.valueToScale(d.parseNumber(e)):d.parseNumber(e)},this.absoluteToValueY=function(e){if(e>-Infinity&&e<Infinity){var t=this._cachedScaleY;return t?t.scaleToValue(Number(e)):Number(e)}return NaN},this.absoluteToRelativeY=function(e){return(e-this._actualMinimumY)/this._actualRangeY},this.relativeToAbsoluteY=function(e){return this._actualMinimumY+this._actualRangeY*e},this.getDataUnderPoint=function(e,t){this.validate("renderGraphicsPass");if(t<0||t>this.getInternal("height"))return null;var n=h.binarySearch(this._renderDatas,e/this.getInternal("width"),this._searchComparator);if(n<0)return null;var r=this._renderDatas[n];return{data:r.data,bounds:r.bounds}},this.renderGraphicsOverride=function(e,t,n){var r=this._valueDatasX,o=this._valueDatasY,a=this._renderDatas,l=r.length,c=o.length,h=a.length,p,d,v,m,g,y;for(y=0;y<l;y++)p=r[y],p.pixel=Math.round(t*p.relative);for(y=0;y<c;y++)v=o[y],v.pixel=Math.round(n*(1-v.relative));var b=o.length>0?o[0]:null,w=b?b.pixel:n,E=[new i(0,0),new i(t,0),new i(t,w),new i(0,w)],S=[new i(0,w),new i(t,w),new i(t,n),new i(0,n)],x,T,N,C,k,L,A=this.getInternal("brush");A||(A=new f(0,1)),e.clear();for(y=0;y<h;y++){g=a[y],p=g.valueDataX1,d=g.valueDataX2,v=g.valueDataY1,m=g.valueDataY2;if(Math.max(p.relative,d.relative)<0||Math.min(p.relative,d.relative)>1||Math.max(v.relative,m.relative)<0||Math.min(v.relative,m.relative)>1)continue;T=p.pixel,N=d.pixel,C=v.pixel,k=m.pixel,T<N?T++:N++,T==N&&(p.relative<d.relative?N++:p.relative>d.relative&&N--),C==k&&(v.relative<m.relative?C++:v.relative>m.relative&&C--),T>N&&(L=T,T=N,N=L),g.bounds=new s(T,C,N-T,0),x=C<=k?E:S,A.beginBrush(e,null,x),u.drawRectangle(A,T,C,N-T,k-C),A.endBrush()}},this._computeAutoUnits=function(e){if(e<=0)return 0;var t=e/10,n=0;if(t>0){var r=t.toExponential(20),i=r.indexOf("e");i>=0&&(t=Number(r.substring(0,i)),n=Number(r.substring(i+1,r.length)))}return t=Math.ceil(t),t>5?t=10:t>2&&(t=5),t*Math.pow(10,n)}}),w=t(p,function(e,t){this.compare=function(e,t){var n=e.valueDataX1.relative,r=t.valueDataX1.relative;return n<r?-1:n>r?1:0}}),E=t(p,function(e,t){this.compare=function(e,t){var n=t.valueDataX1.relative,r=t.valueDataX2.relative;return e<n?-1:e>=r?1:0}});return b}),define("splunk/charting/ClickDragRangeMarker",["require","jquery","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","splunk/charting/Histogram","splunk/viz/GraphicsVizBase"],function(e){var t=e("jquery"),n=e("jg_global").jg_extend,r=e("jgatt").events.ChainedEvent,i=e("jgatt").events.Event,s=e("jgatt").events.EventData,o=e("jgatt").geom.Matrix,u=e("jgatt").geom.Point,a=e("jgatt").graphics.Graphics,f=e("jgatt").graphics.brushes.DrawingUtils,l=e("jgatt").graphics.brushes.SolidFillBrush,c=e("jgatt").graphics.brushes.SolidStrokeBrush,h=e("jgatt").motion.PropertyTween,p=e("jgatt").motion.TweenRunner,d=e("jgatt").motion.easers.CubicEaser,v=e("jgatt").motion.easers.EaseDirection,m=e("jgatt").properties.ObservableProperty,g=e("jgatt").properties.Property,y=e("jgatt").utils.FunctionUtils,b=e("jgatt").utils.NumberUtils,w=e("jgatt").utils.StringUtils,E=e("jgatt").validation.ValidatePass,S=e("splunk/charting/Histogram"),x=e("splunk/viz/GraphicsVizBase");return n(x,function(e,n){this.updateRangePass=new E("updateRange",.4),this.rangeChanged=new r("rangeChanged",this.changed),this.dragStart=new i("dragStart",s),this.dragComplete=new i("dragComplete",s),this.foregroundColor=(new m("foregroundColor",Number,0)).writeFilter(function(e){return isNaN(e)?0:Math.min(Math.max(Math.floor(e),0),16777215)}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.histogram=(new m("histogram",S,null)).onChanged(function(e){var t=e.target;(t===this||t instanceof S&&e.event===t.rangeXChanged)&&this.invalidate("updateRangePass")}),this.minimum=(new m("minimum",Number,NaN)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:NaN}).onChanged(function(e){this.invalidate("updateRangePass")}),this.maximum=(new m("maximum",Number,NaN)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:NaN}).onChanged(function(e){this.invalidate("updateRangePass")}),this.minimumSnap=(new m("minimumSnap",Function,null)).onChanged(function(e){this.invalidate("updateRangePass")}),this.maximumSnap=(new m("maximumSnap",Function,null)).onChanged(function(e){this.invalidate("updateRangePass")}),this.minimumFormat=(new m("minimumFormat",Function,null)).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.maximumFormat=(new m("maximumFormat",Function,null)).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.rangeFormat=(new m("rangeFormat",Function,null)).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.actualMinimum=(new g("actualMinimum",Number,null,!0)).onRead(function(){this.validate("updateRangePass")}).getter(function(){return this._actualMinimum}),this.actualMaximum=(new g("actualMaximum",Number,null,!0)).onRead(function(){this.validate("updateRangePass")}).getter(function(){return this._actualMaximum}),this.labelOpacity=(new m("labelOpacity",Number,0)).onChanged(function(e){this._redrawLabelOpacity()}),this._actualMinimum=NaN,this._actualMaximum=NaN,this._relativeMinimum=0,this._relativeMaximum=1,this._fillBrush=null,this._lineBrush=null,this._backgroundBrush=null,this._labelGraphics=null,this._minimumLabel=null,this._maximumLabel=null,this._rangeLabel=null,this._rangeLabelClip=null,this._labelContainer=null,this._moveHotspot=null,this._areLabelsVisible=!1,this._dragMode=null,this._pressMouseX=0,this._pressMinimum=0,this._pressMaximum=1,this.constructor=function(){n.constructor.call(this,'<div tabindex="0"></div>'),this.addStyleClass("splunk-charting-ClickDragRangeMarker"),this.setStyle({outline:"none"}),this._self_mouseOver=y.bind(this._self_mouseOver,this),this._self_mouseOut=y.bind(this._self_mouseOut,this),this._self_mouseMove=y.bind(this._self_mouseMove,this),this._self_mouseDown=y.bind(this._self_mouseDown,this),this._self_keyDown=y.bind(this._self_keyDown,this),this._document_mouseUp=y.bind(this._document_mouseUp,this),this._document_mouseMove=y.bind(this._document_mouseMove,this),this._document_mouseLeave=y.bind(this._document_mouseLeave,this),this._fillBrush=new l(14277081,1),this._lineBrush=new c(this.getInternal("foregroundColor"),.4,1,"square"),this._backgroundBrush=new l(15395562,.66),this._labelGraphics=new a,this._minimumLabel=document.createElement("span"),t(this._minimumLabel).addClass("splunk-charting-label"),t(this._minimumLabel).css({position:"absolute",left:"0px",top:"0px","white-space":"pre"}),this._maximumLabel=document.createElement("span"),t(this._maximumLabel).addClass("splunk-charting-label"),t(this._maximumLabel).css({position:"absolute",left:"0px",top:"0px","white-space":"pre"}),this._rangeLabel=document.createElement("span"),t(this._rangeLabel).addClass("splunk-charting-label"),t(this._rangeLabel).css({position:"absolute",left:"0px",top:"0px","white-space":"pre"}),this._rangeLabelClip=document.createElement("div"),this._rangeLabelClip.appendChild(this._rangeLabel),t(this._rangeLabelClip).css({position:"absolute",left:"0px",top:"0px",margin:"0px",padding:"0px",overflow:"hidden"}),this._labelContainer=document.createElement("div"),this._labelGraphics.appendTo(this._labelContainer),this._labelContainer.appendChild(this._minimumLabel),this._labelContainer.appendChild(this._maximumLabel),this._labelContainer.appendChild(this._rangeLabelClip),t(this._labelContainer).css({position:"absolute",left:"0px",top:"0px",margin:"0px",padding:"0px"}),this._moveHotspot=document.createElement("div"),t(this._moveHotspot).css({position:"absolute",left:"0px",top:"0px",margin:"0px",padding:"0px",cursor:"move",visibility:"hidden"}),this.$element.bind("mouseover",this._self_mouseOver),this.$element.bind("mouseout",this._self_mouseOut),this.$element.bind("mousemove",this._self_mouseMove),this.$element.bind("mousedown",this._self_mouseDown),this.$element.bind("keydown",this._self_keyDown),this.element.appendChild(this._labelContainer),this.element.appendChild(this._moveHotspot)},this.updateRange=function(){this.validatePreceding("updateRangePass");if(this.isValid("updateRangePass"))return;var e=this.getInternal("minimum"),t=this.getInternal("maximum"),n=0,r=1,i=this.getInternal("histogram");if(i){var o=i.get("actualMinimumX"),u=i.get("actualMaximumX"),a=u-o,f=this.getInternal("minimumSnap");f!=null&&!isNaN(e)&&(e=f(e));var l=this.getInternal("maximumSnap");l!=null&&!isNaN(t)&&(t=l(t)),isNaN(e)?e=o:n=a>0?(e-o)/a:0,isNaN(t)?t=u:r=a>0?(t-o)/a:1;var c;e>t&&(c=e,e=t,t=c,c=n,n=r,r=c)}var h=e!=this._actualMinimum||t!=this._actualMaximum,p=n!=this._relativeMinimum||r!=this._relativeMaximum;this._actualMinimum=e,this._actualMaximum=t,this._relativeMinimum=n,this._relativeMaximum=r,(h||p)&&this.invalidate("renderGraphicsPass"),this.setValid("updateRangePass"),h&&this.dispatchEvent("rangeChanged",new s)},this.isDragging=function(){return this._dragMode!=null},this.onAppend=function(){t(document).bind("mousemove",this._document_mouseMove),t(document).bind("mouseleave",this._document_mouseLeave)},this.onRemove=function(){t(document).unbind("mouseup",this._document_mouseUp),t(document).unbind("mousemove",this._document_mouseMove),t(document).unbind("mouseleave",this._document_mouseLeave)},this.renderGraphicsOverride=function(e,n,r){var i=this._actualMinimum,s=this._actualMaximum,o=this._relativeMinimum,u=this._relativeMaximum,a=t(this._minimumLabel),l=t(this._maximumLabel),c=t(this._rangeLabel),h=t(this._rangeLabelClip),p=t(this._moveHotspot),d=this.getInternal("minimumFormat");isNaN(i)?a.html(""):d?a.html(w.escapeHTML(d(i))):a.html(w.escapeHTML(i));var v=this.getInternal("maximumFormat");isNaN(s)?l.html(""):v?l.html(w.escapeHTML(v(s))):l.html(w.escapeHTML(s));var m=this.getInternal("rangeFormat");!m||isNaN(i)||isNaN(s)?c.html(""):c.html(w.escapeHTML(m(i,s)));if(o>u){var g;g=o,o=u,u=g,g=a,a=l,l=g}var y=0,E=Math.round(n*o),S=Math.round(n*u),x=Math.round(n),T=0,N=Math.round(r);E=b.minMax(E,y,x),S=b.minMax(S,y,x);var C={};C.width=Math.round(a.outerWidth(!0)),C.height=20,C.x=E-C.width,C.y=Math.min(N-C.height,0);var k={};k.width=Math.round(l.outerWidth(!0)),k.height=20,k.x=S,k.y=Math.min(N-k.height,0);var L={};L.width=Math.min(Math.round(c.outerWidth(!0)),S-E),L.height=20,L.x=E+Math.round((S-E-L.width)/2),L.y=N,k.x+k.width>x&&(k.x=x-k.width),C.x+C.width>k.x&&(C.x=k.x-C.width),C.x<0&&(C.x=0),k.x<C.x+C.width&&(k.x=C.x+C.width),a.css({left:C.x+"px",top:C.y+Math.round((C.height-a.outerHeight(!0))/2)+"px"}),l.css({left:k.x+"px",top:k.y+Math.round((k.height-l.outerHeight(!0))/2)+"px"}),c.css({top:Math.round((L.height-c.outerHeight(!0))/2)+"px"}),h.css({left:L.x+"px",top:L.y+"px",width:L.width+"px",height:L.height+"px"}),p.css({left:E+"px",top:T+"px",width:S-E+"px",height:N-T+"px",visibility:this._dragMode==="move"||!this._dragMode&&(o>0||u<1)?"":"hidden"}),e.clear();var A=this._backgroundBrush;A.beginBrush(e),f.drawRectangle(A,Math.min(y+1,x),T,Math.max(E-1,0),N),A.endBrush(),A.beginBrush(e),f.drawRectangle(A,Math.min(S+1,x),T,Math.max(x-S-1,0),N),A.endBrush(),e=this._labelGraphics,e.clear(),e.setSize(n+1,r+20);var O=this._lineBrush;O.set("color",this.getInternal("foregroundColor")),O.beginBrush(e),O.moveTo(E,C.y),O.lineTo(E,N+20),O.endBrush(),O.beginBrush(e),O.moveTo(S,k.y),O.lineTo(S,N+20),O.endBrush();var M=this._fillBrush;M.beginBrush(e),f.drawRectangle(M,C.x+1,C.y,C.width-1,C.height),M.endBrush(),M.beginBrush(e),f.drawRectangle(M,k.x+1,k.y,k.width-1,k.height),M.endBrush(),M.beginBrush(e),f.drawRectangle(M,E+1,N,Math.max(S-E-1,0),20),M.endBrush(),this._redrawLabelOpacity()},this._redrawLabelOpacity=function(){var e=this.getInternal(this.labelOpacity);t(this._labelContainer).css({opacity:e+"",filter:"alpha(opacity="+Math.round(e*100)+")",visibility:e>0?"":"hidden"})},this._updateShowLabels=function(e,t){isNaN(this.getInternal("minimum"))&&isNaN(this.getInternal("maximum"))&&(e.x<0||e.x>this.getInternal("width")||e.y<0||e.y>this.getInternal("height"))?this._hideLabels():t!==!1&&this._showLabels()},this._showLabels=function(){if(this._areLabelsVisible)return;this._areLabelsVisible=!0;var e=new h(this,"labelOpacity",null,1,new d(v.OUT));p.start(e,.3)},this._hideLabels=function(){if(!this._areLabelsVisible)return;this._areLabelsVisible=!1;var e=new h(this,"labelOpacity",null,0,new d(v.OUT));p.start(e,.3)},this._beginDrag=function(e,t){if(this._dragMode||!t)return;this._dragMode=t,this._pressMouseX=e.x,this._pressMinimum=this._relativeMinimum,this._pressMaximum=this._relativeMaximum,this._updateDrag(e),this.dispatchEvent("dragStart",new s)},this._endDrag=function(){if(!this._dragMode)return;var e=this._dragMode;this._dragMode=null,this.validate("updateRangePass");switch(e){case"new":case"inside":this._selectOne();break;case"outside":this._selectAll();break;case"select":(this._relativeMinimum==this._relativeMaximum||this._relativeMinimum<=0&&this._relativeMaximum>=1)&&this._selectAll()}this.invalidate("renderGraphicsPass"),this.dispatchEvent("dragComplete",new s)},this._updateDrag=function(e){if(!this._dragMode)return;switch(this._dragMode){case"new":this._updateDragStart(e,"select");break;case"inside":this._updateDragStart(e,"move");break;case"outside":this._updateDragStart(e,"select");break;case"select":this._updateDragSelect(e);break;case"move":this._updateDragMove(e)}},this._updateDragStart=function(e,t){if(Math.abs(e.x-this._pressMouseX)<4)return;this._dragMode=t,this._updateDrag(e)},this._updateDragSelect=function(e){var t=this.getInternal("histogram");if(!t)return;var n=this.getInternal("width");if(n<=0)return;var r=b.minMax(this._pressMouseX,0,n),i=b.minMax(e.x,0,n),s=r/n,o=i/n,u=t.get("actualMinimumX"),a=t.get("actualMaximumX"),f=a-u,l=u+f*s,c=u+f*o;if(l>c){var h=l;l=c,c=h}var p=this.getInternal("minimumSnap");p!=null&&!isNaN(l)&&(l=p(l,!0));var d=this.getInternal("maximumSnap");d!=null&&!isNaN(c)&&(c=d(c,!0)),this.set("minimum",l),this.set("maximum",c)},this._updateDragMove=function(e){var t=this.getInternal("histogram");if(!t)return;var n=this.getInternal("width");if(n<=0)return;var r=(e.x-this._pressMouseX)/n;r=b.minMax(r,-this._pressMinimum,1-this._pressMaximum);var i=this._pressMinimum+r,s=this._pressMaximum+r,o=t.get("actualMinimumX"),u=t.get("actualMaximumX"),a=u-o,f=o+a*i,l=o+a*s;this.set("minimum",f),this.set("maximum",l)},this._selectOne=function(){var e=this.getInternal("histogram");if(!e)return;var t=this.getInternal("width");if(t<=0)return;var n=b.minMax(this._pressMouseX,0,t),r=n/t,i=e.get("actualMinimumX"),s=e.get("actualMaximumX"),o=s-i,u=i+o*r,a=u,f=this.getInternal("minimumSnap");f!=null&&!isNaN(u)&&(u=f(u,!0));var l=this.getInternal("maximumSnap");l!=null&&!isNaN(a)&&(a=l(a,!0)),this.set("minimum",u),this.set("maximum",a),this.validate("updateRangePass")},this._selectAll=function(){this.set("minimum",NaN),this.set("maximum",NaN),this.validate("updateRangePass")},this._self_mouseOver=function(e){if(this._dragMode)return;var t=this.globalToLocal(new u(e.pageX,e.pageY));this._updateShowLabels(t)},this._self_mouseOut=function(e){if(this._dragMode)return;var t=this.globalToLocal(new u(e.pageX,e.pageY));this._updateShowLabels(t)},this._self_mouseMove=function(e){if(this._dragMode)return;var t=this.globalToLocal(new u(e.pageX,e.pageY));this._updateShowLabels(t)},this._self_mouseDown=function(e){var n=this.getInternal("width"),r=this.getInternal("height");if(n<=0||r<=0)return;var i=this.globalToLocal(new u(e.pageX,e.pageY)),s=i.x/n,o=i.y/r;if(s<0||s>1||o<0||o>1)return;this.element.focus(),t(document).bind("mouseup",this._document_mouseUp),this._relativeMinimum<=0&&this._relativeMaximum>=1?this._beginDrag(i,"new"):s>this._relativeMinimum&&s<this._relativeMaximum?this._beginDrag(i,"inside"):this._beginDrag(i,"outside"),e.preventDefault()},this._self_keyDown=function(e){if(this._dragMode)return;e.keyCode==27&&(!isNaN(this.getInternal("minimum"))||!isNaN(this.getInternal("maximum")))&&(this._beginDrag(new u(0,0),"outside"),this._endDrag())},this._document_mouseUp=function(e){var n=this.globalToLocal(new u(e.pageX,e.pageY));t(document).unbind("mouseup",this._document_mouseUp),this._endDrag(),this._updateShowLabels(n,!1)},this._document_mouseMove=function(e){var t=this.globalToLocal(new u(e.pageX,e.pageY));this._dragMode?this._updateDrag(t):this._updateShowLabels(t,!1)},this._document_mouseLeave=function(e){this._dragMode||this._updateShowLabels(new u(-1,-1),!1)}})}),define("splunk/charting/CursorMarker",["require","jquery","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","splunk/charting/Histogram","splunk/viz/GraphicsVizBase"],function(e){var t=e("jquery"),n=e("jg_global").jg_extend,r=e("jgatt").geom.Matrix,i=e("jgatt").graphics.Graphics,s=e("jgatt").graphics.brushes.DrawingUtils,o=e("jgatt").graphics.brushes.SolidFillBrush,u=e("jgatt").graphics.brushes.SolidStrokeBrush,a=e("jgatt").properties.ObservableProperty,f=e("jgatt").utils.StringUtils,l=e("splunk/charting/Histogram"),c=e("splunk/viz/GraphicsVizBase");return n(c,function(e,n){this.foregroundColor=(new a("foregroundColor",Number,0)).writeFilter(function(e){return isNaN(e)?0:Math.min(Math.max(Math.floor(e),0),16777215)}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.histogram=(new a("histogram",l,null)).onChanged(function(e){var t=e.target;(t===this||t instanceof l&&e.event===t.rangeXChanged)&&this.invalidate("renderGraphicsPass")}),this.value=(new a("value",Number,NaN)).writeFilter(function(e){return e>-Infinity&&e<Infinity?e:NaN}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.valueSnap=(new a("valueSnap",Function,null)).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.valueFormat=(new a("valueFormat",Function,null)).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.labelOpacity=(new a("labelOpacity",Number,1)).onChanged(function(e){this._redrawLabelOpacity()}),this._fillBrush=null,this._lineBrush=null,this._backgroundBrush=null,this._labelGraphics=null,this._valueLabel=null,this._labelContainer=null,this.constructor=function(){n.constructor.call(this),this.addStyleClass("splunk-charting-CursorMarker"),this._fillBrush=new o(14277081,1),this._lineBrush=new u(this.getInternal("foregroundColor"),.4,1,"square"),this._backgroundBrush=new o(15395562,.66),this._labelGraphics=new i,this._valueLabel=document.createElement("span"),t(this._valueLabel).addClass("splunk-charting-label"),t(this._valueLabel).css({position:"absolute",left:"0px",top:"0px","white-space":"pre"}),this._labelContainer=document.createElement("div"),this._labelGraphics.appendTo(this._labelContainer),this._labelContainer.appendChild(this._valueLabel),t(this._labelContainer).css({position:"absolute",left:"0px",top:"0px",margin:"0px",padding:"0px"}),this.element.appendChild(this._labelContainer)},this.renderGraphicsOverride=function(e,n,r){var i=this.getInternal("value"),o=i,u=0,a=t(this._valueLabel),l=this.getInternal("histogram");if(l){var c=l.get("actualMinimumX"),h=l.get("actualMaximumX"),p=h-c,d=this.getInternal("valueSnap");d&&!isNaN(i)&&(o=d(i)),isNaN(i)||(u=p>0?(i-c)/p:0)}var v=this.getInternal("valueFormat");isNaN(o)?a.html(""):v?a.html(f.escapeHTML(v(o))):a.html(f.escapeHTML(o));var m=0,g=Math.round(n*Math.min(Math.max(u,0),1)),y=0,b=Math.round(r),w={};w.width=Math.round(a.outerWidth(!0)),w.height=20,w.x=Math.max(g-w.width,0),w.y=Math.min(b-w.height,0),a.css({left:w.x+"px",top:w.y+Math.round((w.height-a.outerHeight(!0))/2)+"px",visibility:u>0&&u<=1?"":"hidden"}),e.clear();if(u>0){var E=this._backgroundBrush;E.beginBrush(e),s.drawRectangle(E,m,y,g-m,b-y),E.endBrush()}var S=this._labelGraphics;S.clear(),S.setSize(n,r);if(u>0&&u<=1){var x=this._lineBrush;x.set("color",this.getInternal("foregroundColor")),x.beginBrush(e),x.moveTo(g,y),x.lineTo(g,b),x.endBrush();var T=this._fillBrush;T.beginBrush(S),s.drawRectangle(T,w.x+1,w.y,w.width-1,w.height),T.endBrush()}this._redrawLabelOpacity()},this._redrawLabelOpacity=function(){var e=this.getInternal(this.labelOpacity);t(this._labelContainer).css({opacity:e+"",filter:"alpha(opacity="+Math.round(e*100)+")",visibility:e>0?"":"hidden"})}})}),define("splunk/charting/NumericAxisLabels",["require","jquery","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","splunk/charting/Histogram","splunk/viz/GraphicsVizBase"],function(e){var t=e("jquery"),n=e("jg_global").jg_extend,r=e("jgatt").events.ChainedEvent,i=e("jgatt").events.EventData,s=e("jgatt").graphics.brushes.SolidStrokeBrush,o=e("jgatt").properties.ArrayProperty,u=e("jgatt").properties.ObservableProperty,a=e("jgatt").properties.Property,f=e("jgatt").utils.StringUtils,l=e("jgatt").validation.ValidatePass,c=e("splunk/charting/Histogram"),h=e("splunk/viz/GraphicsVizBase");return n(h,function(e,n){this.updateLabelsPass=new l("updateLabels",.3),this.labelsChanged=new r("labelsChanged",this.changed),this.placement=(new u("placement",String,"left")).writeFilter(function(e){switch(e){case"left":case"right":return e;default:return"left"}}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.foregroundColor=(new u("foregroundColor",Number,0)).writeFilter(function(e){return isNaN(e)?0:Math.min(Math.max(Math.floor(e),0),16777215)}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.histogram=(new u("histogram",c,null)).onChanged(function(e){var t=e.target;(t===this||t instanceof c&&e.event===t.rangeYChanged)&&this.invalidate("updateLabelsPass")}),this.labelFormat=(new u("labelFormat",Function,null)).onChanged(function(e){this.invalidate("updateLabelsPass")}),this.actualUnit=(new a("actualUnit",Number,null,!0)).onRead(function(){this.validate("updateLabelsPass")}).getter(function(){return this._actualUnit}),this.positions=(new o("positions",Number,null,!0)).onRead(function(){this.validate("updateLabelsPass")}).getter(function(){var e=[],t=this._labelInfos,n;for(var r=0,i=t.length;r<i;r++)n=t[r],n.visible&&e.push(n.relative);return e}),this._actualUnit=0,this._lineBrush=null,this._tickBrush=null,this._labelInfos=null,this.constructor=function(){n.constructor.call(this),this.addStyleClass("splunk-charting-NumericAxisLabels"),this._lineBrush=new s(this.getInternal("foregroundColor"),.2,1,"square"),this._tickBrush=new s(this.getInternal("foregroundColor"),.1,1),this._labelInfos=[]},this.updateLabels=function(){this.validatePreceding("updateLabelsPass");if(this.isValid("updateLabelsPass"))return;this.invalidate("renderGraphicsPass");var e=this.element,n=this.getInternal("labelFormat"),r=this._labelInfos,i=r.length,s=0,o;try{var u=50;this._actualUnit=0;var a=this.getInternal("histogram");if(!a)return;var l=a.get("actualMinimumY"),c=a.get("actualMaximumY");if(l==c)return;var h=a.get("scaleY"),p=h!=null,d=l,v=c;p&&(l=h.scaleToValue(l),c=h.scaleToValue(c));var m=v-d,g=this._computeAutoUnits(m);if(g<=0)return;m>=1&&(g=Math.max(Math.round(g),1));var y=1+Math.floor(m/g);g*=Math.ceil(y/u),this._actualUnit=g;var b=Math.ceil(d/g)*g-g,w=Math.ceil(v/g)*g,E,S,x;for(E=b;E<=w;E+=g)S=p?h.scaleToValue(E):E,x=(E-d)/m,x>0&&x<=1&&(s<i?o=r[s]:(o={},o.label=document.createElement("span"),o.queryLabel=t(o.label),o.queryLabel.addClass("splunk-charting-label"),o.queryLabel.css({position:"absolute",left:"0px",top:"0px","white-space":"pre"}),r.push(o),e.appendChild(o.label)),o.relative=x,n?o.queryLabel.html(f.escapeHTML(n(S))):o.queryLabel.html(f.escapeHTML(S)),s++)}finally{for(var T=r.length-1;T>=s;T--)o=r.pop(),e=o.label.parentNode,e&&e.removeChild(o.label);this.setValid("updateLabelsPass")}},this.renderGraphicsOverride=function(e,t,n){var r=this.getInternal("placement")!="right",s=this._lineBrush,o=this._tickBrush,u=this._labelInfos,a=u.length,f,l,c=0,h=25,p=0,d,v;for(d=0;d<a;d++)f=u[d],f.y=Math.round(n*(1-f.relative)),f.width=Math.round(f.queryLabel.outerWidth(!0)),f.height=Math.round(f.queryLabel.outerHeight(!0)),f.visible=!0,c=Math.max(c,f.width);t=Math.max(c,h),this.setInternal("width",t);for(d=0;d<a;d++)f=u[d],f.x=r?t-f.width:0;for(d=a-1;d>=0;d--){f=u[d];for(v=d-1;v>=0;v--){l=u[v];if(l.y>=f.y+f.height)break;p=Math.max(p,d-v)}}if(p>0){p++;for(d=0;d<a;d++)(a-d-1)%p!=0&&(u[d].visible=!1)}for(d=0;d<a;d++){f=u[d];if(f.y+f.height<=n)break;f.visible=!1}e.clear(),e.setSize(t+(r?1:0),n+1),o.set("color",this.getInternal("foregroundColor"));for(d=0;d<a;d++)f=u[d],f.queryLabel.css({left:f.x+"px",top:f.y+"px",visibility:f.visible?"":"hidden"}),f.visible&&(o.beginBrush(e),r?(o.moveTo(t,f.y),o.lineTo(t-h,f.y)):(o.moveTo(0,f.y),o.lineTo(h,f.y)),o.endBrush());s.set("color",this.getInternal("foregroundColor")),s.beginBrush(e),r?(s.moveTo(t,0),s.lineTo(t,Math.round(n))):(s.moveTo(0,0),s.lineTo(0,Math.round(n))),s.endBrush(),this.dispatchEvent("labelsChanged",new i)},this._computeAutoUnits=function(e){if(e<=0)return 0;var t=e/10,n=0;if(t>0){var r=t.toExponential(20),i=r.indexOf("e");i>=0&&(t=Number(r.substring(0,i)),n=Number(r.substring(i+1,r.length)))}return t=Math.ceil(t),t>5?t=10:t>2&&(t=5),t*Math.pow(10,n)}})}),define("splunk/charting/GridLines",["require","jg_global","jgatt","jgatt","splunk/charting/NumericAxisLabels","splunk/viz/GraphicsVizBase"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").graphics.brushes.SolidStrokeBrush,r=e("jgatt").properties.ObservableProperty,i=e("splunk/charting/NumericAxisLabels"),s=e("splunk/viz/GraphicsVizBase");return t(s,function(e,t){this.foregroundColor=(new r("foregroundColor",Number,0)).writeFilter(function(e){return isNaN(e)?0:Math.min(Math.max(Math.floor(e),0),16777215)}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.axisLabels=(new r("axisLabels",i,null)).onChanged(function(e){var t=e.target;(t===this||t instanceof i&&e.event===t.labelsChanged)&&this.invalidate("renderGraphicsPass")}),this._lineBrush=null,this.constructor=function(){t.constructor.call(this),this.addStyleClass("splunk-charting-GridLines"),this._lineBrush=new n(this.getInternal("foregroundColor"),.1,1)},this.renderGraphicsOverride=function(e,t,n){e.clear();var r=this.getInternal("axisLabels");if(!r)return;var i=this._lineBrush;i.set("color",this.getInternal("foregroundColor"));var s=r.get("positions"),o=s.length,u,a;for(var f=0;f<o;f++)u=s[f],a=Math.round(n*(1-u)),i.beginBrush(e),i.moveTo(0,a),i.lineTo(t,a),i.endBrush()}})}),define("splunk/time/Duration",["require","jg_global"],function(e){var t=e("jg_global").jg_extend;return t(Object,function(e,t){var n=/P(?:(\-?\d+(?:\.\d+)?)Y)?(?:(\-?\d+(?:\.\d+)?)M)?(?:(\-?\d+(?:\.\d+)?)D)?(?:T(?:(\-?\d+(?:\.\d+)?)H)?(?:(\-?\d+(?:\.\d+)?)M)?(?:(\-?\d+(?:\.\d+)?)S)?)?/;this.years=0,this.months=0,this.days=0,this.hours=0,this.minutes=0,this.seconds=0,this.constructor=function(e,t,r,i,s,o){if(arguments.length==1&&typeof e=="string"){var u=n.exec(e),a=u?u.length:0,f;f=a>1?u[1]:null,this.years=f?Number(f):0,f=a>2?u[2]:null,this.months=f?Number(f):0,f=a>3?u[3]:null,this.days=f?Number(f):0,f=a>4?u[4]:null,this.hours=f?Number(f):0,f=a>5?u[5]:null,this.minutes=f?Number(f):0,f=a>6?u[6]:null,this.seconds=f?Number(f):0}else this.years=typeof e=="number"?e:0,this.months=t!==undefined?t:0,this.days=r!==undefined?r:0,this.hours=i!==undefined?i:0,this.minutes=s!==undefined?s:0,this.seconds=o!==undefined?o:0},this.clone=function(){return new e(this.years,this.months,this.days,this.hours,this.minutes,this.seconds)},this.equals=function(e){return this.years==e.years&&this.months==e.months&&this.days==e.days&&this.hours==e.hours&&this.minutes==e.minutes&&this.seconds==e.seconds},this.toString=function(){var e="";return e+="P"+this.years+"Y"+this.months+"M"+this.days+"D",e+="T"+this.hours+"H"+this.minutes+"M"+this.seconds+"S",e}})}),define("splunk/time/TimeUtils",["require","jg_global","splunk/time/DateTime","splunk/time/Duration","splunk/time/SimpleTimeZone","splunk/time/TimeZones"],function(e){var t=e("jg_global").jg_static,n=e("splunk/time/DateTime"),r=e("splunk/time/Duration"),i=e("splunk/time/SimpleTimeZone"),s=e("splunk/time/TimeZones");return t(function(e){e.EPOCH=(new n(0)).toUTC(),e.daysInMonth=function(e){return e=new n(e.getYear(),e.getMonth()+1,0,0,0,0,s.UTC),e.getDay()},e.addDurations=function(e,t){return new r(e.years+t.years,e.months+t.months,e.days+t.days,e.hours+t.hours,e.minutes+t.minutes,e.seconds+t.seconds)},e.addDateDuration=function(e,t){return t.years==0&&t.months==0&&t.days==0?e=e.clone():e=new n(e.getYear()+t.years,e.getMonth()+t.months,e.getDay()+t.days,e.getHours(),e.getMinutes(),e.getSeconds(),e.getTimeZone()),e.setTime(e.getTime()+(t.hours*3600+t.minutes*60+t.seconds)),e},e.subtractDates=function(e,t){t=t.toTimeZone(e.getTimeZone());var i=e.getTime()<t.getTime();if(i){var o=e;e=t,t=o}var u=e.getTimeZoneOffset()==t.getTimeZoneOffset(),a,f,l,c,h,d,v;if(u)v=e;else if(e.getYear()==t.getYear()&&e.getMonth()==t.getMonth()&&e.getDay()==t.getDay())v=t;else{v=new n(e.getYear(),e.getMonth(),e.getDay(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getTimeZone());if(v.getTime()>e.getTime()){v=new n(e.getYear(),e.getMonth(),e.getDay()-1,t.getHours(),t.getMinutes(),t.getSeconds(),t.getTimeZone());if(v.getTime()<t.getTime()||v.getYear()==t.getYear()&&v.getMonth()==t.getMonth()&&v.getDay()==t.getDay())v=t}}a=v.getYear()-t.getYear(),f=v.getMonth()-t.getMonth(),l=v.getDay()-t.getDay();if(u)c=v.getHours()-t.getHours(),h=v.getMinutes()-t.getMinutes(),d=v.getSeconds()-t.getSeconds(),d<0&&(d+=60,h--),h<0&&(h+=60,c--),c<0&&(c+=24,l--),d=p(d);else{d=e.getTime()-v.getTime();var m=Math.floor(d),g=p(d-m);g>=1&&(g=0,m++),h=Math.floor(m/60),d=m%60+g,c=Math.floor(h/60),h%=60}return l<0&&(v=new n(t.getYear(),t.getMonth()+1,0,0,0,0,s.UTC),l+=v.getDay(),f--),f<0&&(f+=12,a--),i&&(a=-a,f=-f,l=-l,c=-c,h=-h,d=-d),new r(a,f,l,c,h,d)},e.subtractDurations=function(e,t){return new r(e.years-t.years,e.months-t.months,e.days-t.days,e.hours-t.hours,e.minutes-t.minutes,e.seconds-t.seconds)},e.subtractDateDuration=function(e,t){return t.years==0&&t.months==0&&t.days==0?e=e.clone():e=new n(e.getYear()-t.years,e.getMonth()-t.months,e.getDay()-t.days,e.getHours(),e.getMinutes(),e.getSeconds(),e.getTimeZone()),e.setTime(e.getTime()-(t.hours*3600+t.minutes*60+t.seconds)),e},e.multiplyDuration=function(e,t){return new r(e.years*t,e.months*t,e.days*t,e.hours*t,e.minutes*t,e.seconds*t)},e.divideDuration=function(e,t){return new r(e.years/t,e.months/t,e.days/t,e.hours/t,e.minutes/t,e.seconds/t)},e.ceilDate=function(e,n){var r=e.toTimeZone(new i(e.getTimeZoneOffset()));return t(r,n),c(r,e.getTimeZone())},e.ceilDuration=function(t,n,i){i||(i=e.EPOCH);var s=e.addDateDuration(i,t),u=s.getTime()<i.getTime();return t=u?e.subtractDates(i,s):e.subtractDates(s,i),n||(n=new r,t.years>0?n.years=1:t.months>0?n.months=1:t.days>0?n.days=1:t.hours>0?n.hours=1:t.minutes>0?n.minutes=1:t.seconds>0&&(n.seconds=1)),u?(a(t,n,s),e.multiplyDuration(t,-1)):(o(t,n,i),t)},e.floorDate=function(e,t){var n=e.toTimeZone(new i(e.getTimeZoneOffset()));return u(n,t),c(n,e.getTimeZone())},e.floorDuration=function(t,n,i){i||(i=e.EPOCH);var s=e.addDateDuration(i,t),u=s.getTime()<i.getTime();return t=u?e.subtractDates(i,s):e.subtractDates(s,i),n||(n=new r,t.years>0?n.years=1:t.months>0?n.months=1:t.days>0?n.days=1:t.hours>0?n.hours=1:t.minutes>0?n.minutes=1:t.seconds>0&&(n.seconds=1)),u?(o(t,n,s),e.multiplyDuration(t,-1)):(a(t,n,i),t)},e.roundDate=function(e,t){var n=e.toTimeZone(new i(e.getTimeZoneOffset()));return f(n,t),c(n,e.getTimeZone())},e.roundDuration=function(t,n,i){i||(i=e.EPOCH);var s=e.addDateDuration(i,t),o=s.getTime()<i.getTime();return t=o?e.subtractDates(i,s):e.subtractDates(s,i),n||(n=new r,t.years>0?n.years=1:t.months>0?n.months=1:t.days>0?n.days=1:t.hours>0?n.hours=1:t.minutes>0?n.minutes=1:t.seconds>0&&(n.seconds=1)),o?(l(t,n,s),e.multiplyDuration(t,-1)):(l(t,n,i),t)},e.normalizeDuration=function(t,n){n||(n=e.EPOCH);var r=e.addDateDuration(n,t);return e.subtractDates(r,n)},e.durationToSeconds=function(t,n){n||(n=e.EPOCH);var r=e.addDateDuration(n,t);return p(r.getTime()-n.getTime())},e.secondsToDuration=function(t,r){r||(r=e.EPOCH);var i=(new n(r.getTime()+t)).toTimeZone(r.getTimeZone());return e.subtractDates(i,r)};var t=function(t,n){var r=n.years>0,i=r||n.months>0,s=i||n.days>0,o=s||n.hours>0,u=o||n.minutes>0,a=u||n.seconds>0;if(!a)return;t.getSeconds()>0&&(n.seconds>0?t.setSeconds(Math.min(Math.ceil(t.getSeconds()/n.seconds)*n.seconds,60)):t.setSeconds(60));if(!u)return;t.getMinutes()>0&&(n.minutes>0?t.setMinutes(Math.min(Math.ceil(t.getMinutes()/n.minutes)*n.minutes,60)):t.setMinutes(60));if(!o)return;t.getHours()>0&&(n.hours>0?t.setHours(Math.min(Math.ceil(t.getHours()/n.hours)*n.hours,24)):t.setHours(24));if(!s)return;if(t.getDay()>1){var f=e.daysInMonth(t);n.days>0?t.setDay(Math.min(Math.ceil((t.getDay()-1)/n.days)*n.days,f)+1):t.setDay(f+1)}if(!i)return;t.getMonth()>1&&(n.months>0?t.setMonth(Math.min(Math.ceil((t.getMonth()-1)/n.months)*n.months,12)+1):t.setMonth(13));if(!r)return;n.years>0&&t.setYear(Math.ceil(t.getYear()/n.years)*n.years)},o=function(t,n,r){var i=n.years>0,s=i||n.months>0,o=s||n.days>0,u=o||n.hours>0,a=u||n.minutes>0,f=a||n.seconds>0,l=e.daysInMonth(r);if(!f)return;t.seconds>0&&(n.seconds>0?t.seconds=Math.min(Math.ceil(t.seconds/n.seconds)*n.seconds,60):t.seconds=60,h(t,l));if(!a)return;t.minutes>0&&(n.minutes>0?t.minutes=Math.min(Math.ceil(t.minutes/n.minutes)*n.minutes,60):t.minutes=60,h(t,l));if(!u)return;t.hours>0&&(n.hours>0?t.hours=Math.min(Math.ceil(t.hours/n.hours)*n.hours,24):t.hours=24,h(t,l));if(!o)return;t.days>0&&(n.days>0?t.days=Math.min(Math.ceil(t.days/n.days)*n.days,l):t.days=l,h(t,l));if(!s)return;t.months>0&&(n.months>0?t.months=Math.min(Math.ceil(t.months/n.months)*n.months,12):t.months=12,h(t,l));if(!i)return;n.years>0&&(t.years=Math.ceil(t.years/n.years)*n.years,h(t,l))},u=function(e,t){var n=t.years>0,r=n||t.months>0,i=r||t.days>0,s=i||t.hours>0,o=s||t.minutes>0,u=o||t.seconds>0;if(!u)return;e.getSeconds()>0&&(t.seconds>0?e.setSeconds(Math.floor(e.getSeconds()/t.seconds)*t.seconds):e.setSeconds(0));if(!o)return;e.getMinutes()>0&&(t.minutes>0?e.setMinutes(Math.floor(e.getMinutes()/t.minutes)*t.minutes):e.setMinutes(0));if(!s)return;e.getHours()>0&&(t.hours>0?e.setHours(Math.floor(e.getHours()/t.hours)*t.hours):e.setHours(0));if(!i)return;e.getDay()>1&&(t.days>0?e.setDay(Math.floor((e.getDay()-1)/t.days)*t.days+1):e.setDay(1));if(!r)return;e.getMonth()>1&&(t.months>0?e.setMonth(Math.floor((e.getMonth()-1)/t.months)*t.months+1):e.setMonth(1));if(!n)return;t.years>0&&e.setYear(Math.floor(e.getYear()/t.years)*t.years)},a=function(t,n,r){var i=n.years>0,s=i||n.months>0,o=s||n.days>0,u=o||n.hours>0,a=u||n.minutes>0,f=a||n.seconds>0,l=e.daysInMonth(r);if(!f)return;t.seconds>0&&(n.seconds>0?t.seconds=Math.floor(t.seconds/n.seconds)*n.seconds:t.seconds=0,h(t,l));if(!a)return;t.minutes>0&&(n.minutes>0?t.minutes=Math.floor(t.minutes/n.minutes)*n.minutes:t.minutes=0,h(t,l));if(!u)return;t.hours>0&&(n.hours>0?t.hours=Math.floor(t.hours/n.hours)*n.hours:t.hours=0,h(t,l));if(!o)return;t.days>0&&(n.days>0?t.days=Math.floor(t.days/n.days)*n.days:t.days=0,h(t,l));if(!s)return;t.months>0&&(n.months>0?t.months=Math.floor(t.months/n.months)*n.months:t.months=0,h(t,l));if(!i)return;n.years>0&&(t.years=Math.floor(t.years/n.years)*n.years,h(t,l))},f=function(t,n){var r=n.years>0,i=r||n.months>0,s=i||n.days>0,o=s||n.hours>0,u=o||n.minutes>0,a=u||n.seconds>0;if(!a)return;t.getSeconds()>0&&(n.seconds>0?t.setSeconds(Math.min(Math.round(t.getSeconds()/n.seconds)*n.seconds,60)):t.getSeconds()>=30?t.setSeconds(60):t.setSeconds(0));if(!u)return;t.getMinutes()>0&&(n.minutes>0?t.setMinutes(Math.min(Math.round(t.getMinutes()/n.minutes)*n.minutes,60)):t.getMinutes()>=30?t.setMinutes(60):t.setMinutes(0));if(!o)return;t.getHours()>0&&(n.hours>0?t.setHours(Math.min(Math.round(t.getHours()/n.hours)*n.hours,24)):t.getHours()>=12?t.setHours(24):t.setHours(0));if(!s)return;if(t.getDay()>1){var f=e.daysInMonth(t);n.days>0?t.setDay(Math.min(Math.round((t.getDay()-1)/n.days)*n.days,f)+1):t.getDay()>=Math.floor(f/2+1)?t.setDay(f+1):t.setDay(1)}if(!i)return;t.getMonth()>1&&(n.months>0?t.setMonth(Math.min(Math.round((t.getMonth()-1)/n.months)*n.months,12)+1):t.getMonth()>=7?t.setMonth(13):t.setMonth(1));if(!r)return;n.years>0&&t.setYear(Math.round(t.getYear()/n.years)*n.years)},l=function(t,n,r){var i=n.years>0,s=i||n.months>0,o=s||n.days>0,u=o||n.hours>0,a=u||n.minutes>0,f=a||n.seconds>0,l=e.daysInMonth(r);if(!f)return;t.seconds>0&&(n.seconds>0?t.seconds=Math.min(Math.round(t.seconds/n.seconds)*n.seconds,60):t.seconds>=30?t.seconds=60:t.seconds=0,h(t,l));if(!a)return;t.minutes>0&&(n.minutes>0?t.minutes=Math.min(Math.round(t.minutes/n.minutes)*n.minutes,60):t.minutes>=30?t.minutes=60:t.minutes=0,h(t,l));if(!u)return;t.hours>0&&(n.hours>0?t.hours=Math.min(Math.round(t.hours/n.hours)*n.hours,24):t.hours>=12?t.hours=24:t.hours=0,h(t,l));if(!o)return;t.days>0&&(n.days>0?t.days=Math.min(Math.round(t.days/n.days)*n.days,l):t.days>=Math.floor(l/2)?t.days=l:t.days=0,h(t,l));if(!s)return;t.months>0&&(n.months>0?t.months=Math.min(Math.round(t.months/n.months)*n.months,12):t.months>=6?t.months=12:t.months=0,h(t,l));if(!i)return;n.years>0&&(t.years=Math.round(t.years/n.years)*n.years,h(t,l))},c=function(e,t){var n=e.toTimeZone(t);if(n.getYear()==e.getYear()&&n.getMonth()==e.getMonth()&&n.getDay()==e.getDay()&&n.getHours()==e.getHours()&&n.getMinutes()==e.getMinutes()&&n.getSeconds()==e.getSeconds())return n;var r=e.clone();return r.setTimeZone(t),r.getYear()==e.getYear()&&r.getMonth()==e.getMonth()&&r.getDay()==e.getDay()&&r.getHours()==e.getHours()&&r.getMinutes()==e.getMinutes()&&r.getSeconds()==e.getSeconds()?r:n},h=function(e,t){var n=e.years,r=Math.floor(n),i=n-r,s=e.months+i*12,o=Math.floor(s),u=s-o,a=e.days+u*t,f=Math.floor(a),l=a-f,c=e.hours+l*24,h=Math.floor(c),d=c-h,v=e.minutes+d*60,m=Math.floor(v),g=v-m,y=e.seconds+g*60,b=Math.floor(y),w=p(y-b);w>=1&&(w=0,b++),m+=Math.floor(b/60),b%=60,h+=Math.floor(m/60),m%=60,f+=Math.floor(h/24),h%=24,o+=Math.floor(f/t),f%=t,r+=Math.floor(o/12),o%=12,e.years=r,e.months=o,e.days=f,e.hours=h,e.minutes=m,e.seconds=b+w},p=function(e){return Number(e.toFixed(6))}})}),define("splunk/charting/TimeAxisLabels",["require","jquery","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","splunk/charting/Histogram","splunk/time/DateTime","splunk/time/Duration","splunk/time/TimeUtils","splunk/time/TimeZone","splunk/time/TimeZones","splunk/viz/GraphicsVizBase"],function(e){var t=e("jquery"),n=e("jg_global").jg_extend,r=e("jgatt").events.ChainedEvent,i=e("jgatt").events.EventData,s=e("jgatt").graphics.brushes.SolidStrokeBrush,o=e("jgatt").properties.ArrayProperty,u=e("jgatt").properties.ObservableProperty,a=e("jgatt").properties.Property,f=e("jgatt").utils.StringUtils,l=e("jgatt").validation.ValidatePass,c=e("splunk/charting/Histogram"),h=e("splunk/time/DateTime"),p=e("splunk/time/Duration"),d=e("splunk/time/TimeUtils"),v=e("splunk/time/TimeZone"),m=e("splunk/time/TimeZones"),g=e("splunk/viz/GraphicsVizBase");return n(g,function(e,n){this.updateLabelsPass=new l("updateLabels",.3),this.labelsChanged=new r("labelsChanged",this.changed),this.foregroundColor=(new u("foregroundColor",Number,0)).writeFilter(function(e){return isNaN(e)?0:Math.min(Math.max(Math.floor(e),0),16777215)}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.histogram=(new u("histogram",c,null)).onChanged(function(e){var t=e.target;(t===this||t instanceof c&&e.event===t.rangeXChanged)&&this.invalidate("updateLabelsPass")}),this.timeZone=(new u("timeZone",v,m.LOCAL)).onChanged(function(e){this.invalidate("updateLabelsPass")}),this.labelFormat=(new u("labelFormat",Function,null)).onChanged(function(e){this.invalidate("updateLabelsPass")}),this.actualUnit=(new a("actualUnit",p,null,!0)).onRead(function(){this.validate("updateLabelsPass")}).getter(function(){return this._actualUnit.clone()}),this.positions=(new o("positions",Number,null,!0)).onRead(function(){this.validate("updateLabelsPass")}).getter(function(){var e=[],t=this._labelInfos,n;for(var r=0,i=t.length;r<i;r++)n=t[r],n.visible&&e.push(n.relative);return e}),this._actualUnit=null,this._lineBrush=null,this._labelInfos=null,this.constructor=function(){n.constructor.call(this),this.addStyleClass("splunk-charting-TimeAxisLabels"),this._actualUnit=new p,this._lineBrush=new s(this.getInternal("foregroundColor"),.2,1,"square"),this._labelInfos=[]},this.updateLabels=function(){this.validatePreceding("updateLabelsPass");if(this.isValid("updateLabelsPass"))return;this.invalidate("renderGraphicsPass");var e=this.element,n=this.getInternal("labelFormat"),r=this._labelInfos,i=r.length,s=0,o;try{var u=50;this._actualUnit=new p;var a=this.getInternal("histogram");if(!a)return;var l=a.get("actualMinimumX"),c=a.get("actualMaximumX"),v=c-l;if(v==0)return;var m=this.getInternal("timeZone"),g=new h(l),y=new h(c);g=g.toTimeZone(m),y=y.toTimeZone(m);var b=this._computeAutoUnits(d.subtractDates(y,g)),w=d.durationToSeconds(b,g);if(w<=0)return;var E=1+Math.floor((c-l)/w);b=d.multiplyDuration(b,Math.ceil(E/u)),this._actualUnit=b,g=d.subtractDateDuration(d.ceilDate(g,b),b),y=d.ceilDate(y,b);var S,x,T=1;for(S=g;S.getTime()<=y.getTime();T++)x=(S.getTime()-l)/v,x>=0&&x<1&&(s<i?o=r[s]:(o={},o.label=document.createElement("span"),o.queryLabel=t(o.label),o.queryLabel.addClass("splunk-charting-label"),o.queryLabel.css({position:"absolute",left:"0px",top:"0px","white-space":"pre"}),r.push(o),e.appendChild(o.label)),o.relative=x,n?o.queryLabel.html(f.escapeHTML(n(S))):o.queryLabel.html(f.escapeHTML(S)),s++),S=d.addDateDuration(g,d.multiplyDuration(b,T))}finally{for(var N=r.length-1;N>=s;N--)o=r.pop(),e=o.label.parentNode,e&&e.removeChild(o.label);this.setValid("updateLabelsPass")}},this.renderGraphicsOverride=function(e,t,n){var r=this._lineBrush,s=this._labelInfos,o=s.length,u,a,f=0,l=25,c=0,h,p;for(h=0;h<o;h++)u=s[h],u.x=Math.round(t*u.relative),u.y=0,u.width=Math.round(u.queryLabel.outerWidth(!0)),u.height=Math.round(u.queryLabel.outerHeight(!0)),u.visible=!0,f=Math.max(f,u.height);n=Math.max(f,l),this.setInternal("height",n);for(h=0;h<o;h++){u=s[h];for(p=h+1;p<o;p++){a=s[p];if(a.x>=u.x+u.width)break;c=Math.max(c,p-h)}}if(c>0){c++;for(h=0;h<o;h++)h%c!=0&&(s[h].visible=!1)}for(h=o-1;h>=0;h--){u=s[h];if(u.x+u.width<=t)break;u.visible=!1}e.clear(),e.setSize(t+1,n),r.set("color",this.getInternal("foregroundColor"));for(h=0;h<o;h++)u=s[h],u.queryLabel.css({left:u.x+"px",top:u.y+"px",visibility:u.visible?"":"hidden"}),u.visible&&(r.beginBrush(e),r.moveTo(u.x,0),r.lineTo(u.x,l),r.endBrush());r.beginBrush(e),r.moveTo(0,0),r.lineTo(Math.round(t),0),r.endBrush(),this.dispatchEvent("labelsChanged",new i)},this._computeAutoUnits=function(e){if(d.durationToSeconds(e)<=0)return new p;var t=new h(e.years,e.months+1,e.days+1,e.hours,e.minutes,e.seconds,m.UTC);e=new p(t.getYear(),t.getMonth()-1,t.getDay()-1,t.getHours(),t.getMinutes(),t.getSeconds());var n,r,i,s,o;return n=e.years,n>2?(r=n/10,i=0,r>0&&(s=r.toExponential(20),o=s.indexOf("e"),o>=0&&(r=Number(s.substring(0,o)),i=Number(s.substring(o+1,s.length)))),r=Math.ceil(r),r>5?r=10:r>2&&(r=5),new p(Math.ceil(r*Math.pow(10,i)))):(n=e.months+n*12,n>2?n>18?new p(0,4):n>12?new p(0,3):n>6?new p(0,2):new p(0,1):(n=e.days+n*30,n>2?n>49?new p(0,0,14):n>28?new p(0,0,7):n>14?new p(0,0,4):n>7?new p(0,0,2):new p(0,0,1):(n=e.hours+n*24,n>2?n>36?new p(0,0,0,12):n>24?new p(0,0,0,6):n>12?new p(0,0,0,4):n>6?new p(0,0,0,2):new p(0,0,0,1):(n=e.minutes+n*60,n>2?n>105?new p(0,0,0,0,30):n>70?new p(0,0,0,0,15):n>35?new p(0,0,0,0,10):n>14?new p(0,0,0,0,5):n>7?new p(0,0,0,0,2):new p(0,0,0,0,1):(n=e.seconds+n*60,n>2?n>105?new p(0,0,0,0,0,30):n>70?new p(0,0,0,0,0,15):n>35?new p(0,0,0,0,0,10):n>14?new p(0,0,0,0,0,5):n>7?new p(0,0,0,0,0,2):new p(0,0,0,0,0,1):(r=n/10,i=0,r>0&&(s=r.toExponential(20),o=s.indexOf("e"),o>=0&&(r=Number(s.substring(0,o)),i=Number(s.substring(o+1,s.length)))),r=Math.ceil(r),r>5?r=10:r>2&&(r=5),new p(0,0,0,0,0,r*Math.pow(10,i))))))))}})}),define("splunk/charting/Tooltip",["require","jquery","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","splunk/viz/GraphicsVizBase"],function(e){var t=e("jquery"),n=e("jg_global").jg_extend,r=e("jgatt").geom.Matrix,i=e("jgatt").geom.Point,s=e("jgatt").geom.Rectangle,o=e("jgatt").graphics.brushes.SolidFillBrush,u=e("jgatt").properties.ObservableProperty,a=e("jgatt").utils.NumberUtils,f=e("jgatt").utils.StringUtils,l=e("splunk/viz/GraphicsVizBase");return n(l,function(e,n){this.value=(new u("value",String,null)).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.viewBounds=(new u("viewBounds",s,new s)).readFilter(function(e){return e.clone()}).writeFilter(function(e){return e?(e=e.clone(),e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height)):e=new s,e}).changedComparator(function(e,t){return!e.equals(t)}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this.targetBounds=(new u("targetBounds",s,new s)).readFilter(function(e){return e.clone()}).writeFilter(function(e){return e?(e=e.clone(),e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height)):e=new s,e}).changedComparator(function(e,t){return!e.equals(t)}).onChanged(function(e){this.invalidate("renderGraphicsPass")}),this._backgroundBrush=null,this._valueLabel=null,this._isShowing=!0,this.constructor=function(){n.constructor.call(this),this.addStyleClass("splunk-charting-Tooltip"),this._backgroundBrush=new o(4473924,1),this._valueLabel=document.createElement("span"),t(this._valueLabel).addClass("splunk-charting-label"),t(this._valueLabel).css({position:"absolute",left:"0px",top:"0px","white-space":"pre"}),this.element.appendChild(this._valueLabel),this.hide()},this.show=function(){if(this._isShowing)return;this._isShowing=!0,this.validate("renderGraphicsPass"),this.setStyle({visibility:""})},this.hide=function(){if(!this._isShowing)return;this._isShowing=!1,this.setStyle({visibility:"hidden"})},this.renderGraphicsOverride=function(e,n,r){var s=t(this._valueLabel),o=this.getInternal("value");o?s.html(f.escapeHTML(o)):s.html("");var u=s.outerWidth(!0),l=s.outerHeight(!0),c=7,h=7,p=this.getInternal("viewBounds"),d=p.width,v=p.height,m=p.x,g=m+d,y=p.y,b=y+v,w=this.getInternal("targetBounds"),E=w.width,S=w.height,x=w.x,T=x+E,N=w.y,C=N+S,k=10,L=10,A=10,O=10,M=k+L,_=A+O,D=M>0?a.minMax((d-u)/M,0,1):0,P=_>0?a.minMax((v-l)/_,0,1):0,H=.5,B=.5,j;(x+T)/2>(m+g)/2?j="left":j="right";var F,I;j=="left"?(A*=P,O*=P,F=new i(x,N*(1-B)+C*B),F.x=a.minMax(F.x,m+k+u+c,T),F.x=a.minMax(F.x,m+u+c,g),F.y=a.maxMin(F.y,b,y),I=new i(u+c,l*B),I.y=a.minMax(I.y,l-Math.max(b-O-F.y,0),Math.max(F.y-y-A,0))):(A*=P,O*=P,F=new i(T,N*(1-B)+C*B),F.x=a.maxMin(F.x,g-L-u-c,x),F.x=a.maxMin(F.x,g-u-c,m),F.y=a.maxMin(F.y,b,y),I=new i(0,l*B),I.y=a.minMax(I.y,l-Math.max(b-O-F.y,0),Math.max(F.y-y-A,0))),F.x=Math.round(F.x),F.y=Math.round(F.y),I.x=Math.round(I.x),I.y=Math.round(I.y),F=this.globalToLocal(F),this.set("x",this.get("x")+(F.x-I.x)),this.set("y",this.get("y")+(F.y-I.y)),e.clear(),e.setSize(u+c,l);var q=this._backgroundBrush,R,U,z,W;j=="left"?(R=new i(0,0),U=new i(u,0),z=new i(u,l),W=new i(0,l),q.beginBrush(e,null,[R,U,z,W]),q.moveTo(R.x,R.y),q.lineTo(U.x,U.y),q.lineTo(U.x,a.maxMin(I.y-h,z.y-h,U.y)),q.lineTo(I.x,I.y),q.lineTo(U.x,a.minMax(I.y+h,U.y+h,z.y)),q.lineTo(z.x,z.y),q.lineTo(W.x,W.y),q.lineTo(R.x,R.y),q.endBrush()):(R=new i(c,0),U=new i(c+u,0),z=new i(c+u,l),W=new i(c,l),q.beginBrush(e,null,[R,U,z,W]),q.moveTo(R.x,R.y),q.lineTo(U.x,U.y),q.lineTo(z.x,z.y),q.lineTo(W.x,W.y),q.lineTo(W.x,a.minMax(I.y+h,R.y+h,W.y)),q.lineTo(I.x,I.y),q.lineTo(W.x,a.maxMin(I.y-h,W.y-h,R.y)),q.lineTo(R.x,R.y),q.endBrush()),s.css({left:R.x+"px"})}})}),define("splunk/time/SplunkTimeZone",["require","jg_global","jgatt","splunk/time/TimeZone"],function(e){var t=e("jg_global").jg_extend,n=e("jgatt").utils.ArrayUtils,r=e("splunk/time/TimeZone");return t(r,function(e,t){this._standardOffset=0,this._serializedTimeZone=null,this._isConstant=!1,this._offsetList=null,this._timeList=null,this._indexList=null,this.constructor=function(e){if(e==null)throw new Error("Parameter serializedTimeZone must be non-null.");if(typeof e!="string")throw new Error("Parameter serializedTimeZone must be a string.");this._serializedTimeZone=e,this._offsetList=[],this._timeList=[],this._indexList=[],this._parseSerializedTimeZone(e)},this.getSerializedTimeZone=function(){return this._serializedTimeZone},this.getStandardOffset=function(){return this._standardOffset},this.getOffset=function(e){if(this._isConstant)return this._standardOffset;var t=this._offsetList,r=t.length;if(r==0)return 0;if(r==1)return t[0];var i=this._timeList,s=i.length;if(s==0)return 0;var o;s==1?o=0:(o=n.binarySearch(i,e),o<-1?o=-o-2:o==-1&&(o=0));var u=this._indexList[o];return t[u]},this._parseSerializedTimeZone=function(e){if(!e)return;var t=e.split(";"),n;for(var r=0,i=t.length;r<i;r++){n=t[r];if(n)switch(n.charAt(0)){case"C":if(this._parseC(n.substring(1,n.length)))return;break;case"Y":this._parseY(n.substring(1,n.length));break;case"@":this._parseAt(n.substring(1,n.length))}}this._standardOffset=this.getOffset(0)},this._parseC=function(e){if(!e)return!1;var t=Number(e);return isNaN(t)?!1:(this._standardOffset=t,this._isConstant=!0,!0)},this._parseY=function(e){if(!e)return;var t=e.split(" ");if(t.length<1)return;var n=t[0];if(!n)return;var r=Number(n);if(isNaN(r))return;this._offsetList.push(r)},this._parseAt=function(e){if(!e)return;var t=e.split(" ");if(t.length<2)return;var n=t[0];if(!n)return;var r=Number(n);if(isNaN(r))return;n=t[1];if(!n)return;var i=Number(n);if(isNaN(i))return;i=Math.floor(i);if(i<0||i>=this._offsetList.length)return;this._timeList.push(r),this._indexList.push(i)}})}),define("splunk/charting/Timeline",["require","jquery","jg_global","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","jgatt","splunk/brushes/BorderStrokeBrush","splunk/charting/ClickDragRangeMarker","splunk/charting/CursorMarker","splunk/charting/GridLines","splunk/charting/Histogram","splunk/charting/LogScale","splunk/charting/NumericAxisLabels","splunk/charting/TimeAxisLabels","splunk/charting/Tooltip","splunk/events/GenericEventData","splunk/time/DateTime","splunk/time/SimpleTimeZone","splunk/time/SplunkTimeZone","splunk/time/TimeUtils","splunk/time/TimeZones","splunk/viz/GraphicsVizBase"],function(e){var t=e("jquery"),n=e("jg_global").jg_extend,r=e("jgatt").events.ChainedEvent,i=e("jgatt").events.Event,s=e("jgatt").geom.Matrix,o=e("jgatt").geom.Point,u=e("jgatt").geom.Rectangle,a=e("jgatt").graphics.ColorUtils,f=e("jgatt").graphics.brushes.GroupBrush,l=e("jgatt").graphics.brushes.SolidFillBrush,c=e("jgatt").graphics.brushes.SolidStrokeBrush,h=e("jgatt").motion.GroupTween,p=e("jgatt").motion.PropertyTween,d=e("jgatt").motion.TweenRunner,v=e("jgatt").motion.easers.CubicEaser,m=e("jgatt").motion.easers.EaseDirection,g=e("jgatt").properties.Property,y=e("jgatt").utils.FunctionUtils,b=e("jgatt").utils.NumberUtils,w=e("jgatt").validation.ValidatePass,E=e("splunk/brushes/BorderStrokeBrush"),S=e("splunk/charting/ClickDragRangeMarker"),x=e("splunk/charting/CursorMarker"),T=e("splunk/charting/GridLines"),N=e("splunk/charting/Histogram"),C=e("splunk/charting/LogScale"),k=e("splunk/charting/NumericAxisLabels"),L=e("splunk/charting/TimeAxisLabels"),A=e("splunk/charting/Tooltip"),O=e("splunk/events/GenericEventData"),M=e("splunk/time/DateTime"),_=e("splunk/time/SimpleTimeZone"),D=e("splunk/time/SplunkTimeZone"),P=e("splunk/time/TimeUtils"),H=e("splunk/time/TimeZones"),B=e("splunk/viz/GraphicsVizBase");return n(B,function(e,n){this.dispatchUpdatedPass=new w("dispatchUpdated",3),this.updated=new i("updated",O),this.viewChanged=new r("viewChanged",this.changed),this.selectionChanged=new r("selectionChanged",this.changed),this.chartDoubleClicked=new i("chartDoubleClicked",O),this.timeZone=(new g("timeZone",String,null)).setter(function(e){this._timeZone=e?new D(e):H.LOCAL,this._axisLabelsX.set("timeZone",this._timeZone),this._rangeMarker.invalidate("updateRangePass"),this._cursorMarker.invalidate("renderGraphicsPass")}),this.jobID=(new g("jobID",String)).getter(function(){return this._jobID}).setter(function(e){this._jobID=e}),this.bucketCount=(new g("bucketCount",Number)).getter(function(){return this._bucketCount}).setter(function(e){this._bucketCount=e}),this.viewMinimum=(new g("viewMinimum",Number,null,!0)).getter(function(){return this._viewMinimum}),this.viewMaximum=(new g("viewMaximum",Number,null,!0)).getter(function(){return this._viewMaximum}),this.selectionMinimum=(new g("selectionMinimum",Number)).getter(function(){return this._selectionMinimum}).setter(function(e){if(this._rangeMarker.isDragging())return;this._rangeMarker.set("minimum",e),this._updateSelectionRange(!1)}),this.selectionMaximum=(new g("selectionMaximum",Number)).getter(function(){return this._selectionMaximum}).setter(function(e){if(this._rangeMarker.isDragging())return;this._rangeMarker.set("maximum",e),this._updateSelectionRange(!1)}),this.actualSelectionMinimum=(new g("actualSelectionMinimum",Number,null,!0)).getter(function(){return this._actualSelectionMinimum}),this.actualSelectionMaximum=(new g("actualSelectionMaximum",Number,null,!0)).getter(function(){return this._actualSelectionMaximum}),this.timelineData=(new g("timelineData",Object,null,!0)).getter(function(){return this._cloneTimelineData(this._timelineData)}),this.timelineScale=(new g("timelineScale",Object,null,!0)).getter(function(){var e=this._timelineData;if(!e)return null;var t=e.buckets;if(t.length==0)return null;var n=t[0],r=P.subtractDates(n.latestTime,n.earliestTime);return r.years>0?{value:r.years,unit:"year"}:r.months>0?{value:r.months,unit:"month"}:r.days>0?{value:r.days,unit:"day"}:r.hours>0?{value:r.hours,unit:"hour"}:r.minutes>0?{value:r.minutes,unit:"minute"}:r.seconds>0?{value:r.seconds,unit:"second"}:null}),this.enableChartClick=(new g("enableChartClick",Boolean)).getter(function(){return this._enableChartClick}).setter(function(e){this._enableChartClick=e}),this.scaleY=(new g("scaleY",String)).getter(function(){return this._scaleY}).setter(function(e){e=e=="log"?"log":"linear";if(this._scaleY===e)return;this._scaleY=e,this._histogram.set("scaleY",e=="log"?new C:null)}),this.foregroundColor=(new g("foregroundColor",Number)).getter(function(){return this._foregroundColor}).setter(function(e){e=isNaN(e)?0:Math.min(Math.max(Math.floor(e),0),16777215);if(this._foregroundColor===e)return;this._foregroundColor=e,this._axisLabelsX.set("foregroundColor",e),this._axisLabelsY1.set("foregroundColor",e),this._axisLabelsY2.set("foregroundColor",e),this._gridLines.set("foregroundColor",e),this._cursorMarker.set("foregroundColor",e),this._rangeMarker.set("foregroundColor",e),this.invalidate("renderGraphicsPass")}),this.seriesColor=(new g("seriesColor",Number)).getter(function(){return this._seriesColor}).setter(function(e){e=isNaN(e)?0:Math.min(Math.max(Math.floor(e),0),16777215);if(this._seriesColor===e)return;this._seriesColor=e,this._seriesFillBrush.set("color",e),this._seriesBorderBrush.set("colors",[a.brightness(e,-0.3)])}),this.minimalMode=(new g("minimalMode",Boolean,!1)).setter(function(e){this.invalidate("renderGraphicsPass")}),this.externalInterface=null,this._hostPath=null,this._basePath=null,this._timeZone=H.LOCAL,this._jobID=null,this._bucketCount=1e3,this._viewMinimum=NaN,this._viewMaximum=NaN,this._selectionMinimum=NaN,this._selectionMaximum=NaN,this._actualSelectionMinimum=NaN,this._actualSelectionMaximum=NaN,this._timelineData=null,this._enableChartClick=!1,this._scaleY="linear",this._foregroundColor=0,this._seriesColor=7578960,this._updateCount=0,this._updatingCount=0,this._updatedCount=0,this._dataLoading=!1,this._loadJobID=null,this._seriesFillBrush=null,this._seriesBorderBrush=null,this._seriesGroupBrush=null,this._lineBrush=null,this._histogram=null,this._axisLabelsX=null,this._axisLabelsY1=null,this._axisLabelsY2=null,this._gridLines=null,this._cursorMarker=null,this._rangeMarker=null,this._tooltip=null,this._prevDate=null,this._prevJobID=null,this._prevMouseGlobal=null,this._tooltipData=null,this._updateSizeInterval=0,this.constructor=function(e,t){n.constructor.call(this),this.addStyleClass("splunk-charting-Timeline"),this.setStyle({position:"relative",width:"100%",height:"100%",overflow:"hidden"}),e=typeof e=="string"?e:null;if(!e){var r=location.href,i=r.indexOf("://"),s=r.indexOf("/",i+4);e=r.substring(0,s)}this._hostPath=e,t=typeof t=="string"?t:null,t==null&&(t="/splunkd"),this._basePath=t,this.updateSize=y.bind(this.updateSize,this),this._histogram_containedRangeXChanged=y.bind(this._histogram_containedRangeXChanged,this),this._histogram_containedRangeYChanged=y.bind(this._histogram_containedRangeYChanged,this),this._rangeMarker_dragComplete=y.bind(this._rangeMarker_dragComplete,this),this._rangeMarker_labelOpacity_changed=y.bind(this._rangeMarker_labelOpacity_changed,this),this._child_invalidated=y.bind(this._child_invalidated,this),this._self_mouseOver=y.bind(this._self_mouseOver,this),this._self_mouseOut=y.bind(this._self_mouseOut,this),this._self_mouseMove=y.bind(this._self_mouseMove,this),this._self_doubleClick=y.bind(this._self_doubleClick,this),this._data_success=y.bind(this._data_success,this),this._data_error=y.bind(this._data_error,this),this.externalInterface={};var o=this._seriesColor,u=a.brightness(o,-0.3);this._seriesFillBrush=new l(o,1),this._seriesBorderBrush=new E([u],[1],[0,1,0,0],"square"),this._seriesGroupBrush=new f([this._seriesFillBrush,this._seriesBorderBrush]),this._lineBrush=new c(this._foregroundColor,.1,1,"square"),this._histogram=new N,this._histogram.renderGraphicsPriority=1,this._histogram.set("brush",this._seriesGroupBrush),this._histogram.set("minimumX",this._histogram.get("actualMinimumX")),this._histogram.set("maximumX",this._histogram.get("actualMaximumX")),this._histogram.set("minimumY",this._histogram.get("actualMinimumY")),this._histogram.set("maximumY",this._histogram.get("actualMaximumY")),this._histogram.addEventListener("containedRangeXChanged",this._histogram_containedRangeXChanged),this._histogram.addEventListener("containedRangeYChanged",this._histogram_containedRangeYChanged),this._axisLabelsX=new L,this._axisLabelsX.renderGraphicsPriority=1,this._axisLabelsX.set("histogram",this._histogram),this._axisLabelsX.set("labelFormat",y.bind(this._timeAxisFormat,this)),this._axisLabelsX.addEventListener("invalidated",this._child_invalidated),this._axisLabelsY1=new k,this._axisLabelsY1.renderGraphicsPriority=1,this._axisLabelsY1.set("histogram",this._histogram),this._axisLabelsY1.set("labelFormat",y.bind(this._numericAxisFormat,this)),this._axisLabelsY1.addEventListener("invalidated",this._child_invalidated),this._axisLabelsY2=new k,this._axisLabelsY2.renderGraphicsPriority=1,this._axisLabelsY2.set("histogram",this._histogram),this._axisLabelsY2.set("placement","right"),this._axisLabelsY2.set("labelFormat",y.bind(this._numericAxisFormat,this)),this._axisLabelsY2.addEventListener("invalidated",this._child_invalidated),this._gridLines=new T,this._gridLines.renderGraphicsPriority=1,this._gridLines.set("axisLabels",this._axisLabelsY1),this._cursorMarker=new x,this._cursorMarker.renderGraphicsPriority=1,this._cursorMarker.set("histogram",this._histogram),this._cursorMarker.set("valueSnap",y.bind(this._cursorValueSnap,this)),this._cursorMarker.set("valueFormat",y.bind(this._cursorValueFormat,this)),this._rangeMarker=new S,this._rangeMarker.renderGraphicsPriority=1,this._rangeMarker.set("histogram",this._histogram),this._rangeMarker.set("minimumSnap",y.bind(this._minimumSnap,this)),this._rangeMarker.set("maximumSnap",y.bind(this._maximumSnap,this)),this._rangeMarker.set("minimumFormat",y.bind(this._minimumFormat,this)),this._rangeMarker.set("maximumFormat",y.bind(this._maximumFormat,this)),this._rangeMarker.set("rangeFormat",y.bind(this._rangeFormat,this)),this._rangeMarker.addEventListener("dragComplete",this._rangeMarker_dragComplete),this._rangeMarker.addEventListener("labelOpacity.changed",this._rangeMarker_labelOpacity_changed),this._tooltip=new A,this._tooltip.renderGraphicsPriority=1,this.$element.bind("mouseover",this._self_mouseOver),this.$element.bind("mouseout",this._self_mouseOut),this.$element.bind("mousemove",this._self_mouseMove),this.$element.bind("dblclick",this._self_doubleClick),this._gridLines.appendTo(this),this._histogram.appendTo(this),this._axisLabelsX.appendTo(this),this._axisLabelsY1.appendTo(this),this._axisLabelsY2.appendTo(this),this._cursorMarker.appendTo(this),this._rangeMarker.appendTo(this),this._tooltip.appendTo(this),this._updateViewRange(),this._updateCountRange()},this.dispatchUpdated=function(){this.validatePreceding("dispatchUpdatedPass");if(this.isValid("dispatchUpdatedPass"))return;this.setValid("dispatchUpdatedPass"),this.dispatchEvent("updated",new O({updateCount:this._updatedCount}))},this.update=function(){return this._updateCount++,this._update(),this._updateCount},this.getSelectedBuckets=function(){if(!this._timelineData)return null;var e=this._timelineData.buckets;if(!e)return null;var t=new Array,n=this._actualSelectionMinimum,r=this._actualSelectionMaximum,i,s;for(var o=0,u=e.length;o<u;o++){i=e[o],s=i.earliestTime;if(!s||s.getTime()<n)continue;s=i.latestTime;if(!s||s.getTime()>r)continue;t.push(this._cloneTimelineData(i))}return t},this.updateSize=function(){var e=this.$element.width(),t=this.$element.height();if(e===this.getInternal("width")&&t===this.getInternal("height"))return;if(!this.$element.is(":visible"))return;this.set("width",e),this.set("height",t)},this.dispose=function(){this._gridLines.dispose(),this._histogram.dispose(),this._axisLabelsX.dispose(),this._axisLabelsY1.dispose(),this._axisLabelsY2.dispose(),this._cursorMarker.dispose(),this._rangeMarker.dispose(),this._tooltip.dispose(),n.dispose.call(this)},this.renderGraphicsOverride=function(e,t,n){var r=this.getInternal("minimalMode"),i=Math.round(t),s=this.localToGlobal(new o(0,0)),a=this.localToGlobal(new o(t,n));this._axisLabelsX.setStyle({visibility:r?"hidden":""}),this._axisLabelsX.set("width",t),this._axisLabelsX.renderGraphics(),n=r?Math.max(n-20,0):Math.max(n-this._axisLabelsX.get("height"),0),this._axisLabelsY1.setStyle({visibility:r?"hidden":""}),this._axisLabelsY1.set("height",n),this._axisLabelsY1.renderGraphics();var f=r?20:this._axisLabelsY1.get("width");this._axisLabelsY2.setStyle({visibility:r?"hidden":""}),this._axisLabelsY2.set("height",n),this._axisLabelsY2.renderGraphics();var l=r?Math.max(f,t-20):Math.max(f,t-this._axisLabelsY2.get("width"));t=l-f,this._axisLabelsX.set("x",f),this._axisLabelsX.set("y",n),this._axisLabelsX.set("width",t),this._axisLabelsX.renderGraphics(),this._axisLabelsY2.set("x",l),this._histogram.set("x",f),this._histogram.set("width",t),this._histogram.set("height",n),this._histogram.renderGraphics(),this._gridLines.setStyle({visibility:r?"hidden":""}),this._gridLines.set("x",f),this._gridLines.set("width",t),this._gridLines.set("height",n),this._gridLines.renderGraphics(),this._cursorMarker.set("x",f),this._cursorMarker.set("width",t),this._cursorMarker.set("height",n),this._cursorMarker.renderGraphics(),this._rangeMarker.set("x",f),this._rangeMarker.set("width",t),this._rangeMarker.set("height",n),this._rangeMarker.renderGraphics(),this._tooltip.set("viewBounds",new u(s.x,s.y,a.x-s.x,a.y-s.y)),e.clear();if(r){f=Math.round(f),l=Math.round(l),n=Math.round(n);var c=this._lineBrush,h=Math.round(n/7),p;c.set("color",this._foregroundColor),c.beginBrush(e),c.moveTo(f,0),c.lineTo(f,n),c.moveTo(l,0),c.lineTo(l,n);for(var d=0;d<=h;d++)p=Math.round(n*(d/h)),c.moveTo(f,p),c.lineTo(l,p);c.endBrush()}this._updateTooltip()},this.onAppend=function(){this._updateSizeInterval=setInterval(this.updateSize,50),this.updateSize()},this.onRemove=function(){clearInterval(this._updateSizeInterval)},this._update=function(){if(this._dataLoading)return;this._updatingCount=this._updateCount,this._loadJobID=this._jobID;if(!this._loadJobID){this._updateComplete(null);return}this._dataLoading=!0,t.ajax({type:"GET",url:this._hostPath+this._basePath+"/search/jobs/"+this._loadJobID+"/timeline?offset=0&count="+this._bucketCount,dataType:"xml",success:this._data_success,error:this._data_error})},this._updateComplete=function(e){this._updateTimelineData(e),this._dataLoading=!1,this._updatedCount=this._updatingCount,this.invalidate("dispatchUpdatedPass"),this._updatingCount<this._updateCount&&this._update()},this._updateTimelineData=function(e){this._timelineData=e;var t=this._loadJobID!=this._prevJobID;this._prevJobID=this._loadJobID,t&&(this._rangeMarker.set("minimum",NaN),this._rangeMarker.set("maximum",NaN)),this._rangeMarker.invalidate("updateRangePass"),this._cursorMarker.set("value",e&&e.buckets.length>0&&e.cursorTime?e.cursorTime.getTime():NaN),this._cursorMarker.invalidate("renderGraphicsPass");var n=e?e.buckets.concat():null;if(n){var r;for(var i=0,s=n.length;i<s;i++)r=n[i],n[i]={x1:r.earliestTime,x2:r.latestTime,y:r.eventCount}}this._histogram.set("data",n),this.invalidate("renderGraphicsPass"),this.validate("renderGraphicsPass"),this._updateViewRange(),this._updateSelectionRange()},this._updateViewRange=function(){if((!this._timelineData||this._timelineData.buckets.length==0)&&!isNaN(this._viewMinimum))return;var e=this._histogram.get("containedMinimumX"),t=this._histogram.get("containedMaximumX");if(e==this._viewMinimum&&t==this._viewMaximum)return;this._viewMinimum=e,this._viewMaximum=t,this.dispatchEvent("viewChanged",new O({viewMinimum:this._viewMinimum,viewMaximum:this._viewMaximum}));var n=new p(this._histogram,"minimumX",this._histogram.get("actualMinimumX"),this._histogram.get("containedMinimumX")),r=new p(this._histogram,"maximumX",this._histogram.get("actualMaximumX"),this._histogram.get("containedMaximumX")),i=new h([n,r],new v(m.OUT));d.start(i,.5),this._updateSelectionRange()},this._updateCountRange=function(){if(!this._timelineData||this._timelineData.eventCount==0)return;var e=new p(this._histogram,"minimumY",this._histogram.get("actualMinimumY"),this._histogram.get("containedMinimumY")),t=new p(this._histogram,"maximumY",this._histogram.get("actualMaximumY"),this._histogram.get("containedMaximumY")),n=new h([e,t],new v(m.OUT));d.start(n,.5)},this._updateSelectionRange=function(e){if(this._rangeMarker.isDragging())return;e===undefined&&(e=!0);var t=this._rangeMarker.get("minimum"),n=this._rangeMarker.get("maximum"),r=isNaN(t)?this._viewMinimum:this._rangeMarker.get("actualMinimum"),i=isNaN(n)?this._viewMaximum:this._rangeMarker.get("actualMaximum"),s=isNaN(t)?!isNaN(this._selectionMinimum):isNaN(this._selectionMinimum)||r!=this._actualSelectionMinimum,o=isNaN(n)?!isNaN(this._selectionMaximum):isNaN(this._selectionMaximum)||i!=this._actualSelectionMaximum;this._selectionMinimum=t,this._selectionMaximum=n,this._actualSelectionMinimum=r,this._actualSelectionMaximum=i,e&&(s||o)&&(t=isNaN(t)?NaN:r,n=isNaN(n)?NaN:i,this.dispatchEvent("selectionChanged",new O({selectionMinimum:t,selectionMaximum:n})))},this._updateTooltip=function(e){e==null?e=this._prevMouseGlobal?this._prevMouseGlobal:new o:this._prevMouseGlobal=e;var t=this._histogram.globalToLocal(e),n=this._rangeMarker.isDragging()?null:this._histogram.getDataUnderPoint(t.x,t.y);if(n&&n.bounds){var r=n.bounds,i=this._histogram.localToGlobal(new o(r.x,r.y)),s=this._histogram.localToGlobal(new o(r.x+r.width,r.y+r.height));this._tooltip.set("targetBounds",new u(i.x,i.y,s.x-i.x,s.y-i.y));if(this._tooltipData&&this._tooltipData.data===n.data)return;this._tooltipData=n,this._tooltip.set("value",this._tipFormat(n.data)),this._tooltip.show(),this._enableChartClick&&this.$element.css({cursor:"pointer"})}else{if(!this._tooltipData)return;this._tooltipData=null,this._tooltip.set("value",null),this._tooltip.hide(),this.$element.css({cursor:"auto"})}},this._parseTimelineData=function(e){if(!e)return null;var t=e.attributes,n,r=e.childNodes,i,s,o,u=null,a=null,f=null,l=NaN,c=NaN,h=NaN,p=0,d=0,v=!1,m=!0,g=[];for(s=0,o=t.length;s<o;s++){n=t[s];if(n.nodeType==2)switch(n.nodeName.toLowerCase()){case"t":u=new M(Number(n.nodeValue));break;case"cursor":f=new M(Number(n.nodeValue));break;case"d":l=Number(n.nodeValue);break;case"etz":c=Number(n.nodeValue);break;case"ltz":h=Number(n.nodeValue);break;case"c":p=Number(n.nodeValue);break;case"a":d=Number(n.nodeValue);break;case"f":v=n.nodeValue=="1";break;case"is_time_cursored":m=n.nodeValue!="0"}}var y=0,b;for(s=0,o=r.length;s<o;s++){i=r[s];if(i.nodeType==1)switch(i.nodeName.toLowerCase()){case"bucket":b=this._parseTimelineData(i),y+=b.eventCount,g.push(b)}}p=Math.max(p,y),isNaN(l)&&(l=0),isNaN(c)&&(c=0),isNaN(h)&&(h=0),u&&(a=new M(u.getTime()+l));if(g.length>0){var w=g[0].earliestTime;w&&(!u||w.getTime()<u.getTime())&&(u=w.clone());var E=g[g.length-1].latestTime;E&&(!a||E.getTime()>a.getTime())&&(a=E.clone()),u&&a&&(l=a.getTime()-u.getTime())}u&&(u=u.toTimeZone(new _(c))),a&&(a=a.toTimeZone(new _(h))),f&&(f=f.toTimeZone(new _(c)));var S={};return S.earliestTime=u,S.latestTime=a,S.cursorTime=m?f:null,S.duration=l,S.eventCount=p,S.eventAvailableCount=d,S.isComplete=v,S.buckets=g,S},this._cloneTimelineData=function(e){if(!e)return null;var t={};t.earliestTime=e.earliestTime?e.earliestTime.getTime():null,t.earliestOffset=e.earliestTime?e.earliestTime.getTimeZoneOffset():0,t.latestTime=e.latestTime?e.latestTime.getTime():null,t.latestOffset=e.latestTime?e.latestTime.getTimeZoneOffset():0,t.cursorTime=e.cursorTime?e.cursorTime.getTime():null,t.duration=e.duration,t.eventCount=e.eventCount,t.eventAvailableCount=e.eventAvailableCount,t.isComplete=e.isComplete;var n=e.buckets,r=n.length,i=t.buckets=[];for(var s=0;s<r;s++)i.push(this._cloneTimelineData(n[s]));return t},this._cursorValueSnap=function(e){return this._ceilToBucket(e)},this._minimumSnap=function(e,t){return t?this._floorToBucket(e):this._roundToBucket(e)},this._maximumSnap=function(e,t){return t?this._ceilToBucket(e):this._roundToBucket(e)},this._floorToBucket=function(e){var t=this._histogram.get("data");if(t){var n,r=null;for(var i=t.length-1;i>=0;i--){n=t[i],r=n.x1;if(r&&r.getTime()<=e)break}r&&!isNaN(r.getTime())&&(e=r.getTime())}return e},this._ceilToBucket=function(e){var t=this._histogram.get("data");if(t){var n,r=null;for(var i=0,s=t.length;i<s;i++){n=t[i],r=n.x2;if(r&&r.getTime()>=e)break}r&&!isNaN(r.getTime())&&(e=r.getTime())}return e},this._roundToBucket=function(e){var t=this._histogram.get("data");if(t){var n=e,r=Infinity,i,s=null,o;for(var u=0,a=t.length;u<a;u++)i=t[u],s=i.x1?i.x1.getTime():NaN,isNaN(s)||(o=Math.abs(s-e),o<r&&(n=s,r=o)),s=i.x2?i.x2.getTime():NaN,isNaN(s)||(o=Math.abs(s-e),o<r&&(n=s,r=o));e=n}return e},this._timeAxisFormat=function(e){if(!e)return"";var t="",n=this._axisLabelsX.get("actualUnit"),r=0,i=1,s=2,o=3,u=4,a=5,f=6,l,c,h=this._prevDate;return!h||h.getTime()>e.getTime()||h.getYear()!=e.getYear()?l=r:h.getMonth()!=e.getMonth()?l=i:h.getDay()!=e.getDay()?l=s:l=o,this._prevDate=e.clone(),n.seconds%1>0?c=f:n.seconds>0||n.minutes%1>0?c=a:n.minutes>0||n.hours%1>0?c=u:n.hours>0||n.days%1>0?c=o:n.days>0||n.months%1>0?c=s:n.months>0||n.years%1>0?c=i:c=r,l>c&&(l=c),c==f?t+=this._formatTime(e,"full"):c==a?t+=this._formatTime(e,"medium"):c>=o&&(t+=this._formatTime(e,"short")),c>=s&&l<=s?t+=(t?"\n":"")+this._formatDate(e,"EEE MMM d"):c>=i&&l<=i&&(t+=(t?"\n":"")+this._formatDate(e,"MMMM")),c>=r&&l<=r&&(t+=(t?"\n":"")+this._formatDate(e,"yyyy")),t},this._numericAxisFormat=function(e){return this._formatNumber(e)},this._cursorValueFormat=function(e){return this._minMaxFormat(e)},this._minimumFormat=function(e){return this._minMaxFormat(this._minimumSnap(e))},this._maximumFormat=function(e){return this._minMaxFormat(this._maximumSnap(e))},this._minMaxFormat=function(e){var t=new M(e);t=t.toTimeZone(this._timeZone);var n="medium",r;return t.getSeconds()%1>=.001?r="full":t.getSeconds()>0?r="medium":t.getMinutes()>0?r="short":t.getHours()>0?r="short":r="none",r=="none"?this._formatDate(t,n):this._formatDateTime(t,n,r)},this._rangeFormat=function(e,t){var n=new M(this._minimumSnap(e));n=n.toTimeZone(this._timeZone);var r=new M(this._maximumSnap(t));r=r.toTimeZone(this._timeZone);var i=P.subtractDates(r,n),s="";return i.years>0&&(s+=this._formatNumericString("%s year ","%s years ",i.years)),i.months>0&&(s+=this._formatNumericString("%s month ","%s months ",i.months)),i.days>0&&(s+=this._formatNumericString("%s day ","%s days ",i.days)),i.hours>0&&(s+=this._formatNumericString("%s hour ","%s hours ",i.hours)),i.minutes>0&&(s+=this._formatNumericString("%s minute ","%s minutes ",i.minutes)),i.seconds>0&&(s+=this._formatNumericString("%s second ","%s seconds ",Math.floor(i.seconds*1e3)/1e3)),s},this._tipFormat=function(e){return e?this._formatTooltip(e.x1,e.x2,e.y):""},this._formatNumber=function(e){e=b.toPrecision(e,12);var t=this.externalInterface.formatNumber;return typeof t=="function"?t(e):String(e)},this._formatNumericString=function(e,t,n){n=b.toPrecision(n,12);var r=this.externalInterface.formatNumericString;if(typeof r=="function")return r(e,t,n);var i=Math.abs(n)==1?e:t;return i=i.split("%s").join(String(n)),i},this._formatDate=function(e,t){t===undefined&&(t="full");var n=this.externalInterface.formatDate;return typeof n=="function"?n(e.getTime(),e.getTimeZoneOffset(),t):this._pad(e.getYear(),4)+"-"+this._pad(e.getMonth(),2)+"-"+this._pad(e.getDay(),2)},this._formatTime=function(e,t){t===undefined&&(t="full");var n=this.externalInterface.formatTime;return typeof n=="function"?n(e.getTime(),e.getTimeZoneOffset(),t):this._pad(e.getHours(),2)+":"+this._pad(e.getMinutes(),2)+":"+this._pad(e.getSeconds(),2,3)},this._formatDateTime=function(e,t,n){t===undefined&&(t="full"),n===undefined&&(n="full");var r=this.externalInterface.formatDateTime;return typeof r=="function"?r(e.getTime(),e.getTimeZoneOffset(),t,n):this._pad(e.getYear(),4)+"-"+this._pad(e.getMonth(),2)+"-"+this._pad(e.getDay(),2)+" "+this._pad(e.getHours(),2)+":"+this._pad(e.getMinutes(),2)+":"+this._pad(e.getSeconds(),2,3)},this._formatTooltip=function(e,t,n){var r=this.externalInterface.formatTooltip;return typeof r=="function"?r(e.getTime(),t.getTime(),e.getTimeZoneOffset(),t.getTimeZoneOffset(),n):n+" events from "+e.toString()+" to "+t.toString()},this._pad=function(e,t,n){if(isNaN(e))return"NaN";if(e===Infinity)return"Infinity";if(e===-Infinity)return"-Infinity";t===undefined&&(t=0),n===undefined&&(n=0);var r=e.toFixed(20),i=r.indexOf(".");i<0?i=r.length:n<1?r=r.substring(0,i):r=r.substring(0,i)+"."+r.substring(i+1,i+n+1);for(var s=i;s<t;s++)r="0"+r;return r},this._histogram_containedRangeXChanged=function(e){this._updateViewRange()},this._histogram_containedRangeYChanged=function(e){this._updateCountRange()},this._rangeMarker_dragComplete=function(e){this._updateSelectionRange()},this._rangeMarker_labelOpacity_changed=function(e){this._cursorMarker.set("labelOpacity",1-e.newValue)},this._child_invalidated=function(e){e.pass===this.renderGraphicsPass&&this.invalidate(e.pass)},this._self_mouseOver=function(e){this._updateTooltip(new o(e.pageX,e.pageY))},this._self_mouseOut=function(e){this._updateTooltip(new o(e.pageX,e.pageY))},this._self_mouseMove=function(e){this._updateTooltip(new o(e.pageX,e.pageY))},this._self_doubleClick=function(e){if(!this._enableChartClick)return;this._updateTooltip(new o(e.pageX,e.pageY));var t=this._tooltipData;if(!t)return;var n={};n.earliestTime={},n.latestTime={},n.eventCount=t.data.y;var r=["earliestTime","latestTime","eventCount"];this.dispatchEvent("chartDoubleClicked",new O({data:n,fields:r,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey}))},this._data_success=function(e,t,n){this._updateComplete(this._parseTimelineData(e?e.documentElement:null))},this._data_error=function(e,t,n){this._updateComplete(null)}})}),define("views/shared/CanvasTimeline",["require","exports","module","jquery","underscore","swfobject","jquery.ui.resizable","splunk","splunk.i18n","splunk.util","splunk.logger","splunk.messenger","splunk.timerange","splunk.window","splunk.jabridge","views/Base","views/shared/delegates/Popdown","splunk/charting/Timeline","helpers/user_agent"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("swfobject"),o=e("jquery.ui.resizable"),u=e("splunk"),a=e("splunk.i18n"),f=a._,l=a.ungettext,c=e("splunk.util"),h=c.sprintf,p=e("splunk.logger"),d=e("splunk.messenger"),v=e("splunk.timerange"),m=e("splunk.window"),g=e("splunk.jabridge"),y=e("views/Base"),b=e("views/shared/delegates/Popdown"),w=e("splunk/charting/Timeline"),E=e("helpers/user_agent"),S={swfFile:"timeline.swf",width:"100%",height:"120px",enableResize:"true",maxBucketCount:"1000",minimized:"false",renderer:"auto",minimalMode:"true",minimalHeight:"55px"},x="display.prefs.timeline.",T=y.extend({_CUSTOM_DATE_FORMATS:{"EEE MMM d":{day_before_month:"EEE d MMM",ja_JP:"EEE MMM d日",ko_KR:"EEE MMM d일",zh_CN:"EEE MMM d日",zh_TW:"EEE MMM d日"},MMMM:{},yyyy:{ja_JP:"yyyy年",ko_KR:"yyyy년",zh_CN:"yyyy年",zh_TW:"yyyy年"}},_isInitialized:!1,_selectedEarliestTime:NaN,_selectedLatestTime:NaN,_renderSID:null,_renderStatusBuckets:null,_renderScanCount:null,_renderIsDone:null,moduleId:n.id,initialize:function(){y.prototype.initialize.apply(this,arguments),this.activate(),this.container=this.$el,this.moduleType="Timeline",this.logger=p.getLogger("Timeline.js"),this._prevSID=null,this.updateId=-1,this.renderMonitor=null,this.isEntireRangeSelected=!0,f("Open as image"),f("year"),f("years"),f("month"),f("months"),f("day"),f("days"),f("hour"),f("hours"),f("minute"),f("minutes"),f("second"),f("seconds"),this.renderTemplate()},startListening:function(){this.listenTo(this.model.searchJob,"destroy error",this.render),this.listenTo(this.model.searchJob.entry.content,"change",this.render),this.listenTo(this,"selectionChanged",function(e){this.model.report.entry.content.set({"display.events.timelineEarliestTime":i.isNaN(e.earliestTime)?"":e.earliestTime,"display.events.timelineLatestTime":i.isNaN(e.latestTime)?"":e.latestTime})})},activate:function(e){return this.active?y.prototype.activate.apply(this,arguments):(y.prototype.activate.apply(this,arguments),this.showTimeline("deactivate"),this)},deactivate:function(e){return this.active?(y.prototype.deactivate.apply(this,arguments),this.hideTimeline("deactivate"),this):y.prototype.deactivate.apply(this,arguments)},renderTemplate:function(){var e=c.normalizeBoolean(this.getParam("minimized")),t={width:this.getParam("width"),height:this.getParam("height"),wrapperStyle:e?"display:none;":"",formatLabel:f("Format Timeline"),hiddenLabel:f("Hidden"),compactLabel:f("Compact"),fullLabel:f("Full"),linearLabel:f("Linear scale"),logLabel:f("Log scale"),zoomOutLabel:f("Zoom Out"),zoomInLabel:f("Zoom to Selection"),deselectLabel:f("Deselect")};this.container.html(i(this.template).template(t))},initTemplate:function(){this.zoomInLink=r("a.zoomIn",this.container).click(this.zoomIn.bind(this)),this.zoomOutLink=r("a.zoomOut",this.container).click(this.zoomOut.bind(this)),this.selectAllLink=r("a.selectAll",this.container).click(this.selectAll.bind(this)),this.controlLinks=r(".controlLinks",this.container).click(this.controlsBackgroundClick.bind(this)),this.children.popdown=new b({el:this.$(".format-timeline"),attachDialogTo:"body"}),this.formatLinkHidden=r(".format-timeline-hidden a",this.container).click(this.minimizeFull.bind(this)),this.formatLinkCompact=r(".format-timeline-compact a",this.container).click(this.maximizeCompact.bind(this)),this.formatLinkFull=r(".format-timeline-full a",this.container).click(this.maximizeFull.bind(this)),this.formatLinksScale=r(".format-timeline-scale",this.container),this.formatLinkLinear=r(".format-timeline-linear a",this.container).click(this.linScale.bind(this)),this.formatLinkLog=r(".format-timeline-log a",this.container).click(this.logScale.bind(this)),this.iconCheckView=r('<i class="icon-check"></i>'),this.iconCheckScale=r('<i class="icon-check"></i>'),r(".timelineContainer",this.container).append('<div class="messageContainer"></div>');switch(this.getParam("renderer")){case"canvas":this.renderer="canvas";break;case"flash":this.renderer="flash";break;default:this.renderer=this._hasCanvas()?"canvas":"flash"}switch(this.renderer){case"canvas":this._timeline=new T.CanvasTimeline(this);break;case"flash":this._timeline=new T.FlashTimeline(this)}c.normalizeBoolean(this.getParam("minimized"))?this.minimizeFull(!1):c.normalizeBoolean(this.getParam("minimalMode"))?this.maximizeCompact(!1):this.maximizeFull(!1),this.linScale(),this._isInitialized=!0,this.render()},render:function(){if(!this._isInitialized)return this._initTemplateTimeout||(this._initTemplateTimeout=setTimeout(this.initTemplate.bind(this),0)),this;var e=this.model.searchJob;if(!e)return this;var t=e.id,n=e.entry.content.get("statusBuckets"),r=e.entry.content.get("scanCount"),i=e.entry.content.get("isDone"),s=t!==this._renderSID,o=n!==this._renderStatusBuckets,u=r!==this._renderScanCount,a=i!==this._renderIsDone;return this._renderSID=t,this._renderStatusBuckets=n,this._renderScanCount=r,this._renderIsDone=i,s||o?this.onContextChange():(u||a)&&this.onJobProgress(),this},remove:function(){return this._initTemplateTimeout&&clearTimeout(this._initTemplateTimeout),this._timeline&&(this._timeline.dispose(),this._timeline=null),y.prototype.remove.apply(this,arguments)},show:function(e){e=e!=null?""+e:"";var t=this._hideKeys;if(!t)return this;delete t[e];for(e in t)if(t.hasOwnProperty(e))return this;return this._hideKeys=null,this.$el.show(),this.onShow(),this},hide:function(e){e=e!=null?""+e:"";var t=this._hideKeys;return t?(t[e]=!0,this):(t=this._hideKeys={},t[e]=!0,this.onHide(),this.$el.hide(),this)},isShowing:function(){return this._hideKeys==null},onShow:function(){this.showTimeline("onHide")},onHide:function(){this.hideTimeline("onHide")},getParam:function(e){var t=this.model.report,n=t?t.entry.content.get(x+e):null;return n==null&&(n=S[e]),n!=null?n:null},setParam:function(e,t){var n=this.model.report;n&&n.entry.content.set(x+e,t)},update:function(){this._timeline&&(this.updateId=this._timeline.update())},minimizeFull:function(e){this.minimize(e),this.iconCheckView.prependTo(this.formatLinkHidden)},maximizeCompact:function(e){this.maximize(e),e!=0&&this.setParam("minimalMode",!0),r(".timelineContainer",this.container).css("height",this.getParam("minimalHeight")),r(".ui-resizable-handle",this.container).css("visibility","hidden"),this.iconCheckView.prependTo(this.formatLinkCompact),this._timeline&&this._timeline.setMinimalMode(!0)},maximizeFull:function(e){this.maximize(e),e!=0&&this.setParam("minimalMode",!1),r(".timelineContainer",this.container).css("height",this.getParam("height")),r(".ui-resizable-handle",this.container).css("visibility",""),this.iconCheckView.prependTo(this.formatLinkFull),this._timeline&&this._timeline.setMinimalMode(!1)},minimize:function(e){e!=0&&(this.setParam("minimized",!0),e.preventDefault&&typeof e.preventDefault=="function"&&e.preventDefault()),this.hideTimeline("minimize"),r(".timelineContainer",this.container).hide(),r(".controlLinks",this.container).hide(),r(this.container).addClass("minimized"),this.formatLinksScale.hide()},maximize:function(e){e!=0&&(this.setParam("minimized",!1),e.preventDefault&&typeof e.preventDefault=="function"&&e.preventDefault()),this.formatLinksScale.show(),r(this.container).removeClass("minimized"),r(".controlLinks",this.container).show(),r(".timelineContainer",this.container).show(),this.showTimeline("minimize")},zoomIn:function(e){if(this.zoomInLink.hasClass("disabled"))return!1;var t=this.getSelectionRange();if(!t||t&&t.equalToRange(this.getTimelineRangeFromUTC())){if(t.getDuration()==1){var n=d.System.getInstance();n.send("info","splunk",f("The timeline can not zoom in to a single millisecond.")),this._passTimeRangeToParent(t);return}this._passTimeRangeToParent(t.zoomIn())}else this._passTimeRangeToParent(t);this.selectAll(),e.preventDefault&&e.preventDefault()},zoomOut:function(e){if(this.zoomOutLink.hasClass("disabled"))return!1;var t=this.getTimelineRangeFromUTC();t?this._passTimeRangeToParent(t.zoomOut()):this.logger.error(this.moduleType," could not zoom out cause we had an undefined timelineRange"),e.preventDefault()},selectAll:function(e){if(this.selectAllLink.hasClass("disabled"))return!1;r(".controlLinks",this.container).addClass("noSelection"),this.clearSelectionRange(),e&&e.preventDefault()},controlsBackgroundClick:function(e){e.currentTarget===e.target&&this.selectAll(e)},logScale:function(e){this.iconCheckScale.prependTo(this.formatLinkLog),this._timeline&&this._timeline.setScaleY("log"),e&&e.preventDefault()},linScale:function(e){this.iconCheckScale.prependTo(this.formatLinkLinear),this._timeline&&this._timeline.setScaleY("linear"),e&&e.preventDefault()},showDataControls:function(e){e?(r(".controlLinks",this.container).removeClass("noData"),this.zoomOutLink.removeClass("disabled")):(r(".controlLinks",this.container).addClass("noData"),this.zoomOutLink.addClass("disabled"))},enableResizable:function(){r("div.timelineContainer",this.container).resizable({autoHide:!0,handles:"s",stop:this.onResizeStop.bind(this)}),r("div.timelineContainer").mouseup(function(e){r(this).width("100%")}),c.normalizeBoolean(this.getParam("minimalMode"))&&r(".ui-resizable-handle",this.container).css("visibility","hidden")},getCSSColor:function(e,t){var n;for(var r=0;r<e.length;r++){var i=e[r].css(t);n=c.normalizeColor(i);if(n)return n}return null},getTimelineRangeFromUTC:function(){if(this._timeline)try{var e=this._timeline.getViewMinimum(),t=this._timeline.getViewMaximum();if(c.isInt(Math.floor(e))&&c.isInt(Math.floor(t)))return new v(e,t);this.logger.error("undefined values "+e+", "+t)}catch(n){this.logger.error(this.moduleType," exception getting earliest and latest selected times - "+n)}return new v},getScaleDescription:function(){var e=this._timeline?this._timeline.getTimelineScale():null;if(!e)return"";var t=e.unit,n=e.value;parseFloat(n)<1&&(t=="second"?(n*=1e3,t="millisecond"):this.logger.error("error - timelineScale has a fractional unit but not in seconds."));if(t=="millisecond")return h(l("%s millisecond per column","%s milliseconds per column",n),n);if(n==1)switch(t){case"year":return f("1 year per column");case"month":return f("1 month per column");case"day":return f("1 day per column");case"hour":return f("1 hour per column");case"minute":return f("1 minute per column");case"second":return f("1 second per column");default:this.logger.error("received uncaught unit of ",t)}else this.logger.error("received a timelineScale that has >1 unit per bucket. ("+n+"). This should not happen");return""},getSelectionRange:function(e){e||(e=this._timeline?this._timeline.getSelectedBuckets():null);var t=e?e.length:0;if(t==0)return this.logger.error(this.moduleType," getSelectionRange returned an empty selectedBuckets. Returning 'All Time'"),new v;var n=e[0],r=e[t-1],i=new v(n.earliestTime,r.latestTime);return i.setAsSubRangeOfJob(!this.isEntireRangeSelected),i},setSelectionRange:function(e,t,n){if(isNaN(e)||isNaN(t)){this.clearSelectionRange(n);return}this.isEntireRangeSelected=!1,this.selectAllLink&&this.selectAllLink.removeClass("disabled"),this.zoomInLink&&this.zoomInLink.removeClass("disabled"),this._timeline&&(this._timeline.setSelectionMinimum(e),this._timeline.setSelectionMaximum(t));if(this._selectedEarliestTime!==e||this._selectedLatestTime!==t)this._selectedEarliestTime=e,this._selectedLatestTime=t,n!==!1&&this.trigger("selectionChanged",{earliestTime:e,latestTime:t})},clearSelectionRange:function(e){this.isEntireRangeSelected=!0,this.selectAllLink&&this.selectAllLink.addClass("disabled"),this.zoomInLink&&this.zoomInLink.addClass("disabled"),this._timeline&&(this._timeline.setSelectionMinimum(NaN),this._timeline.setSelectionMaximum(NaN));if(!isNaN(this._selectedEarliestTime)||!isNaN(this._selectedLatestTime))this._selectedEarliestTime=NaN,this._selectedLatestTime=NaN,e!==!1&&this.trigger("selectionChanged",{earliestTime:NaN,latestTime:NaN})},resetUI:function(){this._timeline&&this._timeline.setJobID(""),this.update(),this.showDataControls(!1),this.hideStatusMessage()},hideTimeline:function(e){return e=e!=null?String(e):"",this._timelineHideKeys?(this._timelineHideKeys[e]=!0,!1):(this._timelineHideKeys={},this._timelineHideKeys[e]=!0,this._timeline&&this._timeline.hide(),!0)},showTimeline:function(e){if(!this._timelineHideKeys)return!1;e=e!=null?String(e):"",delete this._timelineHideKeys[e];for(e in this._timelineHideKeys)if(this._timelineHideKeys.hasOwnProperty(e))return!1;return this._timelineHideKeys=null,this._timeline&&this._timeline.show(),!0},isTimelineShowing:function(){return!this._timelineHideKeys},showStatusMessage:function(e,t){var n="";n+='<p class="resultStatusMessage empty_results">',n+=e,t&&(n+=' <span class="resultStatusHelp">',n+='<a href="#" onclick="Splunk.window.openJobInspector(\''+t.replace("'","")+'\');return false;" class="resultStatusHelpLink">',n+=f("Inspect ..."),n+="</a>",n+="</span>"),n+="</p>",this.hideTimeline("showStatusMessage"),r(".messageContainer",this.container).html(n).show()},hideStatusMessage:function(){r(".messageContainer",this.container).hide().html(""),this.showTimeline("showStatusMessage")},onJobProgress:function(){this.update()},onContextChange:function(){var e=this.model.searchJob,t=e?e.id:null;this.showDataControls(!1),this.clearSelectionRange(),this._timeline&&(t!=this._prevSID&&(this._prevSID=t,this.selectAll()),t!=null?this._timeline.setJobID(encodeURIComponent(encodeURIComponent(t))):this._timeline.setJobID(t),this._timeline.setBucketCount(parseInt(this.getParam("maxBucketCount"),10))),t&&e.entry.content.get("statusBuckets")<1?(this.hideTimeline("statusBuckets"),this.hide("views-shared-CanvasTimeline-statusBuckets")):(this.show("views-shared-CanvasTimeline-statusBuckets"),this.showTimeline("statusBuckets")),this.update()},onDataUpdated:function(e){var t=this.model.searchJob;if(!t)return;!t.isNew()&&t.entry.content.get("isDone")&&this.renderMonitor&&e.updateCount>=this.updateId&&(this.renderMonitor.loadComplete(),this.renderMonitor=!1),t.isNew()||(this.showDataControls(!0),r(".bucketSize",this.container).html(this.getScaleDescription()))},onSelectionChanged:function(e){var t=e.selectionMinimum,n=e.selectionMaximum;if(isNaN(t)||isNaN(n)||t===n){this.selectAll();return}this.isEntireRangeSelected=!1,this.selectAllLink.removeClass("disabled"),this.zoomInLink.removeClass("disabled");if(t!==this._selectedEarliestTime||n!==this._selectedLatestTime)this._selectedEarliestTime=t,this._selectedLatestTime=n,this.trigger("selectionChanged",{earliestTime:t,latestTime:n})},onResizeStop:function(e,t){r(e.target).width("100%"),this.setParam("height",t.size.height+"px")},_passTimeRangeToParent:function(e){if(!this.model)return;var t={"dispatch.earliest_time":e.getEarliestTimeTerms(),"dispatch.latest_time":e.getLatestTimeTerms(),"display.events.timelineEarliestTime":"","display.events.timelineLatestTime":""};this.model.report.entry.content.set(t)},_hasCanvas:function(){var e=document.createElement("canvas");if(!e)return!1;if(typeof e.getContext!="function")return!1;var t=e.getContext("2d");return t?!0:!1},formatTooltip:function(e,t,n,r,i){var s=new v(e,t),o=f(h(l(f("%(eventCount)s event %(timeRangeString)s"),f("%(eventCount)s events %(timeRangeString)s"),i),{eventCount:a.format_decimal(i),timeRangeString:s.toConciseString()}));return o},formatSimpleString:function(e){return f(e)},formatNumericString:function(e,t,n){return h(l(e,t,n),this.formatNumber(n))},formatNumber:function(e){var t=Math.abs(e);return t>0&&(t<.001||t>=1e9)?a.format_scientific(e,"##0E0"):a.format_decimal(e)},formatDate:function(e,t,n){if(n){var r=this._CUSTOM_DATE_FORMATS[n];if(r){var i=locale_name();r[i]?n=r[i]:locale_uses_day_before_month()&&r.day_before_month&&(n=r.day_before_month)}}return a.format_date(this.epochToDateTime(e,t),n)},formatTime:function(e,t,n){return n=="full"?a.format_time_microseconds(this.epochToDateTime(e,t),n):a.format_time(this.epochToDateTime(e,t),n)},formatDateTime:function(e,t,n,r){return r=="full"?a.format_datetime_microseconds(this.epochToDateTime(e,t),n,r):a.format_datetime(this.epochToDateTime(e,t),n,r)},epochToDateTime:function(e,t){var n=new Date(Math.floor((e+t)*1e3)),r=new DateTime({date:n,year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),microsecond:n.getUTCMilliseconds()*1e3});return r.weekday=function(){var e=this.date.getUTCDay()-1;return e<0&&(e=6),e},r},template:'            <div class="format-timeline dropdown pull-left">                <a href="#" class="dropdown-toggle btn-pill"><%- formatLabel %><span class="caret"></span></a>                <div class="dropdown-menu dropdown-menu-selectable dropdown-menu-narrow" style="top: 26px; margin-left: -86px;">                    <div class="arrow" style="margin-left: -10px;"></div>                    <ul class="format-timeline-view">                        <li class="format-timeline-hidden"><a href="#"><%- hiddenLabel %></a></li>                        <li class="format-timeline-compact"><a href="#"><%- compactLabel %></a></li>                        <li class="format-timeline-full"><a href="#"><%- fullLabel %></a></li>                    </ul>                    <ul class="format-timeline-scale">                        <li class="format-timeline-linear"><a href="#"><%- linearLabel %></a></li>                        <li class="format-timeline-log"><a href="#"><%- logLabel %></a></li>                    </ul>                </div>            </div>            <div class="controlLinks noData noSelection">                <a href="#" class="zoomOut disabled btn-pill"><span class="icon-minus"></span> <%- zoomOutLabel %></a>                <a href="#" class="zoomIn disabled btn-pill"><span class="icon-plus"></span> <%- zoomInLabel %></a>                <a href="#" class="selectAll disabled btn-pill"><span class="icon-x"></span> <%- deselectLabel %></a>                <span class="bucketSize pull-right"></span>            </div>            <div class="timelineContainer" style="width:<%- width %>; height:<%- height %>; <%- wrapperStyle %>"></div>        '},{DEFAULT_PROPERTY_VALUES:S});return T.CanvasTimeline=function(){var e=function(e){this.initialize(e)};return e.prototype={initialize:function(e){this.module=e,this.onPrintStart=this.onPrintStart.bind(this),e.onDataUpdated=e.onDataUpdated.bind(e),e.onSelectionChanged=e.onSelectionChanged.bind(e),e.zoomIn=e.zoomIn.bind(e),r(document).bind("PrintStart",this.onPrintStart),this._timeline=new w(c.make_url("/splunkd/__raw/services"),""),this._timeline.externalInterface.formatTooltip=e.formatTooltip.bind(e),this._timeline.externalInterface.formatSimpleString=e.formatSimpleString.bind(e),this._timeline.externalInterface.formatNumericString=e.formatNumericString.bind(e),this._timeline.externalInterface.formatNumber=e.formatNumber.bind(e),this._timeline.externalInterface.formatDate=e.formatDate.bind(e),this._timeline.externalInterface.formatTime=e.formatTime.bind(e),this._timeline.externalInterface.formatDateTime=e.formatDateTime.bind(e),this._timeline.set("timeZone",c.getConfigValue("SERVER_ZONEINFO")),this._timeline.set("enableChartClick",!0),this._timeline.addEventListener("updated",e.onDataUpdated),this._timeline.addEventListener("selectionChanged",e.onSelectionChanged),this._timeline.addEventListener("chartDoubleClicked",e.zoomIn),c.normalizeBoolean(e.getParam("minimalMode"))&&this._timeline.set("minimalMode",!0),e.isTimelineShowing()&&this._timeline.appendTo(r(".timelineContainer",e.container)),c.normalizeBoolean(e.getParam("enableResize"))&&e.enableResizable(),e.onContextChange(),e.update()},dispose:function(){this._timeline&&(this._timeline.removeEventListener("updated",this.module.onDataUpdated),this._timeline.removeEventListener("selectionChanged",this.module.onSelectionChanged),this._timeline.removeEventListener("chartDoubleClicked",this.module.zoomIn),this._timeline.dispose(),this._timeline=null),r(document).unbind("PrintStart",this.onPrintStart)},update:function(){if(!this._timeline)return;return this._timeline.update()},setJobID:function(e){if(!this._timeline)return;this._timeline.set("jobID",e)},setBucketCount:function(e){if(!this._timeline)return;this._timeline.set("bucketCount",e)},setMinimalMode:function(e){if(!this._timeline)return;this._timeline.set("minimalMode",e)},setScaleY:function(e){if(!this._timeline)return;this._timeline.set("scaleY",e)},setSelectionMinimum:function(e){if(!this._timeline)return;this._timeline.set("selectionMinimum",e)},setSelectionMaximum:function(e){if(!this._timeline)return;this._timeline.set("selectionMaximum",e)},getViewMinimum:function(){if(!this._timeline)return;return this._timeline.get("viewMinimum")},getViewMaximum:function(){if(!this._timeline)return;return this._timeline.get("viewMaximum")},getSelectedBuckets:function(){if(!this._timeline)return;return this._timeline.getSelectedBuckets()},getTimelineScale:function(){if(!this._timeline)return;return this._timeline.get("timelineScale")},hide:function(){if(!this._timeline)return;this._timeline.remove()},show:function(){if(!this._timeline)return;this._timeline.appendTo(r(".timelineContainer",n.container)),this._timeline.updateSize(),this._timeline.validate(),r(".ui-resizable-handle",n.container).appendTo(r(".timelineContainer",n.container))},onPrintStart:function(){if(!this._timeline)return;this._timeline.updateSize(),this._timeline.validate()}},e}(),T.FlashTimeline=function(){var e=0,t=function(e){this.initialize(e)};return t.prototype={initialize:function(t){this.module=t,this.onPrintStart=this.onPrintStart.bind(this),this.onPrintEnd=this.onPrintEnd.bind(this),this.id=++e,this.swfObjectId="swfObject_"+this.id,this.bridge=new g(this.swfObjectId),this.minVersion=c.getConfigValue("FLASH_MAJOR_VERSION")+"."+c.getConfigValue("FLASH_MINOR_VERSION")+"."+c.getConfigValue("FLASH_REVISION_VERSION"),this.initializeBridge(),s.hasFlashPlayerVersion(this.minVersion)?this.addObjectStructure():this.showFlashError(),r(document).bind("PrintStart",this.onPrintStart),r(document).bind("PrintEnd",this.onPrintEnd)},dispose:function(){this._isDisposed=!0,this.bridge.close(),r(document).unbind("PrintStart",this.onPrintStart),r(document).unbind("PrintEnd",this.onPrintEnd)},update:function(){return this.callBridgeMethod("update")},setJobID:function(e){this.setBridgeProperty("jobID",e)},setBucketCount:function(e){this.callBridgeMethod("setValue","data.count",e)},setMinimalMode:function(e){this.callBridgeMethod("setValue","minimalMode",e)},setScaleY:function(e){this.callBridgeMethod("setValue","axisY.scale",e)},setSelectionMinimum:function(e){this.setBridgeProperty("selectionMinimum",e)},setSelectionMaximum:function(e){this.setBridgeProperty("selectionMaximum",e)},getViewMinimum:function(){return this.getBridgeProperty("viewMinimum")},getViewMaximum:function(){return this.getBridgeProperty("viewMaximum")},getSelectedBuckets:function(){return this.callBridgeMethod("getSelectedBuckets")},getTimelineScale:function(){return this.getBridgeProperty("timelineScale")},hide:function(){var e=this.module;e.logger.warn("closing down JABridge connection"),this.bridge.close(),r(this.bridge.getFlashElement(this.swfObjectId)).css("display","none")},show:function(){var e=this.module;r(this.bridge.getFlashElement(this.swfObjectId)).css("display",""),e.logger.warn("bringing back JABridge connection"),this.connectBridge(!0)},onPrintStart:function(){var e=this.module;if(E.isIE())return;var t=this.callBridgeMethod("getSnapshot");if(t){var n=document.createElement("img");n.setAttribute("width",t.width),n.setAttribute("height",t.height),e.hideTimeline("onPrintStart"),r(".timelineContainer",e.container)[0].appendChild(n).src=t.data}},onPrintEnd:function(){var e=this.module;if(E.isIE())return;r(".timelineContainer img",e.container).remove(),e.showTimeline("onPrintStart")},connectBridge:function(e){if(this._isDisposed)return;e||(e=!1),this.bridge.connect(function(){this.onConnect(e)}.bind(this),this.onClose.bind(this))},initializeBridge:function(){var e=this.module;this.bridge.addMethod("formatTooltip",e.formatTooltip.bind(e),["earliestTime","latestTime","earliestOffset","latestOffset","eventCount"],"String"),this.bridge.addMethod("formatSimpleString",e.formatSimpleString.bind(e),["str"],"String"),this.bridge.addMethod("formatNumericString",e.formatNumericString.bind(e),["strSingular","strPlural","num"],"String"),this.bridge.addMethod("formatNumber",e.formatNumber.bind(e),["num"],"String"),this.bridge.addMethod("formatDate",e.formatDate.bind(e),["time","timeZoneOffset","dateFormat"],"String"),this.bridge.addMethod("formatTime",e.formatTime.bind(e),["time","timeZoneOffset","timeFormat"],"String"),this.bridge.addMethod("formatDateTime",e.formatDateTime.bind(e),["time","timeZoneOffset","dateFormat","timeFormat"],"String")},onSWFReady:function(e){var t=this.module;e.success?(t.isTimelineShowing()?this.connectBridge(!1):r(this.bridge.getFlashElement(this.swfObjectId)).css("display","none"),c.normalizeBoolean(t.getParam("enableResize"))&&t.enableResizable()):t.logger.error("The embedding of the SWF was unsuccessful.")},addObjectStructure:function(){var e=this.module,t="swfContainer_"+this.id,n="";e.getParam("swfFile").substring(0,1)=="/"?n=c.make_url(e.getParam("swfFile")):n=c.make_url("/static/flash/"+e.getParam("swfFile"));var i=!1,o=c.make_url("/static");o.charAt(o.length-1)=="/"&&(o=o.substring(0,o.length-1));var u={staticPath:o,hostPath:c.make_url("/splunkd/__raw/services"),basePath:""},a={wmode:"opaque",allowFullScreen:"true"},f=e.getCSSColor([e.container],"background-color");f&&(a.bgcolor=f);var l={id:this.swfObjectId,name:this.swfObjectId};r(".timelineContainer",e.container).append("<div id="+t+"></div>"),s.embedSWF(n,t,"100%","100%",this.minVersion,i,u,a,l,this.onSWFReady.bind(this))},showFlashError:function(){var e=this.module,t=f("Splunk requires a newer version of Flash.");e.logger.warn(t);var n=r("div.timelineContainer",e.container)[0];n.innerHTML=h('<p class="error">%s (Minimum version: %s.%s.%s) <a href="http://get.adobe.com/flashplayer/" target="_blank" class="spl-icon-external-link-xsm">Download Flash Player</a></p>',t,c.getConfigValue("FLASH_MAJOR_VERSION"),c.getConfigValue("FLASH_MINOR_VERSION"),c.getConfigValue("FLASH_REVISION_VERSION"))},onClose:function(){var e=this.module;e.logger.warn("The JABridge connection was closed with an id of",this.bridge.id()),this._isBridgeConnected=!1},onConnect:function(e){var t=this.module;this._isBridgeConnected=!0,this.setBridgeProperty("enableChartClick",!0),this.setBridgeProperty("enableOpenAsImage",!E.isIE()),this.setBridgeProperty("timeZone",c.getConfigValue("SERVER_ZONEINFO")),this.addBridgeEventListener("chartDoubleClicked",t.zoomIn.bind(t)),this.addBridgeEventListener("selectionChanged",t.onSelectionChanged.bind(t)),this.addBridgeEventListener("updated",t.onDataUpdated.bind(t)),this.addBridgeEventListener("openAsImage",this.onOpenAsImage.bind(this)),c.normalizeBoolean(t.getParam("minimalMode"))&&this.callBridgeMethod("setValue","minimalMode","true"),this.setPresentation(),t.onContextChange(),t.update()},onOpenAsImage:function(e){var t=e.snapshot;m.open(t.data,this.swfObjectId,{height:t.height+16,width:t.width+16})},setPresentation:function(){var e=this.module,t=[{css:"color",flash:"fontColor"},{css:"background-color",flash:"backgroundColor"}];for(var n=0;n<t.length;n++){var r=t[n],i=e.getCSSColor([e.container],r.css);i&&this.callBridgeMethod("setValue",r.flash,i.replace("#","0x"))}},getBridgeProperty:function(e){if(!this._isBridgeConnected)return undefined;try{return this.bridge.getProperty(e)}catch(t){return this.module.logger.error("externalInterface/jabridge exception on getProperty('",e,"')",t),undefined}},setBridgeProperty:function(e,t){if(!this._isBridgeConnected)return;try{this.bridge.setProperty(e,t)}catch(n){this.module.logger.error("externalInterface/jabridge exception on setProperty('",e,"', '",t,"')",n)}},callBridgeMethod:function(e){if(!this._isBridgeConnected)return undefined;try{return this.bridge.callMethod.apply(this.bridge,arguments)}catch(t){return this.module.logger.error("externalInterface/jabridge exception on callMethod('",e,"')",t),undefined}},addBridgeEventListener:function(e,t){if(!this._isBridgeConnected)return;try{return this.bridge.addEventListener(e,t)}catch(n){this.module.logger.error("externalInterface/jabridge exception on addEventListener('",e,"')",n)}}},t}(),T}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/timeline.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/timelineview",["require","exports","module","underscore","backbone","./mvc","./basesplunkview","views/shared/CanvasTimeline","splunk/time/DateTime","splunk/time/SimpleTimeZone","css!../css/timeline"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=e("./mvc"),o=e("./basesplunkview"),u=e("views/shared/CanvasTimeline"),a=e("splunk/time/DateTime"),f=e("splunk/time/SimpleTimeZone");e("css!../css/timeline");var l=o.extend({moduleId:n.id,className:"splunk-timeline",options:{managerid:null,data:"timeline",minimize:!1,value:undefined,"default":undefined},initialize:function(){var e=this;this.configure(),this.settings.enablePush("value");var t=this._model={searchJob:new i.Model,report:new i.Model};t.searchJob.entry={content:new i.Model},t.report.entry={content:new i.Model},this._state=t.report.entry.content,t.searchJob.isNew=function(){return!1},this.timeline=new u({model:t}),this.timeline.update=function(){},this._onDefaultChange(),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.settings.on("change:minimize",this._onMinimizeChange,this),this.settings.on("change:value",this._onValueChange,this),this.settings.on("change:default",this._onDefaultChange,this),this._state.on("change:dispatch.earliest_time change:dispatch.latest_time",r.debounce(this._onTimeRangeChange),this)},_onDefaultChange:function(e,t,n){var i=this.settings.previous("default"),s=this.settings.get("default"),o=this.settings.get("value");s!==undefined&&(r.isEqual(o,i)||o===undefined)&&this.val(s)},onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.resultsModel&&(this.resultsModel.off(null,null,this),this.resultsModel.destroy(),this.resultsModel=null);if(!t)return;this.manager=t,this.resultsModel=this.manager.data(this.settings.get("data"),{condition:function(e){var t=e.get("data");if(!t)return!1;var n=t.statusBuckets,r=t.eventCount;return n>0&&r>0}}),t.on("search:start",this._onSearchStart,this),t.on("search:cancelled",this._onSearchCancelled,this),this.resultsModel.on("data",this._onDataChanged,this),t.replayLastSearchEvent(this)},render:function(){this.$el.append(this.timeline.render().el);var e=this;return r.defer(function(){e._onMinimizeChange()}),this},clearTimeline:function(){this.timeline.resetUI();var e=this.timeline._timeline._timeline;e._updateTimelineData({buckets:[],event_count:0,cursor_time:0})},_onValueChange:function(e,t){this.trigger("change",t,this);var n=this.settings.get("value");if(r.isEqual(n,t))return;t!==undefined&&this.timeline.setSelectionRange(t.earliest_time,t.latest_time,!0)},_onMinimizeChange:function(){this.settings.get("minimize")?this.timeline.maximizeCompact(!1):this.timeline.maximizeFull(!1)},_onDataChanged:function(){var e=this.resultsModel.data(),t={buckets:[],cursorTime:new a(e.cursor_time),eventCount:e.event_count,earliestOffset:e.earliestOffset||0};t.cursorTime&&(t.cursorTime=t.cursorTime.toTimeZone(new f(t.earliestOffset)));for(var n=0;n<e.buckets.length;n++){var r=e.buckets[n],i={earliestTime:new a(r.earliest_time),duration:r.duration,eventCount:r.total_count,eventAvailableCount:r.available_count,isComplete:r.is_finalized,buckets:[]};isNaN(i.duration)&&(i.duration=0),isNaN(i.earliestOffset)&&(i.earliestOffset=0),isNaN(i.latestOffset)&&(i.latestOffset=0),i.earliestTime&&(i.latestTime=new a(i.earliestTime.getTime()+i.duration)),i.earliestTime&&(i.earliestTime=i.earliestTime.toTimeZone(new f(r.earliest_time_offset))),i.latestTime&&(i.latestTime=i.latestTime.toTimeZone(new f(r.latest_time_offset))),t.buckets.push(i)}var s=this.timeline._timeline._timeline;s._updateTimelineData(t),this.timeline.onDataUpdated({updateCount:Number.MAX_VALUE})},_onSearchStart:function(){this.clearTimeline()},_onSearchCancelled:function(){this.clearTimeline()},_onTimeRangeChange:function(e,t,n){(!n||n&&!n._self)&&this.settings.set("value",this._getTimeRange())},val:function(e){return arguments.length===0?this.settings.get("value"):e!==this.settings.get("value")?this._setTimeRange(e):e},_setTimeRange:function(e){return this.settings.set("value",e),e},_getTimeRange:function(){return{earliest_time:this._state.get("dispatch.earliest_time"),latest_time:this._state.get("dispatch.latest_time")}}});return l}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer('.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:"";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\n.splunk-charting-Timeline .splunk-charting-label{cursor:default;}\n.splunk-charting-Timeline .splunk-charting-TimeAxisLabels .splunk-charting-label{margin-left:5px;margin-right:5px;margin-top:4px;margin-bottom:4px;}\n.splunk-charting-Timeline .splunk-charting-NumericAxisLabels .splunk-charting-label{margin-left:5px;margin-right:5px;margin-top:3px;margin-bottom:3px;}\n.splunk-charting-Timeline .splunk-charting-ClickDragRangeMarker .splunk-charting-label,.splunk-charting-Timeline .splunk-charting-CursorMarker .splunk-charting-label{color:#000000;margin-left:7px;margin-right:7px;}\n.splunk-charting-Timeline .splunk-charting-Tooltip .splunk-charting-label{color:#ffffff;margin-left:7px;margin-right:7px;margin-top:4px;margin-bottom:4px;}\n')}),requirejs.s.contexts._.nextTick=requirejs.nextTick;
