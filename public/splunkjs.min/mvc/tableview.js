define("views/shared/results_table/ResultsTableHeader",["jquery","underscore","module","views/Base"],function(e,t,n,r){return r.extend({moduleId:n.id,tagName:"thead",initialize:function(){r.prototype.initialize.apply(this,arguments),t.defaults(this.options,{sortableFields:!0})},render:function(){var e={};t(this.options.columnTypes).each(function(t,n){e[n]=this.columnTypeToClassName(t)},this);var n=this.compiledTemplate({rowExpansion:this.options.rowExpansion,rowNumbers:this.options.rowNumbers,fields:this.options.fields,sortKeyAttribute:this.options.sortKeyAttribute,sortableFields:this.options.sortableFields,columnClasses:e});return this.$el.html(n),this},highlightColumn:function(e){this.options.rowExpansion&&e++,this.options.rowNumbers&&e++,this.$("th").eq(e).addClass("highlighted")},unHighlightColumn:function(e){this.options.rowExpansion&&e++,this.options.rowNumbers&&e++,this.$("th").eq(e).removeClass("highlighted")},columnTypeToClassName:function(e){return e==="number"?"numeric":e==="timestamp"?"timestamp":""},template:'            <tr class="">                <% if(rowExpansion) { %>                    <th class="col-info" style="width: 15px;"><i class="icon-info"></i></th>                <% } %>                <% if(rowNumbers) { %>                    <th class="row-number"></th>                <% } %>                <% _(fields).each(function(field) { %>                    <th class="<%- sortableFields ? "sorts": "none" %> <%- columnClasses[field] %>" <%- sortKeyAttribute %>="<%- field %>">                    <a href="#"><%- field %><i class="icon-sorts "></i></a>                    </th>                <% }) %>            </tr>        '})}),define("views/shared/results_table/renderers/BaseCellRenderer",["require","exports","module","underscore","backbone"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=function(){this.initialize.apply(this,arguments)};return r.extend(s.prototype,i.Events,{initialize:function(){},canRender:function(e){throw new Error("Must implement method canRender.")},setup:function(e,t){},teardown:function(e,t){},render:function(e,t){}}),s.prototype.constructor=s,s.extend=i.Model.extend,s}),define("views/shared/results_table/renderers/BaseRowExpansionRenderer",["require","exports","module","jquery","underscore","backbone"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("backbone"),o=function(){this.initialize.apply(this,arguments)};return i.extend(o.prototype,s.Events,{initialize:function(){},canRender:function(e){throw new Error("Must implement method canRender.")},createContainer:function(e){return r('<td colspan="'+e.colspan+'"></td>')},setup:function(e,t){},teardown:function(e,t){},render:function(e,t){}}),o.prototype.constructor=o,o.extend=s.Model.extend,o}),define("views/shared/results_table/ResultsTableRow",["jquery","underscore","module","views/Base","./renderers/BaseCellRenderer","./renderers/BaseRowExpansionRenderer"],function(e,t,n,r,i,s){var o=r.extend({moduleId:n.id,tagName:"tr",render:function(){return this.$el.attr(o.ROW_INDEX_ATTR,this.options.rowIndex),this.$el.addClass(this.options.rowIndex%2?"even":"odd"),this.options.rowExpansion&&(this._rowExpansionToggle=e('<td rowspan="1" class="expands"><a href="#"><i class="icon-triangle-right-small"></i></a></td>').addClass(o.ROW_EXPANSION_CLASSNAME).appendTo(this.$el)),this.options.hasOwnProperty("rowNumber")&&this.$el.append(e('<td class="row-number"></td>').text(this.options.rowNumber)),this.generateCells(),this},remove:function(){return this.collapseRow(),this.disposeCells(),r.prototype.remove.call(this)},generateCells:function(){this.disposeCells();var n=this._renderedCells=[],r,s=this.getCellRenderers(),u;t(this.options.cells).each(function(t){var a=e("<td></td>");a.attr(o.CELL_INDEX_ATTR,t.index),r={$td:a};for(var f=0,l=s.length;f<l;f++){u=s[f];if(u instanceof i){if(u.canRender(t)){u.setup(a,t),u.render(a,t),r.cellData=t,r.cellRenderer=u;break}}else if(typeof u=="function"&&u(a,t))break}this.$el.append(a),n.push(r)},this)},disposeCells:function(){if(!this._renderedCells)return;t(this._renderedCells).each(function(e){e.cellRenderer&&e.cellRenderer.teardown(e.$td,e.cellData),e.$td.remove()},this),this._renderedCells=null},getCellRenderers:function(){return this.options.table?this.options.table.getCellRenderers():[]},expandRow:function(t,n){if(!(t instanceof s))throw new Error("Parameter rowExpansionRenderer must be an instance of views/shared/results_table/renderers/BaseRowExpansionRenderer.");this.collapseRow(),this.$el.addClass("expanded-row"),this._rowExpansionToggle&&(e("i",this._rowExpansionToggle).removeClass("icon-triangle-right-small").addClass("icon-triangle-down-small"),this._rowExpansionToggle.attr("rowspan",2)),this._rowExpansionData=n,this._rowExpansionContainerTD=e(t.createContainer(this._rowExpansionData)),this._rowExpansionContainerTR=e("<tr></tr>").addClass("expanded-content-row").addClass(this.options.rowIndex%2?"even":"odd").append(this._rowExpansionContainerTD),this.$el.after(this._rowExpansionContainerTR),this._rowExpansionRenderer=t,this._rowExpansionRenderer.setup(this._rowExpansionContainerTD,this._rowExpansionData),this._rowExpansionRenderer.render(this._rowExpansionContainerTD,this._rowExpansionData)},collapseRow:function(){if(!this._rowExpansionRenderer)return;this._rowExpansionRenderer.teardown(this._rowExpansionContainerTD,this._rowExpansionData),this._rowExpansionRenderer=null,this._rowExpansionContainerTR.remove(),this._rowExpansionContainerTR=null,this._rowExpansionContainerTD=null,this._rowExpansionData=null,this._rowExpansionToggle&&(this._rowExpansionToggle.attr("rowspan",1),e("i",this._rowExpansionToggle).removeClass("icon-triangle-down-small").addClass("icon-triangle-right-small")),this.$el.removeClass("expanded-row")},getRowData:function(){var n=e("td",this.$el).length-(this._rowExpansionToggle?1:0);return t.extend({},this.options,{colspan:n})},highlightRow:function(){this.$el.addClass("highlighted")},unHighlightRow:function(){this.$el.removeClass("highlighted")},highlightCell:function(e,t){var n=this.options.hasOwnProperty("rowNumber"),r=!!this.options.rowExpansion,i=this.$("td"),s=this.options.numRowSplits,o=(n?1:0)+(r?1:0),u=i.slice(0,s+o);u.addClass("highlighted"),e.addClass("highlighted")},unHighlightCell:function(e,t){var n=this.options.hasOwnProperty("rowNumber"),r=!!this.options.rowExpansion,i=this.$("td"),s=this.options.numRowSplits,o=(n?1:0)+(r?1:0),u=i.slice(0,s+o);u.removeClass("highlighted"),e.removeClass("highlighted")}},{ROW_INDEX_ATTR:"data-row-index",CELL_INDEX_ATTR:"data-cell-index",ROW_EXPANSION_CLASSNAME:"row-expansion-toggle",MV_SUBCELL_CLASSNAME:"multivalue-subcell",MV_INDEX_ATTR:"data-mv-index"});return o}),define("helpers/grid/RowIterator",["underscore","backbone"],function(e,t){var n=function(){return!1},r=function(t){t=t||{},this.offset=parseInt(t.offset,10)||0,this.expandedTest=t.expandedTest||n,this.eachRow=e(this.eachRow).bind(this)};return r.prototype={eachRow:function(n,r,i){i=i||null;var s=function(e,t){var n=t+this.offset+1,s=this.expandedTest(e,t,n);r.apply(i,[e,t,n,s])};n instanceof t.Collection?n.each(s,this):e(n).each(s,this)}},r}),define("helpers/Printer",["jquery","backbone","splunk.print"],function(e,t,n){var r=e.extend({},t.Events,{PRINT_START:n.prototype.START_EVENT,PRINT_END:n.prototype.END_EVENT,printPage:function(){e(document).trigger(n.prototype.PAGE_EVENT)},onDomReady:function(){var t=n.getInstance();e(document).on(n.prototype.START_EVENT,function(){r.trigger(r.PRINT_START)}),e(document).on(n.prototype.END_EVENT,function(){r.trigger(r.PRINT_END)})}});return e(function(){r.onDomReady()}),r}),function(e,t,n){(function(e){typeof define=="function"&&define.amd?define("jquery.sparkline",["jquery"],e):jQuery&&!jQuery.fn.sparkline&&e(jQuery)})(function(r){var i={},s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j=0;s=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:n,normalRangeMax:n,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:n,chartRangeMax:n,chartRangeMinX:n,chartRangeMaxX:n,tooltipFormat:new u('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:n,nullColor:n,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:n,chartRangeMin:n,chartRangeClip:!1,colorMap:n,tooltipFormat:new u('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new u('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:n,thresholdValue:0,chartRangeMax:n,chartRangeMin:n,chartRangeClip:!1,tooltipFormat:new u("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:n,tooltipFormat:new u("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new u('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:n,targetColor:"#4a2",chartRangeMax:n,chartRangeMin:n,tooltipFormat:new u("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},O='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',o=function(){var e,t;return e=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(e.prototype=r.extend(new arguments[0],arguments[arguments.length-1]),e._super=arguments[0].prototype):e.prototype=arguments[arguments.length-1],arguments.length>2&&(t=Array.prototype.slice.call(arguments,1,-1),t.unshift(e.prototype),r.extend.apply(r,t))):e.prototype=arguments[0],e.prototype.cls=e,e},r.SPFormatClass=u=o({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(e,t){this.format=e,this.fclass=t},render:function(e,t,r){var i=this,s=e,o,u,a,f,l;return this.format.replace(this.fre,function(){var e;return u=arguments[1],a=arguments[3],o=i.precre.exec(u),o?(l=o[2],u=o[1]):l=!1,f=s[u],f===n?"":a&&t&&t[a]?(e=t[a],e.get?t[a].get(f)||f:t[a][f]||f):(p(f)&&(r.get("numberFormatter")?f=r.get("numberFormatter")(f):f=y(f,l,r.get("numberDigitGroupCount"),r.get("numberDigitGroupSep"),r.get("numberDecimalMark"))),f)})}}),r.spformat=function(e,t){return new u(e,t)},a=function(e,t,n){return e<t?t:e>n?n:e},f=function(e,n){var r;return n===2?(r=t.floor(e.length/2),e.length%2?e[r]:(e[r-1]+e[r])/2):e.length%2?(r=(e.length*n+n)/4,r%1?(e[t.floor(r)]+e[t.floor(r)-1])/2:e[r-1]):(r=(e.length*n+2)/4,r%1?(e[t.floor(r)]+e[t.floor(r)-1])/2:e[r-1])},l=function(e){var t;switch(e){case"undefined":e=n;break;case"null":e=null;break;case"true":e=!0;break;case"false":e=!1;break;default:t=parseFloat(e),e==t&&(e=t)}return e},c=function(e){var t,n=[];for(t=e.length;t--;)n[t]=l(e[t]);return n},h=function(e,t){var n,r,i=[];for(n=0,r=e.length;n<r;n++)e[n]!==t&&i.push(e[n]);return i},p=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},y=function(e,t,n,i,s){var o,u;e=(t===!1?parseFloat(e).toString():e.toFixed(t)).split(""),o=(o=r.inArray(".",e))<0?e.length:o,o<e.length&&(e[o]=s);for(u=o-n;u>0;u-=n)e.splice(u,0,i);return e.join("")},d=function(e,t,n){var r;for(r=t.length;r--;){if(n&&t[r]===null)continue;if(t[r]!==e)return!1}return!0},v=function(e){var t=0,n;for(n=e.length;n--;)t+=typeof e[n]=="number"?e[n]:0;return t},g=function(e){return r.isArray(e)?e:[e]},m=function(t){var n,r;if(e.createStyleSheet)try{e.createStyleSheet().cssText=t;return}catch(i){r=!0}n=e.createElement("style"),n.type="text/css",e.getElementsByTagName("head")[0].appendChild(n),r?e.styleSheets[e.styleSheets.length-1].cssText=t:n[typeof e.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=t},r.fn.simpledraw=function(t,i,s,o){var u,a;if(s&&(u=this.data("_jqs_vcanvas")))return u;if(r.fn.sparkline.canvas===!1)return!1;if(r.fn.sparkline.canvas===n){var f=e.createElement("canvas");if(!f.getContext||!f.getContext("2d")){if(!e.namespaces||!!e.namespaces.v)return r.fn.sparkline.canvas=!1,!1;e.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),r.fn.sparkline.canvas=function(e,t,n,r){return new H(e,t,n)}}else r.fn.sparkline.canvas=function(e,t,n,r){return new P(e,t,n,r)}}return t===n&&(t=r(this).innerWidth()),i===n&&(i=r(this).innerHeight()),u=r.fn.sparkline.canvas(t,i,this,o),a=r(this).data("_jqs_mhandler"),a&&a.registerCanvas(u),u},r.fn.cleardraw=function(){var e=this.data("_jqs_vcanvas");e&&e.reset()},r.RangeMapClass=b=o({init:function(e){var t,n,r=[];for(t in e)e.hasOwnProperty(t)&&typeof t=="string"&&t.indexOf(":")>-1&&(n=t.split(":"),n[0]=n[0].length===0?-Infinity:parseFloat(n[0]),n[1]=n[1].length===0?Infinity:parseFloat(n[1]),n[2]=e[t],r.push(n));this.map=e,this.rangelist=r||!1},get:function(e){var t=this.rangelist,r,i,s;if((s=this.map[e])!==n)return s;if(t)for(r=t.length;r--;){i=t[r];if(i[0]<=e&&i[1]>=e)return i[2]}return n}}),r.range_map=function(e){return new b(e)},w=o({init:function(e,t){var n=r(e);this.$el=n,this.options=t,this.currentPageX=0,this.currentPageY=0,this.el=e,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!t.get("disableTooltips"),this.highlightEnabled=!t.get("disableHighlight")},registerSparkline:function(e){this.splist.push(e),this.over&&this.updateDisplay()},registerCanvas:function(e){var t=r(e.canvas);this.canvas=e,this.$canvas=t,t.mouseenter(r.proxy(this.mouseenter,this)),t.mouseleave(r.proxy(this.mouseleave,this)),t.click(r.proxy(this.mouseclick,this))},reset:function(e){this.splist=[],this.tooltip&&e&&(this.tooltip.remove(),this.tooltip=n)},mouseclick:function(e){var t=r.Event("sparklineClick");t.originalEvent=e,t.sparklines=this.splist,this.$el.trigger(t)},mouseenter:function(t){r(e.body).unbind("mousemove.jqs"),r(e.body).bind("mousemove.jqs",r.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new E(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){r(e.body).unbind("mousemove.jqs");var t=this.splist,n=t.length,i=!1,s,o;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(o=0;o<n;o++)s=t[o],s.clearRegionHighlight()&&(i=!0);i&&this.canvas.render()},mousemove:function(e){this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,this.tooltip&&this.tooltip.updatePosition(e.pageX,e.pageY),this.updateDisplay()},updateDisplay:function(){var e=this.splist,t=e.length,n=!1,i=this.$canvas.offset(),s=this.currentPageX-i.left,o=this.currentPageY-i.top,u,a,f,l,c;if(!this.over)return;for(f=0;f<t;f++)a=e[f],l=a.setRegionHighlight(this.currentEl,s,o),l&&(n=!0);if(n){c=r.Event("sparklineRegionChange"),c.sparklines=this.splist,this.$el.trigger(c);if(this.tooltip){u="";for(f=0;f<t;f++)a=e[f],u+=a.getCurrentRegionTooltip();this.tooltip.setContent(u)}this.disableHighlight||this.canvas.render()}l===null&&this.mouseleave()}}),E=o({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var n=t.get("tooltipClassname","jqstooltip"),i=this.sizeStyle,s;this.container=t.get("tooltipContainer")||e.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),r("#jqssizetip").remove(),r("#jqstooltip").remove(),this.sizetip=r("<div/>",{id:"jqssizetip",style:i,"class":n}),this.tooltip=r("<div/>",{id:"jqstooltip","class":n}).appendTo(this.container),s=this.tooltip.offset(),this.offsetLeft=s.left,this.offsetTop=s.top,this.hidden=!0,r(window).unbind("resize.jqs scroll.jqs"),r(window).bind("resize.jqs scroll.jqs",r.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=r(window).scrollTop(),this.scrollLeft=r(window).scrollLeft(),this.scrollRight=this.scrollLeft+r(window).width(),this.updatePosition()},getSize:function(e){this.sizetip.html(e).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(e){if(!e){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(e),this.tooltip.html(e).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(e,t){if(e===n){if(this.mousex===n)return;e=this.mousex-this.offsetLeft,t=this.mousey-this.offsetTop}else this.mousex=e-=this.offsetLeft,this.mousey=t-=this.offsetTop;if(!this.height||!this.width||this.hidden)return;t-=this.height+this.tooltipOffsetY,e+=this.tooltipOffsetX,t<this.scrollTop&&(t=this.scrollTop),e<this.scrollLeft?e=this.scrollLeft:e+this.width>this.scrollRight&&(e=this.scrollRight-this.width),this.tooltip.css({left:e,top:t})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=n,r(window).unbind("resize.jqs scroll.jqs")}}),M=function(){m(O)},r(M),B=[],r.fn.sparkline=function(t,i){return this.each(function(){var s=new r.fn.sparkline.options(this,i),o=r(this),u,a;u=function(){var i,u,a,f,l,c,h;if(t==="html"||t===n){h=this.getAttribute(s.get("tagValuesAttribute"));if(h===n||h===null)h=o.html();i=h.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else i=t;u=s.get("width")==="auto"?i.length*s.get("defaultPixelsPerValue"):s.get("width");if(s.get("height")==="auto"){if(!s.get("composite")||!r.data(this,"_jqs_vcanvas"))f=e.createElement("span"),f.innerHTML="a",o.html(f),a=r(f).innerHeight()||r(f).height(),r(f).remove(),f=null}else a=s.get("height");s.get("disableInteraction")?l=!1:(l=r.data(this,"_jqs_mhandler"),l?s.get("composite")||l.reset():(l=new w(this,s),r.data(this,"_jqs_mhandler",l)));if(s.get("composite")&&!r.data(this,"_jqs_vcanvas")){r.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),r.data(this,"_jqs_errnotify",!0));return}c=new(r.fn.sparkline[s.get("type")])(this,i,s,u,a),c.render(),l&&l.registerSparkline(c)};if(r(this).html()&&!s.get("disableHiddenCheck")&&r(this).is(":hidden")||!r(this).parents("body").length){if(!s.get("composite")&&r.data(this,"_jqs_pending"))for(a=B.length;a;a--)B[a-1][0]==this&&B.splice(a-1,1);B.push([this,u]),r.data(this,"_jqs_pending",!0)}else u.call(this)})},r.fn.sparkline.defaults=s(),r.sparkline_display_visible=function(){var e,t,n,i=[];for(t=0,n=B.length;t<n;t++)e=B[t][0],r(e).is(":visible")&&!r(e).parents().is(":hidden")?(B[t][1].call(e),r.data(B[t][0],"_jqs_pending",!1),i.push(t)):!r(e).closest("html").length&&!r.data(e,"_jqs_pending")&&(r.data(B[t][0],"_jqs_pending",!1),i.push(t));for(t=i.length;t;t--)B.splice(i[t-1],1)},r.fn.sparkline.options=o({init:function(e,t){var n,s,o,u;this.userOptions=t=t||{},this.tag=e,this.tagValCache={},s=r.fn.sparkline.defaults,o=s.common,this.tagOptionsPrefix=t.enableTagOptions&&(t.tagOptionsPrefix||o.tagOptionsPrefix),u=this.getTagSetting("type"),u===i?n=s[t.type||o.type]:n=s[u],this.mergedOptions=r.extend({},o,n,t)},getTagSetting:function(e){var t=this.tagOptionsPrefix,r,s,o,u;if(t===!1||t===n)return i;if(this.tagValCache.hasOwnProperty(e))r=this.tagValCache.key;else{r=this.tag.getAttribute(t+e);if(r===n||r===null)r=i;else if(r.substr(0,1)==="["){r=r.substr(1,r.length-2).split(",");for(s=r.length;s--;)r[s]=l(r[s].replace(/(^\s*)|(\s*$)/g,""))}else if(r.substr(0,1)==="{"){o=r.substr(1,r.length-2).split(","),r={};for(s=o.length;s--;)u=o[s].split(":",2),r[u[0].replace(/(^\s*)|(\s*$)/g,"")]=l(u[1].replace(/(^\s*)|(\s*$)/g,""))}else r=l(r);this.tagValCache.key=r}return r},get:function(e,t){var r=this.getTagSetting(e),s;return r!==i?r:(s=this.mergedOptions[e])===n?t:s}}),r.fn.sparkline._base=o({disabled:!1,init:function(e,t,i,s,o){this.el=e,this.$el=r(e),this.values=t,this.options=i,this.width=s,this.height=o,this.currentRegion=n},initTarget:function(){var e=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),e))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(e,t){},setRegionHighlight:function(e,t,r){var i=this.currentRegion,s=!this.options.get("disableHighlight"),o;return t>this.canvasWidth||r>this.canvasHeight||t<0||r<0?null:(o=this.getRegion(e,t,r),i!==o?(i!==n&&s&&this.removeHighlight(),this.currentRegion=o,o!==n&&s&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==n?(this.removeHighlight(),this.currentRegion=n,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(e){},getCurrentRegionTooltip:function(){var e=this.options,t="",i=[],s,o,a,f,l,c,h,p,d,v,m,g,y,b;if(this.currentRegion===n)return"";s=this.getCurrentRegionFields(),m=e.get("tooltipFormatter");if(m)return m(this,e,s);e.get("tooltipChartTitle")&&(t+='<div class="jqs jqstitle">'+e.get("tooltipChartTitle")+"</div>\n"),o=this.options.get("tooltipFormat");if(!o)return"";r.isArray(o)||(o=[o]),r.isArray(s)||(s=[s]),h=this.options.get("tooltipFormatFieldlist"),p=this.options.get("tooltipFormatFieldlistKey");if(h&&p){d=[];for(c=s.length;c--;)v=s[c][p],(b=r.inArray(v,h))!=-1&&(d[b]=s[c]);s=d}a=o.length,y=s.length;for(c=0;c<a;c++){g=o[c],typeof g=="string"&&(g=new u(g)),f=g.fclass||"jqsfield";for(b=0;b<y;b++)if(!s[b].isNull||!e.get("tooltipSkipNull"))r.extend(s[b],{prefix:e.get("tooltipPrefix"),suffix:e.get("tooltipSuffix")}),l=g.render(s[b],e.get("tooltipValueLookups"),e),i.push('<div class="'+f+'">'+l+"</div>")}return i.length?t+i.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(e,n){var r=n.get("highlightColor"),i=n.get("highlightLighten"),s,o,u,f;if(r)return r;if(i){s=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e);if(s){u=[],o=e.length===4?16:1;for(f=0;f<3;f++)u[f]=a(t.round(parseInt(s[f+1],16)*o*i),0,255);return"rgb("+u.join(",")+")"}}return e}}),S={changeHighlight:function(e){var t=this.currentRegion,n=this.target,i=this.regionShapes[t],s;i&&(s=this.renderRegion(t,e),r.isArray(s)||r.isArray(i)?(n.replaceWithShapes(i,s),this.regionShapes[t]=r.map(s,function(e){return e.id})):(n.replaceWithShape(i,s),this.regionShapes[t]=s.id))},render:function(){var e=this.values,t=this.target,n=this.regionShapes,i,s,o,u;if(!this.cls._super.render.call(this))return;for(o=e.length;o--;){i=this.renderRegion(o);if(i)if(r.isArray(i)){s=[];for(u=i.length;u--;)i[u].append(),s.push(i[u].id);n[o]=s}else i.append(),n[o]=i.id;else n[o]=null}t.render()}},r.fn.sparkline.line=x=o(r.fn.sparkline._base,{type:"line",init:function(e,t,n,r,i){x._super.init.call(this,e,t,n,r,i),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(e,t,r){var i,s=this.regionMap;for(i=s.length;i--;)if(s[i]!==null&&t>=s[i][0]&&t<=s[i][1])return s[i][2];return n},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.yvalues[e]===null,x:this.xvalues[e],y:this.yvalues[e],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:e}},renderHighlight:function(){var e=this.currentRegion,t=this.target,r=this.vertices[e],i=this.options,s=i.get("spotRadius"),o=i.get("highlightSpotColor"),u=i.get("highlightLineColor"),a,f;if(!r)return;s&&o&&(a=t.drawCircle(r[0],r[1],s,n,o),this.highlightSpotId=a.id,t.insertAfterShape(this.lastShapeId,a)),u&&(f=t.drawLine(r[0],this.canvasTop,r[0],this.canvasTop+this.canvasHeight,u),this.highlightLineId=f.id,t.insertAfterShape(this.lastShapeId,f))},removeHighlight:function(){var e=this.target;this.highlightSpotId&&(e.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(e.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var e=this.values,n=e.length,r=this.xvalues,i=this.yvalues,s=this.yminmax,o,u,a,f,l;for(o=0;o<n;o++)u=e[o],a=typeof e[o]=="string",f=typeof e[o]=="object"&&e[o]instanceof Array,l=a&&e[o].split(":"),a&&l.length===2?(r.push(Number(l[0])),i.push(Number(l[1])),s.push(Number(l[1]))):f?(r.push(u[0]),i.push(u[1]),s.push(u[1])):(r.push(o),e[o]===null||e[o]==="null"?i.push(null):(i.push(Number(u)),s.push(Number(u))));this.options.get("xvalues")&&(r=this.options.get("xvalues")),this.maxy=this.maxyorg=t.max.apply(t,s),this.miny=this.minyorg=t.min.apply(t,s),this.maxx=t.max.apply(t,r),this.minx=t.min.apply(t,r),this.xvalues=r,this.yvalues=i,this.yminmax=s},processRangeOptions:function(){var e=this.options,t=e.get("normalRangeMin"),r=e.get("normalRangeMax");t!==n&&(t<this.miny&&(this.miny=t),r>this.maxy&&(this.maxy=r)),e.get("chartRangeMin")!==n&&(e.get("chartRangeClip")||e.get("chartRangeMin")<this.miny)&&(this.miny=e.get("chartRangeMin")),e.get("chartRangeMax")!==n&&(e.get("chartRangeClip")||e.get("chartRangeMax")>this.maxy)&&(this.maxy=e.get("chartRangeMax")),e.get("chartRangeMinX")!==n&&(e.get("chartRangeClipX")||e.get("chartRangeMinX")<this.minx)&&(this.minx=e.get("chartRangeMinX")),e.get("chartRangeMaxX")!==n&&(e.get("chartRangeClipX")||e.get("chartRangeMaxX")>this.maxx)&&(this.maxx=e.get("chartRangeMaxX"))},drawNormalRange:function(e,r,i,s,o){var u=this.options.get("normalRangeMin"),a=this.options.get("normalRangeMax"),f=r+t.round(i-i*((a-this.miny)/o)),l=t.round(i*(a-u)/o);this.target.drawRect(e,f,s,l,n,this.options.get("normalRangeColor")).append()},render:function(){var e=this.options,i=this.target,s=this.canvasWidth,o=this.canvasHeight,u=this.vertices,a=e.get("spotRadius"),f=this.regionMap,l,c,h,p,d,v,m,g,y,w,E,S,T,N,C,k,L,A,O,M,_,D,P,H,B;if(!x._super.render.call(this))return;this.scanValues(),this.processRangeOptions(),P=this.xvalues,H=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2)return;p=d=0,l=this.maxx-this.minx===0?1:this.maxx-this.minx,c=this.maxy-this.miny===0?1:this.maxy-this.miny,h=this.yvalues.length-1,a&&(s<a*4||o<a*4)&&(a=0);if(a){_=e.get("highlightSpotColor")&&!e.get("disableInteraction");if(_||e.get("minSpotColor")||e.get("spotColor")&&H[h]===this.miny)o-=t.ceil(a);if(_||e.get("maxSpotColor")||e.get("spotColor")&&H[h]===this.maxy)o-=t.ceil(a),p+=t.ceil(a);if(_||(e.get("minSpotColor")||e.get("maxSpotColor"))&&(H[0]===this.miny||H[0]===this.maxy))d+=t.ceil(a),s-=t.ceil(a);if(_||e.get("spotColor")||e.get("minSpotColor")||e.get("maxSpotColor")&&(H[h]===this.miny||H[h]===this.maxy))s-=t.ceil(a)}o--,e.get("normalRangeMin")!==n&&!e.get("drawNormalOnTop")&&this.drawNormalRange(d,p,o,s,c),m=[],g=[m],N=C=null,k=H.length;for(B=0;B<k;B++)y=P[B],E=P[B+1],w=H[B],S=d+t.round((y-this.minx)*(s/l)),T=B<k-1?d+t.round((E-this.minx)*(s/l)):s,C=S+(T-S)/2,f[B]=[N||0,C,B],N=C,w===null?B&&(H[B-1]!==null&&(m=[],g.push(m)),u.push(null)):(w<this.miny&&(w=this.miny),w>this.maxy&&(w=this.maxy),m.length||m.push([S,p+o]),v=[S,p+t.round(o-o*((w-this.miny)/c))],m.push(v),u.push(v));L=[],A=[],O=g.length;for(B=0;B<O;B++)m=g[B],m.length&&(e.get("fillColor")&&(m.push([m[m.length-1][0],p+o]),A.push(m.slice(0)),m.pop()),m.length>2&&(m[0]=[m[0][0],m[1][1]]),L.push(m));O=A.length;for(B=0;B<O;B++)i.drawShape(A[B],e.get("fillColor"),e.get("fillColor")).append();e.get("normalRangeMin")!==n&&e.get("drawNormalOnTop")&&this.drawNormalRange(d,p,o,s,c),O=L.length;for(B=0;B<O;B++)i.drawShape(L[B],e.get("lineColor"),n,e.get("lineWidth")).append();if(a&&e.get("valueSpots")){M=e.get("valueSpots"),M.get===n&&(M=new b(M));for(B=0;B<k;B++)D=M.get(H[B]),D&&i.drawCircle(d+t.round((P[B]-this.minx)*(s/l)),p+t.round(o-o*((H[B]-this.miny)/c)),a,n,D).append()}a&&e.get("spotColor")&&H[h]!==null&&i.drawCircle(d+t.round((P[P.length-1]-this.minx)*(s/l)),p+t.round(o-o*((H[h]-this.miny)/c)),a,n,e.get("spotColor")).append(),this.maxy!==this.minyorg&&(a&&e.get("minSpotColor")&&(y=P[r.inArray(this.minyorg,H)],i.drawCircle(d+t.round((y-this.minx)*(s/l)),p+t.round(o-o*((this.minyorg-this.miny)/c)),a,n,e.get("minSpotColor")).append()),a&&e.get("maxSpotColor")&&(y=P[r.inArray(this.maxyorg,H)],i.drawCircle(d+t.round((y-this.minx)*(s/l)),p+t.round(o-o*((this.maxyorg-this.miny)/c)),a,n,e.get("maxSpotColor")).append())),this.lastShapeId=i.getLastShapeId(),this.canvasTop=p,i.render()}}),r.fn.sparkline.bar=T=o(r.fn.sparkline._base,S,{type:"bar",init:function(e,i,s,o,u){var f=parseInt(s.get("barWidth"),10),p=parseInt(s.get("barSpacing"),10),d=s.get("chartRangeMin"),v=s.get("chartRangeMax"),m=s.get("chartRangeClip"),g=Infinity,y=-Infinity,w,E,S,x,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z;T._super.init.call(this,e,i,s,o,u);for(C=0,k=i.length;C<k;C++){q=i[C],w=typeof q=="string"&&q.indexOf(":")>-1;if(w||r.isArray(q))H=!0,w&&(q=i[C]=c(q.split(":"))),q=h(q,null),E=t.min.apply(t,q),S=t.max.apply(t,q),E<g&&(g=E),S>y&&(y=S)}this.stacked=H,this.regionShapes={},this.barWidth=f,this.barSpacing=p,this.totalBarWidth=f+p,this.width=o=i.length*f+(i.length-1)*p,this.initTarget(),m&&(D=d===n?-Infinity:d,P=v===n?Infinity:v),N=[],x=H?[]:N;var W=[],X=[];for(C=0,k=i.length;C<k;C++)if(H){B=i[C],i[C]=I=[],W[C]=0,x[C]=X[C]=0;for(j=0,F=B.length;j<F;j++)q=I[j]=m?a(B[j],D,P):B[j],q!==null&&(q>0&&(W[C]+=q),g<0&&y>0?q<0?X[C]+=t.abs(q):x[C]+=q:x[C]+=t.abs(q-(q<0?y:g)),N.push(q))}else q=m?a(i[C],D,P):i[C],q=i[C]=l(q),q!==null&&N.push(q);this.max=_=t.max.apply(t,N),this.min=M=t.min.apply(t,N),this.stackMax=y=H?t.max.apply(t,W):_,this.stackMin=g=H?t.min.apply(t,N):M,s.get("chartRangeMin")!==n&&(s.get("chartRangeClip")||s.get("chartRangeMin")<M)&&(M=s.get("chartRangeMin")),s.get("chartRangeMax")!==n&&(s.get("chartRangeClip")||s.get("chartRangeMax")>_)&&(_=s.get("chartRangeMax")),this.zeroAxis=A=s.get("zeroAxis",!0),M<=0&&_>=0&&A?O=0:A==0?O=M:M>0?O=M:O=_,this.xaxisOffset=O,L=H?t.max.apply(t,x)+t.max.apply(t,X):_-M,this.canvasHeightEf=A&&M<0?this.canvasHeight-2:this.canvasHeight-1,M<O?(U=H&&_>=0?y:_,R=(U-O)/L*this.canvasHeight,R!==t.ceil(R)&&(this.canvasHeightEf-=2,R=t.ceil(R))):R=this.canvasHeight,this.yoffset=R,r.isArray(s.get("colorMap"))?(this.colorMapByIndex=s.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=s.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===n&&(this.colorMapByValue=new b(this.colorMapByValue))),this.range=L},getRegion:function(e,r,i){var s=t.floor(r/this.totalBarWidth);return s<0||s>=this.values.length?n:s},getCurrentRegionFields:function(){var e=this.currentRegion,t=g(this.values[e]),n=[],r,i;for(i=t.length;i--;)r=t[i],n.push({isNull:r===null,value:r,color:this.calcColor(i,r,e),offset:e});return n},calcColor:function(e,t,i){var s=this.colorMapByIndex,o=this.colorMapByValue,u=this.options,a,f;return this.stacked?a=u.get("stackedBarColor"):a=t<0?u.get("negBarColor"):u.get("barColor"),t===0&&u.get("zeroColor")!==n&&(a=u.get("zeroColor")),o&&(f=o.get(t))?a=f:s&&s.length>i&&(a=s[i]),r.isArray(a)?a[e%a.length]:a},renderRegion:function(e,i){var s=this.values[e],o=this.options,u=this.xaxisOffset,a=[],f=this.range,l=this.stacked,c=this.target,h=e*this.totalBarWidth,p=this.canvasHeightEf,v=this.yoffset,m,g,y,b,w,E,S,x,T,N;s=r.isArray(s)?s:[s],S=s.length,x=s[0],b=d(null,s),N=d(u,s,!0);if(b)return o.get("nullColor")?(y=i?o.get("nullColor"):this.calcHighlightColor(o.get("nullColor"),o),m=v>0?v-1:v,c.drawRect(h,m,this.barWidth-1,0,y,y)):n;w=v;for(E=0;E<S;E++){x=s[E];if(l&&x===u){if(!N||T)continue;T=!0}f>0?g=t.floor(p*(t.abs(x-u)/f))+1:g=1,x<u||x===u&&v===0?(m=w,w+=g):(m=v-g,v-=g),y=this.calcColor(E,x,e),i&&(y=this.calcHighlightColor(y,o)),a.push(c.drawRect(h,m,this.barWidth-1,g-1,y,y))}return a.length===1?a[0]:a}}),r.fn.sparkline.tristate=N=o(r.fn.sparkline._base,S,{type:"tristate",init:function(e,t,i,s,o){var u=parseInt(i.get("barWidth"),10),a=parseInt(i.get("barSpacing"),10);N._super.init.call(this,e,t,i,s,o),this.regionShapes={},this.barWidth=u,this.barSpacing=a,this.totalBarWidth=u+a,this.values=r.map(t,Number),this.width=s=t.length*u+(t.length-1)*a,r.isArray(i.get("colorMap"))?(this.colorMapByIndex=i.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=i.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===n&&(this.colorMapByValue=new b(this.colorMapByValue))),this.initTarget()},getRegion:function(e,n,r){return t.floor(n/this.totalBarWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===n,value:this.values[e],color:this.calcColor(this.values[e],e),offset:e}},calcColor:function(e,t){var n=this.values,r=this.options,i=this.colorMapByIndex,s=this.colorMapByValue,o,u;return s&&(u=s.get(e))?o=u:i&&i.length>t?o=i[t]:n[t]<0?o=r.get("negBarColor"):n[t]>0?o=r.get("posBarColor"):o=r.get("zeroBarColor"),o},renderRegion:function(e,n){var r=this.values,i=this.options,s=this.target,o,u,a,f,l,c;o=s.pixelHeight,a=t.round(o/2),f=e*this.totalBarWidth,r[e]<0?(l=a,u=a-1):r[e]>0?(l=0,u=a-1):(l=a-1,u=2),c=this.calcColor(r[e],e);if(c===null)return;return n&&(c=this.calcHighlightColor(c,i)),s.drawRect(f,l,this.barWidth-1,u-1,c,c)}}),r.fn.sparkline.discrete=C=o(r.fn.sparkline._base,S,{type:"discrete",init:function(e,i,s,o,u){C._super.init.call(this,e,i,s,o,u),this.regionShapes={},this.values=i=r.map(i,Number),this.min=t.min.apply(t,i),this.max=t.max.apply(t,i),this.range=this.max-this.min,this.width=o=s.get("width")==="auto"?i.length*2:this.width,this.interval=t.floor(o/i.length),this.itemWidth=o/i.length,s.get("chartRangeMin")!==n&&(s.get("chartRangeClip")||s.get("chartRangeMin")<this.min)&&(this.min=s.get("chartRangeMin")),s.get("chartRangeMax")!==n&&(s.get("chartRangeClip")||s.get("chartRangeMax")>this.max)&&(this.max=s.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=s.get("lineHeight")==="auto"?t.round(this.canvasHeight*.3):s.get("lineHeight"))},getRegion:function(e,n,r){return t.floor(n/this.itemWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===n,value:this.values[e],offset:e}},renderRegion:function(e,n){var r=this.values,i=this.options,s=this.min,o=this.max,u=this.range,f=this.interval,l=this.target,c=this.canvasHeight,h=this.lineHeight,p=c-h,d,v,m,g;return v=a(r[e],s,o),g=e*f,d=t.round(p-p*((v-s)/u)),m=i.get("thresholdColor")&&v<i.get("thresholdValue")?i.get("thresholdColor"):i.get("lineColor"),n&&(m=this.calcHighlightColor(m,i)),l.drawLine(g,d,g,d+h,m)}}),r.fn.sparkline.bullet=k=o(r.fn.sparkline._base,{type:"bullet",init:function(e,r,i,s,o){var u,a,f;k._super.init.call(this,e,r,i,s,o),this.values=r=c(r),f=r.slice(),f[0]=f[0]===null?f[2]:f[0],f[1]=r[1]===null?f[2]:f[1],u=t.min.apply(t,r),a=t.max.apply(t,r),i.get("base")===n?u=u<0?u:0:u=i.get("base"),this.min=u,this.max=a,this.range=a-u,this.shapes={},this.valueShapes={},this.regiondata={},this.width=s=i.get("width")==="auto"?"4.0em":s,this.target=this.$el.simpledraw(s,o,i.get("composite")),r.length||(this.disabled=!0),this.initTarget()},getRegion:function(e,t,r){var i=this.target.getShapeAt(e,t,r);return i!==n&&this.shapes[i]!==n?this.shapes[i]:n},getCurrentRegionFields:function(){var e=this.currentRegion;return{fieldkey:e.substr(0,1),value:this.values[e.substr(1)],region:e}},changeHighlight:function(e){var t=this.currentRegion,n=this.valueShapes[t],r;delete this.shapes[n];switch(t.substr(0,1)){case"r":r=this.renderRange(t.substr(1),e);break;case"p":r=this.renderPerformance(e);break;case"t":r=this.renderTarget(e)}this.valueShapes[t]=r.id,this.shapes[r.id]=t,this.target.replaceWithShape(n,r)},renderRange:function(e,n){var r=this.values[e],i=t.round(this.canvasWidth*((r-this.min)/this.range)),s=this.options.get("rangeColors")[e-2];return n&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(0,0,i-1,this.canvasHeight-1,s,s)},renderPerformance:function(e){var n=this.values[1],r=t.round(this.canvasWidth*((n-this.min)/this.range)),i=this.options.get("performanceColor");return e&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(0,t.round(this.canvasHeight*.3),r-1,t.round(this.canvasHeight*.4)-1,i,i)},renderTarget:function(e){var n=this.values[0],r=t.round(this.canvasWidth*((n-this.min)/this.range)-this.options.get("targetWidth")/2),i=t.round(this.canvasHeight*.1),s=this.canvasHeight-i*2,o=this.options.get("targetColor");return e&&(o=this.calcHighlightColor(o,this.options)),this.target.drawRect(r,i,this.options.get("targetWidth")-1,s-1,o,o)},render:function(){var e=this.values.length,t=this.target,n,r;if(!k._super.render.call(this))return;for(n=2;n<e;n++)r=this.renderRange(n).append(),this.shapes[r.id]="r"+n,this.valueShapes["r"+n]=r.id;this.values[1]!==null&&(r=this.renderPerformance().append(),this.shapes[r.id]="p1",this.valueShapes.p1=r.id),this.values[0]!==null&&(r=this.renderTarget().append(),this.shapes[r.id]="t0",this.valueShapes.t0=r.id),t.render()}}),r.fn.sparkline.pie=L=o(r.fn.sparkline._base,{type:"pie",init:function(e,n,i,s,o){var u=0,a;L._super.init.call(this,e,n,i,s,o),this.shapes={},this.valueShapes={},this.values=n=r.map(n,Number),i.get("width")==="auto"&&(this.width=this.height);if(n.length>0)for(a=n.length;a--;)u+=n[a];this.total=u,this.initTarget(),this.radius=t.floor(t.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(e,t,r){var i=this.target.getShapeAt(e,t,r);return i!==n&&this.shapes[i]!==n?this.shapes[i]:n},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===n,value:this.values[e],percent:this.values[e]/this.total*100,color:this.options.get("sliceColors")[e%this.options.get("sliceColors").length],offset:e}},changeHighlight:function(e){var t=this.currentRegion,n=this.renderSlice(t,e),r=this.valueShapes[t];delete this.shapes[r],this.target.replaceWithShape(r,n),this.valueShapes[t]=n.id,this.shapes[n.id]=t},renderSlice:function(e,r){var i=this.target,s=this.options,o=this.radius,u=s.get("borderWidth"),a=s.get("offset"),f=2*t.PI,l=this.values,c=this.total,h=a?2*t.PI*(a/360):0,p,d,v,m,g;m=l.length;for(v=0;v<m;v++){p=h,d=h,c>0&&(d=h+f*(l[v]/c));if(e===v)return g=s.get("sliceColors")[v%s.get("sliceColors").length],r&&(g=this.calcHighlightColor(g,s)),i.drawPieSlice(o,o,o-u,p,d,n,g);h=d}},render:function(){var e=this.target,r=this.values,i=this.options,s=this.radius,o=i.get("borderWidth"),u,a;if(!L._super.render.call(this))return;o&&e.drawCircle(s,s,t.floor(s-o/2),i.get("borderColor"),n,o).append();for(a=r.length;a--;)r[a]&&(u=this.renderSlice(a).append(),this.valueShapes[a]=u.id,this.shapes[u.id]=a);e.render()}}),r.fn.sparkline.box=A=o(r.fn.sparkline._base,{type:"box",init:function(e,t,n,i,s){A._super.init.call(this,e,t,n,i,s),this.values=r.map(t,Number),this.width=n.get("width")==="auto"?"4.0em":i,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var e=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==n&&e.push({field:"lo",value:this.loutlier}),this.routlier!==n&&e.push({field:"ro",value:this.routlier}),this.lwhisker!==n&&e.push({field:"lw",value:this.lwhisker}),this.rwhisker!==n&&e.push({field:"rw",value:this.rwhisker}),e},render:function(){var e=this.target,r=this.values,i=r.length,s=this.options,o=this.canvasWidth,u=this.canvasHeight,a=s.get("chartRangeMin")===n?t.min.apply(t,r):s.get("chartRangeMin"),l=s.get("chartRangeMax")===n?t.max.apply(t,r):s.get("chartRangeMax"),c=0,h,p,d,v,m,g,y,b,w,E,S;if(!A._super.render.call(this))return;if(s.get("raw"))s.get("showOutliers")&&r.length>5?(p=r[0],h=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6]):(h=r[0],v=r[1],m=r[2],g=r[3],y=r[4]);else{r.sort(function(e,t){return e-t}),v=f(r,1),m=f(r,2),g=f(r,3),d=g-v;if(s.get("showOutliers")){h=y=n;for(w=0;w<i;w++)h===n&&r[w]>v-d*s.get("outlierIQR")&&(h=r[w]),r[w]<g+d*s.get("outlierIQR")&&(y=r[w]);p=r[0],b=r[i-1]}else h=r[0],y=r[i-1]}this.quartiles=[v,m,g],this.lwhisker=h,this.rwhisker=y,this.loutlier=p,this.routlier=b,S=o/(l-a+1),s.get("showOutliers")&&(c=t.ceil(s.get("spotRadius")),o-=2*t.ceil(s.get("spotRadius")),S=o/(l-a+1),p<h&&e.drawCircle((p-a)*S+c,u/2,s.get("spotRadius"),s.get("outlierLineColor"),s.get("outlierFillColor")).append(),b>y&&e.drawCircle((b-a)*S+c,u/2,s.get("spotRadius"),s.get("outlierLineColor"),s.get("outlierFillColor")).append()),e.drawRect(t.round((v-a)*S+c),t.round(u*.1),t.round((g-v)*S),t.round(u*.8),s.get("boxLineColor"),s.get("boxFillColor")).append(),e.drawLine(t.round((h-a)*S+c),t.round(u/2),t.round((v-a)*S+c),t.round(u/2),s.get("lineColor")).append(),e.drawLine(t.round((h-a)*S+c),t.round(u/4),t.round((h-a)*S+c),t.round(u-u/4),s.get("whiskerColor")).append(),e.drawLine(t.round((y-a)*S+c),t.round(u/2),t.round((g-a)*S+c),t.round(u/2),s.get("lineColor")).append(),e.drawLine(t.round((y-a)*S+c),t.round(u/4),t.round((y-a)*S+c),t.round(u-u/4),s.get("whiskerColor")).append(),e.drawLine(t.round((m-a)*S+c),t.round(u*.1),t.round((m-a)*S+c),t.round(u*.9),s.get("medianColor")).append(),s.get("target")&&(E=t.ceil(s.get("spotRadius")),e.drawLine(t.round((s.get("target")-a)*S+c),t.round(u/2-E),t.round((s.get("target")-a)*S+c),t.round(u/2+E),s.get("targetColor")).append(),e.drawLine(t.round((s.get("target")-a)*S+c-E),t.round(u/2),t.round((s.get("target")-a)*S+c+E),t.round(u/2),s.get("targetColor")).append()),e.render()}}),_=o({init:function(e,t,n,r){this.target=e,this.id=t,this.type=n,this.args=r},append:function(){return this.target.appendShape(this),this}}),D=o({_pxregex:/(\d+)(px)?\s*$/i,init:function(e,t,n){if(!e)return;this.width=e,this.height=t,this.target=n,this.lastShapeId=null,n[0]&&(n=n[0]),r.data(n,"_jqs_vcanvas",this)},drawLine:function(e,t,n,r,i,s){return this.drawShape([[e,t],[n,r]],i,s)},drawShape:function(e,t,n,r){return this._genShape("Shape",[e,t,n,r])},drawCircle:function(e,t,n,r,i,s){return this._genShape("Circle",[e,t,n,r,i,s])},drawPieSlice:function(e,t,n,r,i,s,o){return this._genShape("PieSlice",[e,t,n,r,i,s,o])},drawRect:function(e,t,n,r,i,s){return this._genShape("Rect",[e,t,n,r,i,s])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(e,t){r(t).html(e)},_calculatePixelDims:function(e,t,n){var i;i=this._pxregex.exec(t),i?this.pixelHeight=i[1]:this.pixelHeight=r(n).height(),i=this._pxregex.exec(e),i?this.pixelWidth=i[1]:this.pixelWidth=r(n).width()},_genShape:function(e,t){var n=j++;return t.unshift(n),new _(this,n,e,t)},appendShape:function(e){alert("appendShape not implemented")},replaceWithShape:function(e,t){alert("replaceWithShape not implemented")},insertAfterShape:function(e,t){alert("insertAfterShape not implemented")},removeShapeId:function(e){alert("removeShapeId not implemented")},getShapeAt:function(e,t,n){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),P=o(D,{init:function(t,i,s,o){P._super.init.call(this,t,i,s),this.canvas=e.createElement("canvas"),s[0]&&(s=s[0]),r.data(s,"_jqs_vcanvas",this),r(this.canvas).css({display:"inline-block",width:t,height:i,verticalAlign:"top"}),this._insert(this.canvas,s),this._calculatePixelDims(t,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=o,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=n,r(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(e,t,r){var i=this.canvas.getContext("2d");return e!==n&&(i.strokeStyle=e),i.lineWidth=r===n?1:r,t!==n&&(i.fillStyle=t),i},reset:function(){var e=this._getContext();e.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=n},_drawShape:function(e,t,r,i,s){var o=this._getContext(r,i,s),u,a;o.beginPath(),o.moveTo(t[0][0]+.5,t[0][1]+.5);for(u=1,a=t.length;u<a;u++)o.lineTo(t[u][0]+.5,t[u][1]+.5);r!==n&&o.stroke(),i!==n&&o.fill(),this.targetX!==n&&this.targetY!==n&&o.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawCircle:function(e,r,i,s,o,u,a){var f=this._getContext(o,u,a);f.beginPath(),f.arc(r,i,s,0,2*t.PI,!1),this.targetX!==n&&this.targetY!==n&&f.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e),o!==n&&f.stroke(),u!==n&&f.fill()},_drawPieSlice:function(e,t,r,i,s,o,u,a){var f=this._getContext(u,a);f.beginPath(),f.moveTo(t,r),f.arc(t,r,i,s,o,!1),f.lineTo(t,r),f.closePath(),u!==n&&f.stroke(),a&&f.fill(),this.targetX!==n&&this.targetY!==n&&f.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawRect:function(e,t,n,r,i,s,o){return this._drawShape(e,[[t,n],[t+r,n],[t+r,n+i],[t,n+i],[t,n]],s,o)},appendShape:function(e){return this.shapes[e.id]=e,this.shapeseq.push(e.id),this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var n=this.shapeseq,r;this.shapes[t.id]=t;for(r=n.length;r--;)n[r]==e&&(n[r]=t.id);delete this.shapes[e]},replaceWithShapes:function(e,t){var n=this.shapeseq,r={},i,s,o;for(s=e.length;s--;)r[e[s]]=!0;for(s=n.length;s--;)i=n[s],r[i]&&(n.splice(s,1),delete this.shapes[i],o=s);for(s=t.length;s--;)n.splice(o,0,t[s].id),this.shapes[t[s].id]=t[s]},insertAfterShape:function(e,t){var n=this.shapeseq,r;for(r=n.length;r--;)if(n[r]===e){n.splice(r+1,0,t.id),this.shapes[t.id]=t;return}},removeShapeId:function(e){var t=this.shapeseq,n;for(n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}delete this.shapes[e]},getShapeAt:function(e,t,n){return this.targetX=t,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var e=this.shapeseq,t=this.shapes,n=e.length,r=this._getContext(),i,s,o;r.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(o=0;o<n;o++)i=e[o],s=t[i],this["_draw"+s.type].apply(this,s.args);this.interact||(this.shapes={},this.shapeseq=[])}}),H=o(D,{init:function(t,n,i){var s;H._super.init.call(this,t,n,i),i[0]&&(i=i[0]),r.data(i,"_jqs_vcanvas",this),this.canvas=e.createElement("span"),r(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:n,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(t,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,s='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",s),this.group=r(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(e,t,r,i,s){var o=[],u,a,f,l,c,h,p;for(p=0,h=t.length;p<h;p++)o[p]=""+t[p][0]+","+t[p][1];return u=o.splice(0,1),s=s===n?1:s,a=r===n?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+r+'" ',f=i===n?' filled="false"':' fillColor="'+i+'" filled="true" ',l=o[0]===o[o.length-1]?"x ":"",c='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+e+'" '+a+f+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+u+" l "+o.join(", ")+" "+l+'e">'+" </v:shape>",c},_drawCircle:function(e,t,r,i,s,o,u){var a,f,l;return t-=i,r-=i,a=s===n?' stroked="false" ':' strokeWeight="'+u+'px" strokeColor="'+s+'" ',f=o===n?' filled="false"':' fillColor="'+o+'" filled="true" ',l='<v:oval  id="jqsshape'+e+'" '+a+f+' style="position:absolute;top:'+r+"px; left:"+t+"px; width:"+i*2+"px; height:"+i*2+'px"></v:oval>',l},_drawPieSlice:function(e,r,i,s,o,u,a,f){var l,c,h,p,d,v,m,g;if(o===u)return"";u-o===2*t.PI&&(o=0,u=2*t.PI),c=r+t.round(t.cos(o)*s),h=i+t.round(t.sin(o)*s),p=r+t.round(t.cos(u)*s),d=i+t.round(t.sin(u)*s);if(c===p&&h===d){if(u-o<t.PI)return"";c=p=r+s,h=d=i}return c===p&&h===d&&u-o<t.PI?"":(l=[r-s,i-s,r+s,i+s,c,h,p,d],v=a===n?' stroked="false" ':' strokeWeight="1px" strokeColor="'+a+'" ',m=f===n?' filled="false"':' fillColor="'+f+'" filled="true" ',g='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+e+'" '+v+m+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+r+","+i+" wa "+l.join(", ")+' x e">'+" </v:shape>",g)},_drawRect:function(e,t,n,r,i,s,o){return this._drawShape(e,[[t,n],[t,n+i],[t+r,n+i],[t+r,n],[t,n]],s,o)},reset:function(){this.group.innerHTML=""},appendShape:function(e){var t=this["_draw"+e.type].apply(this,e.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",t):this.prerender+=t,this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var n=r("#jqsshape"+e),i=this["_draw"+t.type].apply(this,t.args);n[0].outerHTML=i},replaceWithShapes:function(e,t){var n=r("#jqsshape"+e[0]),i="",s=t.length,o;for(o=0;o<s;o++)i+=this["_draw"+t[o].type].apply(this,t[o].args);n[0].outerHTML=i;for(o=1;o<e.length;o++)r("#jqsshape"+e[o]).remove()},insertAfterShape:function(e,t){var n=r("#jqsshape"+e),i=this["_draw"+t.type].apply(this,t.args);n[0].insertAdjacentHTML("afterEnd",i)},removeShapeId:function(e){var t=r("#jqsshape"+e);this.group.removeChild(t[0])},getShapeAt:function(e,t,n){var r=e.id.substr(8);return r},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math),define("views/shared/results_table/renderers/NullCellRenderer",["require","exports","module","underscore","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("./BaseCellRenderer");return i.extend({canRender:function(e){return r.isNull(e.value)||r.isEqual(e.value,[])},render:function(e,t){e.html("&nbsp;")}})}),define("views/shared/results_table/renderers/NumberCellRenderer",["require","exports","module","underscore","../ResultsTableRow","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("../ResultsTableRow"),s=e("./BaseCellRenderer");return s.extend({canRender:function(e){return e.columnType==="number"},setup:function(e,t){e.addClass("numeric")},teardown:function(e,t){e.removeClass("numeric with-overlay")},render:function(e,t){t=r.extend({floatValue:parseFloat(t.value),heatValue:t.dataOverlay==="heatmap"?Math.min(Math.max(Math.ceil(t.value/t.heatDelta*1e3)/1e3,-1),1):null,MV_SUBCELL_CLASSNAME:i.MV_SUBCELL_CLASSNAME,MV_INDEX_ATTR:i.MV_INDEX_ATTR},t),t.dataOverlay==="highlow"||t.dataOverlay==="heatmap"?e.addClass("with-overlay"):e.removeClass("with-overlay"),e.html(r.template(this.template,t))},template:'            <% if (dataOverlay === "heatmap") { %>                <div class="overlay-cell">                    <div class="overlay-cell-value heat-value" style="opacity: <%- heatValue %>; filter: alpha(opacity=<%- heatValue * 100 %>);"></div>                </div>            <% } else if (dataOverlay === "highlow") { %>                <% if (floatValue === extremes.min) { %>                    <div class="overlay-cell">                        <div class="overlay-cell-value min-value"></div>                    </div>                <% } else if (floatValue === extremes.max) { %>                    <div class="overlay-cell">                        <div class="overlay-cell-value max-value"></div>                    </div>                <% } else { %>                    <div class="overlay-cell">                        <div class="overlay-cell-value no-value"></div>                    </div>                <% } %>            <% } %>            <% if (_.isArray(value)) { %>                <% _(value).each(function(subValue, i) { %>                    <div class="<%- MV_SUBCELL_CLASSNAME %>" <%- MV_INDEX_ATTR %>="<%- i %>">                        <%- subValue %>                    </div>                <% }) %>            <% } else { %>                <%- value %>            <% } %>        '})}),define("views/shared/results_table/renderers/SparklineCellRenderer",["require","exports","module","jquery","underscore","jquery.sparkline","./BaseCellRenderer"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("jquery.sparkline"),o=e("./BaseCellRenderer"),u={type:"line",lineColor:"#65A637",highlightSpotColor:null,minSpotColor:null,maxSpotColor:null,spotColor:null,fillColor:null};return o.extend({canRender:function(e){return i.isArray(e.value)&&e.value[0]==="##__SPARKLINE__##"},render:function(e,t){var n=i.extend({},u,t.sparklineFormat);e.sparkline(i.isArray(t.value)?i.map(t.value.slice(1),function(e){return e&&parseFloat(e)||0}):[],n)}})}),define("views/shared/results_table/renderers/StringCellRenderer",["require","exports","module","underscore","../ResultsTableRow","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("../ResultsTableRow"),s=e("./BaseCellRenderer");return s.extend({canRender:function(e){return!0},render:function(e,t){t=r.extend({MV_SUBCELL_CLASSNAME:i.MV_SUBCELL_CLASSNAME,MV_INDEX_ATTR:i.MV_INDEX_ATTR},t),e.html(r.template(this.template,t))},template:'            <% if (_.isArray(value)) { %>                <% _(value).each(function(subValue, i) { %>                    <div class="<%- MV_SUBCELL_CLASSNAME %>" <%- MV_INDEX_ATTR %>="<%- i %>">                        <%- subValue %>                    </div>                <% }) %>            <% } else { %>                <%- value %>            <% } %>        '})}),define("views/shared/results_table/renderers/TimeCellRenderer",["require","exports","module","underscore","splunk.i18n","util/time","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("splunk.i18n"),s=e("util/time"),o=e("./BaseCellRenderer");return o.extend({canRender:function(e){return e.columnType==="timestamp"},setup:function(e,t){e.addClass("timestamp")},teardown:function(e,t){e.removeClass("timestamp")},render:function(e,t){t=r.extend({formattedValue:t.value!=="ALL"?i.format_date(s.isoToDateObject(t.value),t.timestampFormat):t.value},t),e.html(r.template(this.template,t))},template:"            <%- formattedValue %>        "})}),define("views/shared/results_table/ResultsTableMaster",["jquery","underscore","module","views/Base","./ResultsTableHeader","./ResultsTableRow","views/shared/delegates/ColumnSort","views/shared/delegates/TableDock","views/shared/delegates/TableHeadStatic","helpers/grid/RowIterator","helpers/Printer","splunk.util","util/general_utils","util/time","util/math_utils","jquery.sparkline","./renderers/BaseCellRenderer","./renderers/BaseRowExpansionRenderer","./renderers/NullCellRenderer","./renderers/NumberCellRenderer","./renderers/SparklineCellRenderer","./renderers/StringCellRenderer","./renderers/TimeCellRenderer","util/console"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){var T=/^[^_]|^_time$|^_raw$/,N={year:"YYYY",month:"YYYY-MM",day:"YYYY-MM-dd",hour:"YYYY-MM-dd HH:00",minute:"YYYY-MM-dd HH:mm:00",second:"YYYY-MM-dd HH:mm:ss"},C=["display.statistics.wrap","display.statistics.rowNumbers","display.statistics.overlay","display.statistics.sparkline.format"],k="."+s.MV_SUBCELL_CLASSNAME,L=13;return r.extend({moduleId:n.id,events:{"mouseover tbody td":function(t){this.handleCellMouseover(e(t.target))},"mouseout tbody td":function(t){this.handleCellMouseout(e(t.target))},"mousedown tbody td":function(t){this.handleCellMousedown(e(t.target),t)},"click tbody td":function(t){this.handleCellClick(e(t.target),t)},"keypress tbody td":function(t){t.which===L&&this.handleCellClick(e(t.target),t)},"keypress tbody tr":function(t){t.which===L&&this.handleCellClick(e(t.target).find("td").first(),t)}},initialize:function(t){r.prototype.initialize.call(this,t);if(this.options.enableStaticHeader&&this.options.enableTableDock!==!1)throw new Error("Static header and docking header cannot be enabled at the same time");var n={sortKeyAttr:"sortKey",sortDirAttr:"sortDirection",sortableFields:!0,countAttr:"count",offsetAttr:"offset",numRowSplits:1,headerClass:i};this.options=e.extend(!0,n,this.options),this._cellRenderers=[],this._rowExpansionRenderers=[],this.children.columnSort=new o({el:this.el,model:this.model.metadata,autoUpdate:!0,sortKeyAttr:this.options.sortKeyAttr,sortDirAttr:this.options.sortDirAttr}),this.options.enableTableDock!==!1&&(this.children.tableDock=new u({el:this.el,offset:this.options.tableDockOffset})),this.addCellRenderer(new E),this.addCellRenderer(new S),this.addCellRenderer(new b),this.addCellRenderer(new w),this.addCellRenderer(new y),this.rawFields=[],this.rawRows=[],this.dataFields=[],this.dataRows=[],this.columnTypes={},this.fieldHeatDeltas={},this.fieldExtremes={},this.fieldTimestampFormats={},this.sparklineFormatSettings={},this.updateFormatSettings(),this.readResults(),this.activate({skipUpdate:!0})},startListening:function(){this.listenTo(this.model.results,"change",t.debounce(function(){this.active&&this.handleResultsChange()},0)),this.listenTo(this.model.format,"change",this.handleFormatChange),this.options.enableStaticHeader&&this.listenTo(l,l.PRINT_END,function(){this.children.staticHead.update()})},activate:function(e){return e=e||{},this.active?r.prototype.activate.apply(this,arguments):(this.options.disable&&this.$el.addClass("table-disabled"),e.skipUpdate||(this.updateFormatSettings(),this.handleResultsChange()),r.prototype.activate.apply(this,arguments))},deactivate:function(e){return this.active?(r.prototype.deactivate.apply(this,arguments),this.collapseRow(),this):r.prototype.deactivate.apply(this,arguments)},addCellRenderer:function(e){if(!(typeof e=="function"||e instanceof m))throw new Error("Parameter cellRenderer must be a function or an instance of views/shared/results_table/renderers/BaseCellRenderer.");this._cellRenderers.unshift(e)},removeCellRenderer:function(e){if(!(typeof e=="function"||e instanceof m))throw new Error("Parameter cellRenderer must be a function or an instance of views/shared/results_table/renderers/BaseCellRenderer.");var t=this._cellRenderers;for(var n=0,r=t.length;n<r;n++)if(t[n]===e){t.splice(n,1);break}},getCellRenderers:function(){return this._cellRenderers.concat()},addRowExpansionRenderer:function(e){if(!(e instanceof g))throw new Error("Parameter rowExpansionRenderer must be an instance of views/shared/results_table/renderers/BaseRowExpansionRenderer.");this._rowExpansionRenderers.unshift(e)},removeRowExpansionRenderer:function(e){if(!(e instanceof g))throw new Error("Parameter rowExpansionRenderer must be an instance of views/shared/results_table/renderers/BaseRowExpansionRenderer.");var t=this._rowExpansionRenderers;for(var n=0,r=t.length;n<r;n++)if(t[n]===e){t.splice(n,1);break}},getRowExpansionRenderers:function(){return this._rowExpansionRenderers.concat()},expandRow:function(e){if(typeof e!="number")throw new Error("Parameter rowIndex must be a Number.");this.collapseRow();var t=this.children["row_"+e];if(!t)return;var n=t.getRowData(),r=this._rowExpansionRenderers,i;for(var s=0,o=r.length;s<o;s++){i=r[s];if(i.canRender(n)){this._expandedRow=t,this._expandedRowIndex=e,t.expandRow(i,n);break}}},collapseRow:function(){var e=this._expandedRow;if(!e)return;this._expandedRowIndex=-1,this._expandedRow=null,e.collapseRow()},getExpandedRowIndex:function(){return this._expandedRowIndex>=0?this._expandedRowIndex:-1},remove:function(){return this.collapseRow(),r.prototype.remove.apply(this,arguments)},handleResultsChange:function(){this.readResults(),this.render()},readResults:function(){this.rawFields=this.getFieldList(),this.rawRows=this.model.results.get("rows")||[],this.dataFields=t(this.rawFields).filter(this.isDataField,this),this.dataRows=t(this.rawRows).map(function(e){return t(e).filter(function(e,t){return this.isDataField(this.rawFields[t])},this)},this)},handleFormatChange:function(){var e=this.model.format.changedAttributes();if(t(e).chain().pick(C).isEmpty().value()){e.hasOwnProperty("display.statistics.drilldown")&&this.updateDrilldownClasses();return}this.updateFormatSettings(),this.debouncedRender()},render:function(){this.options.enableStaticHeader&&!this.el.innerHTML&&(this.$el.html(this.staticHeaderTemplate),this.children.staticHead=new a({el:this.el,flexWidthColumn:!1}));var t=this.compiledTemplate({wrapResults:c.normalizeBoolean(this.model.format.get("display.statistics.wrap")),numDataColumns:this.dataFields.length}),n=e(t);this.disposeOfChildren();if(this.dataFields.length>0&&this.dataRows.length>0){x.debug("rendering results table with data:",{fields:this.dataFields,rows:this.dataRows});var r=this.resultsAsColumns();this.updateColumnTypes(r),this.insertHeader(n,this.dataFields),this.insertRows(n,this.dataFields,this.dataRows,r),this.children.columnSort.update(n)}return this.options.enableStaticHeader?(this.$(".scroll-table-wrapper").html(n),this.children.staticHead.update()):this.$el.html(n),e.sparkline_display_visible(),this.children.tableDock&&this.children.tableDock.update(),this.options.disable&&(this.$tableDisabled=e('<div class="table-disabled-screen"></div>'),this.$el.append(this.$tableDisabled)),this.updateDrilldownClasses(),this.trigger("rendered"),this.$table=this.$("table").last(),this.reflow(),this},reflow:function(){this.children.tableDock&&this.children.tableDock.update(),r.prototype.reflow.apply(this,arguments),this.$tableDisabled&&this.$table.length>0&&this.$tableDisabled.width(this.$table[0].scrollWidth)},handleCellMouseover:function(e){var t=this.model.format.get("display.statistics.drilldown"),n=c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers")),r=this._rowExpansionRenderers.length>0;if(t==="none")return;var i=e.closest("td"),s=this.getCellInfo(i),o=this.children["row_"+s.rowIndex];if(!o)return;if(t==="cell"){if(i.find(k).length>0&&!e.is(k))return;this.children.header.highlightColumn(s.cellIndex);var u=(n?1:0)+(r?1:0);this.children.tableDock&&this.children.tableDock.$headerTable.find("th").eq(parseInt(s.cellIndex,10)+u).addClass("highlighted"),this.children.staticHead&&this.children.staticHead.$headerTable.find("th").eq(parseInt(s.cellIndex,10)+u).addClass("highlighted"),o.highlightCell(e,s.cellIndex)}else o.highlightRow()},handleCellMouseout:function(e){var t=this.model.format.get("display.statistics.drilldown"),n=c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers")),r=this._rowExpansionRenderers.length>0;if(t==="none")return;var i=e.closest("td"),s=this.getCellInfo(i),o=this.children["row_"+s.rowIndex];if(!o)return;if(t==="cell"){if(i.find(k).length>0&&!e.is(k))return;this.children.header.unHighlightColumn(s.cellIndex);var u=(n?1:0)+(r?1:0);this.children.tableDock&&this.children.tableDock.$headerTable.find("th").eq(parseInt(s.cellIndex,10)+u).removeClass("highlighted"),this.children.staticHead&&this.children.staticHead.$headerTable.find("th").eq(parseInt(s.cellIndex,10)+u).removeClass("highlighted"),o.unHighlightCell(e,s.cellIndex)}else o.unHighlightRow()},handleCellMousedown:function(e,t){this.mouseDownX=t.pageX,this.mouseDownY=t.pageY},handleCellClick:function(e,t){t.preventDefault();var n=t.pageX&&this.mouseDownX?Math.abs(t.pageX-this.mouseDownX):0,r=t.pageY&&this.mouseDownY?Math.abs(t.pageY-this.mouseDownY):0;this.mouseDownX=0,this.mouseDownY=0;var i=2;if(n>i||r>i)return;var o=e.closest("td");if(o.hasClass(s.ROW_EXPANSION_CLASSNAME)){var u=o.closest("tr"),a=Number(u.attr(s.ROW_INDEX_ATTR));this.getExpandedRowIndex()!=a?this.expandRow(a):this.collapseRow();return}var f=this.model.format.get("display.statistics.drilldown");if(f==="none")return;var l=o.find(k).length>0;if(f==="cell"&&l&&!e.is(k))return;var c=this.getCellInfo(o),h=!!t.ctrlKey||!!t.metaKey;l&&(c.mvIndex=this.getMultiValueIndex(e)),this.emitDrilldownEvent(c,h,t)},emitDrilldownEvent:function(e,n,r){if(e.rowIndex===undefined||e.cellIndex===undefined)return;var i=e.rowIndex,s=e.cellIndex,o=this.dataFields[0],u=this.isTimeField(o),a=this.dataRows[i][0],f={modifierKey:n,name:o,value:u?c.getEpochTimeFromISO(a):a};if(u){var l=this.getSpanSeriesForTimeField(o);l?f._span=parseInt(l[i],10):f._span=.001}var h=t.isArray(this.dataRows[i][s]);if(s>this.options.numRowSplits-1||h)f.name2=this.dataFields[s],f.value2=h?this.dataRows[i][s][e.mvIndex||0]:this.dataRows[i][s];var p={};t(this.dataRows[i]).each(function(e,t){p["row."+this.dataFields[t]]=e},this),f.rowContext=p,f.rowIndex=parseInt(i,10),f.cellIndex=parseInt(s,10),f.originalEvent=r,this.trigger("cellClick",f)},insertHeader:function(e,t){this.children.header=new this.options.headerClass({rowNumbers:c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers")),rowExpansion:this._rowExpansionRenderers.length>0,fields:t,columnTypes:this.columnTypes,sortKeyAttribute:o.SORT_KEY_ATTR,sortableFields:this.options.sortableFields}),this.children.header.render().replaceAll(e.find("thead"))},insertRows:function(e,n,r,i){var o=this.model.format.get("display.statistics.overlay"),u=c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers")),a=this._rowExpansionRenderers.length>0;o==="heatmap"?this.updateHeatDeltas(i):o==="highlow"&&this.updateExtremes(i),t(this.columnTypes).contains("timestamp")&&this.updateFieldTimestampFormats(n,r,i);var l=new f({offset:this.model.metadata.get(this.options.offsetAttr)}),h=e.find("tbody");l.eachRow(r,function(e,t,r){var i={table:this,fields:n,values:e,cells:this.generateCellObjects(e,n,o),dataOverlay:o,rowIndex:t,numRowSplits:this.options.numRowSplits,rowExpansion:a};u&&(i.rowNumber=r);var f=this.children["row_"+t]=new s(i);f.render().appendTo(h)},this)},generateCellObjects:function(e,n,r){return t(e).map(function(e,t){var i=n[t];return{value:e,field:i,dataOverlay:r,columnType:this.columnTypes[i]||"string",heatDelta:this.fieldHeatDeltas[i],extremes:this.fieldExtremes[i],timestampFormat:this.fieldTimestampFormats[i],sparklineFormat:this.sparklineFormatSettings[i],index:t}},this)},disposeOfChildren:function(){this.collapseRow(),t(this.children).each(function(e,t){if(t==="header"||t.substr(0,4)==="row_")e.stopListening(),delete this.children[t]},this)},resultsAsColumns:function(){var e={},n=this.model.results.get("rows")||[];return t(this.getFieldList()).each(function(r,i){e[r]=t(n).pluck(i)}),e},updateDrilldownClasses:function(){var e=this.model.format.get("display.statistics.drilldown"),t=this.$(".table"),n=t.find("tbody > tr"),r=t.find("tbody > tr > td");e==="none"?(t.removeClass("table-drilldown table-drilldown-row table-drilldown-cell"),r.removeAttr("tabindex"),n.removeAttr("tabindex")):e==="cell"?(t.addClass("table-drilldown table-drilldown-cell").removeClass("table-drilldown-row"),r.attr("tabindex","0"),n.removeAttr("tabindex")):(t.addClass("table-drilldown table-drilldown-row").removeClass("table-drilldown-cell"),n.attr("tabindex","0"),r.removeAttr("tabindex")),t.find(".row-expansion-toggle").removeAttr("tabindex")},updateFormatSettings:function(){var e=this.sparklineFormatSettings={};this.model.format.has("display.statistics.sparkline.format")&&t.extend(e,this.model.format.get("display.statistics.sparkline.format"))},updateColumnTypes:function(e){this.columnTypes={},t(e).each(function(e,t){if(!this.isDataField(t))return;this.isTimeField(t)?this.columnTypes[t]="timestamp":this.columnTypes[t]=h.valuesAreNumeric(e)?"number":"string"},this)},updateHeatDeltas:function(e){var n=this.getAllNumericValues(e),r=h.getPercentiles(n.sort(function(e,t){return e-t}),.05,.95),i=Math.max(Math.abs(r.lower),Math.abs(r.upper));this.fieldHeatDeltas={},t(e).each(function(e,t){this.columnTypes[t]==="number"&&(this.fieldHeatDeltas[t]=i)},this)},updateExtremes:function(e){var n=this.getAllNumericValues(e),r={min:t(n).chain().without(null).min().value(),max:t(n).max()};this.fieldExtremes={},t(e).each(function(e,t){this.columnTypes[t]==="number"&&(this.fieldExtremes[t]=r)},this)},getAllNumericValues:function(e){var n=function(e){return d.strictParseFloat(e)||null};return t(e).chain().filter(function(e,t){return this.columnTypes[t]==="number"},this).flatten().map(n).value()},updateFieldTimestampFormats:function(e,n,r){this.fieldTimestampFormats={},t(e).each(function(e,t){if(this.isTimeField(e))if(this.isBucketedTimeField(e)){var n=p.determineLabelGranularity(r[e]);this.fieldTimestampFormats[e]=N[n]}else this.fieldTimestampFormats[e]=N.second},this)},getFieldList:function(){return t(this.model.results.get("fields")||[]).map(function(e){return t(e).isString()?e:e.name})},isDataField:function(e){return T.test(e)},isTimeField:function(e){return e in{_time:!0,earliest_time:!0,latest_time:!0}},isBucketedTimeField:function(e){return e==="_time"&&!!this.getSpanSeriesForTimeField(e)},getSpanSeriesForTimeField:function(e){var t="_span";return this.resultsAsColumns()[t]},getCellInfo:function(e){return{cellIndex:e.attr(s.CELL_INDEX_ATTR),rowIndex:e.closest("tr").attr(s.ROW_INDEX_ATTR)}},getMultiValueIndex:function(e){return e.attr(s.MV_INDEX_ATTR)},template:'            <table class="table table-chrome table-striped <%= wrapResults ? "wrapped-results" : "not-wrapped-results" %> <%= numDataColumns === 1 ? \'single-column-table\' : \'\' %>">                <thead></thead>                <tbody></tbody>            </table>        ',staticHeaderTemplate:'            <div class="header-table-static"></div>            <div class="scroll-table-wrapper"></div>        '},{TIMESTAMP_FORMATS:N})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/paginator.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/paginatorview",["require","exports","module","underscore","./mvc","./basesplunkview","./settings","css!../css/paginator.css"],function(e,t,n){var r=e("underscore"),i=e("./mvc"),s=e("./basesplunkview"),o=e("./settings"),u=0,a=10;e("css!../css/paginator.css");var f=s.extend({moduleId:n.id,className:"splunk-paginator",events:{"click a":"onPageClick"},options:{itemCount:-1,page:u,pageSize:a},initialize:function(){this.configure(),this.settings.on("change",this.render,this)},hide:function(){this.$el.css("display","none")},render:function(e){this.$el.empty();var t=this.settings.get("pageSize"),n=this.settings.get("itemCount");if(n<=t)return this;var i=this.settings.get("page"),s=Math.ceil(n/t),o=Math.min(10,s);i>s&&(i=s,this.settings.set({page:i}));var u,a;u=Math.max(0,i-o/2),a=Math.min(s,u+o)-1,u=Math.max(0,a-o+1);var f=function(e){return"<a href='#' data-page='"+e+"'/>"},l='<a href="#" class="disabled"/>',c='<a href="#" class="selected"/>',h=this.$el,p=$(i==0?l:f("prev"),h);p.html("&laquo; "+r("prev").t()).appendTo(h);var d;for(d=u;d<=a;++d)p=$(d==i?c:f(d)),p.text(d+1).appendTo(h);return p=$(i==a?l:f("next"),h),p.html(r("next").t()+" &raquo;").appendTo(h),this},show:function(){this.$el.css("display","")},onPageClick:function(e){e.stopPropagation(),e.preventDefault();if($(e.currentTarget).is(".selected,.disabled"))return;var t=$(e.currentTarget).attr("data-page"),n=this.settings.get("page");switch(t){case"prev":e.shiftKey?n=0:n-=1;break;case"next":if(e.shiftKey){var r=this.settings.get("itemCount"),i=this.settings.get("pageSize");n=parseInt(r/i,10)-(r%i==0?1:0)}else n+=1;break;default:n=parseInt(t,10)}this.settings.set({page:n})}});return f}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/results-table.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/tableview",["require","exports","module","jquery","underscore","./mvc","./utils","backbone","./basesplunkview","views/shared/results_table/ResultsTableMaster","./messages","./drilldown","./paginatorview","views/shared/results_table/renderers/BaseCellRenderer","views/shared/results_table/renderers/BaseRowExpansionRenderer","util/console","./tokenawaremodel","util/general_utils","css!../css/results-table"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("./mvc"),o=e("./utils"),u=e("backbone"),a=e("./basesplunkview"),f=e("views/shared/results_table/ResultsTableMaster"),l=e("./messages"),c=e("./drilldown"),h=e("./paginatorview"),p=e("views/shared/results_table/renderers/BaseCellRenderer"),d=e("views/shared/results_table/renderers/BaseRowExpansionRenderer"),v=e("util/console"),m=e("./tokenawaremodel"),g=e("util/general_utils");e("css!../css/results-table");var y=10,b=100,w=/(["'].*?["']|[^"',\s]+)(?=\s*|\s*,|\s*$)/g,E=/^["']|["|']$/g,S=a.extend({moduleId:n.id,className:"splunk-table",options:{data:"preview",drilldown:"row",drilldownRedirect:!0,pagerPosition:"bottom",fields:[],pageSize:y},normalizeOptions:function(e){if(e.hasOwnProperty("count")){var t=parseInt(this.options.count,10)||y;this.settings.set("pageSize",t>b||t<1?y:t)}e.hasOwnProperty("wrap")&&(g.isBooleanEquivalent(e.wrap)?this.settings.set("wrap",g.normalizeBoolean(e.wrap)?"1":"0"):this.settings.set("wrap",e.wrap)),e.hasOwnProperty("rowNumbers")?g.isBooleanEquivalent(e.rowNumbers)?this.settings.set("displayRowNumbers",g.normalizeBoolean(e.rowNumbers)?"1":"0"):this.settings.set("displayRowNumbers",e.rowNumbers):e.hasOwnProperty("displayRowNumbers")&&this.settings.set("displayRowNumbers",g.normalizeBoolean(e.displayRowNumbers)?"1":"0"),e.hasOwnProperty("overlay")&&this.settings.set("dataOverlayMode",e["display.statistics.overlay"]),this.settings.set("drilldown",c.getNormalizedDrilldownType(e.drilldown,{validValues:["row","cell","none"],aliasMap:{all:"cell",off:"none"},"default":"cell"}));if(e.format){var n={};i.each(e.format,function(e,t){i.each(e,function(e){e.type==="sparkline"&&(n[t]=e.options)})}),i(n).isEmpty()||this.settings.set({"sparkline.format":n})}},initialize:function(e){this.configure(),this.model=this.options.reportModel||m._createReportModel(),this.normalizeOptions(e),this.settings._sync=o.syncModels(this.settings,this.model,{auto:!0,alias:{displayRowNumbers:"display.statistics.rowNumbers",dataOverlayMode:"display.statistics.overlay",pageSize:"display.prefs.statistics.count"},prefix:"display.statistics.",include:["displayRowNumbers","dataOverlayMode","pageSize","stripedRows","drilldown","sortKey","sortDirection","overlay","count","sparkline.format","wrap","fields"],exclude:["drilldownRedirect"]});var t=this.results=new u.Model({rows:[],fields:[]}),n=this.settings.get("pageSize")||y,i=this.metadata=new u.Model({pageSize:n>b||n<1?y:n,offset:0}),a=this.table=new f({enableTableDock:!1,el:r("<div></div>").appendTo(this.el),model:{results:t,metadata:i,format:this.model}});this._rendered=!1,this.listenTo(this.table,"rendered",function(){this._rendered=!0,this.trigger("rendered",this)},this),this.settings._syncMeta=o.syncModels(this.settings,this.metadata,{include:["sortKey","sortDirection","pageSize"],auto:"push"}),this.listenTo(i,"change",this.applyFetchOptions),this._onShowPagerChanged(),this.settings.on("change:showPager",this._onShowPagerChanged,this),this.settings.on("change:pagerPosition",this._onPaginatorPositionChange,this),this.transformFieldsToArray(),this.listenTo(this.settings,"change:fields",this.onFieldsChanged),a.on("cellClick",this.emitDrilldownEvent,this),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.manager||this.onManagerChange(s.Components,null)},emitDrilldownEvent:function(e){var t=this.manager,n=this.settings.get("drilldown"),r=c.normalizeDrilldownEventData(e,{manager:t,contextProperty:"rowContext",jobTimeOnly:!0}),s=this.resultsModel?this.resultsModel.data().rows:null;if(s&&e.rowIndex<s.length){var o=s[e.rowIndex];i(this.resultsModel.data().fields).each(function(e,t){r["row."+e]=o[t]})}var u=c.createEventPayload({field:e.name2||e.name,data:r,event:e},function(){c.autoDrilldown(e,t,{drilldownType:n})});this.trigger("drilldown click",u,this);var a=this.collection.at(e.rowIndex);if(a){var f=e.hasOwnProperty("name2")?e.name2:e.name,l=e.hasOwnProperty("value2")?e.value2:e.value,h=e.originalEvent;this.trigger("clicked:row click:row",i.extend({model:a,index:e.rowIndex,originalEvent:h,component:this,event:h},u),this),this.trigger("clicked:cell click:cell",i.extend({model:a,index:e.rowIndex,column:e.cellIndex,key:f,value:l,originalEvent:h,event:h,component:this},u),this)}n!=="none"&&this.settings.get("drilldownRedirect")&&!u.defaultPrevented()&&u.drilldown()},onManagerChange:function(e,t){this.manager&&(this.stopListening(this.manager),this.manager=null),this.resultsModel&&(this.stopListening(this.resultsModel),this.resultsModel=null);if(!t){this.renderMessage("no-search");return}this.renderMessage("empty"),this.manager=t,this.resultsModel=this.manager.data(this.settings.get("data"),{autofetch:!0,output_mode:"json_rows",show_empty_fields:"True",count:this.metadata.get("pageSize"),offset:this.metadata.get("offset")}),this.listenTo(this.manager,"search:start",this.onSearchStart),this.listenTo(this.manager,"search:progress",this.onSearchProgress),this.listenTo(this.manager,"search:cancelled",this.onSearchCancelled),this.listenTo(this.manager,"search:refresh",this.onSearchRefresh),this.listenTo(this.manager,"search:fail",this.onSearchFailed),this.listenTo(this.manager,"search:error",this.onSearchError),this.listenTo(this.manager,"search:done",this.onSearchDone),this.listenTo(this.resultsModel,"data",this.renderResults),this.listenTo(this.resultsModel,"error",this.onSearchError);var n=this.manager.get("data");n&&(this.onSearchStart(n),this.onSearchProgress({content:n}),n.isDone&&this.onSearchDone({content:n})),this.manager.replayLastSearchEvent(this)},_showMessages:function(){this.$(".msg").show(),this.table.$el.hide(),this.paginator&&this.paginator.$el.hide()},_hideMessages:function(){this.$(".msg").hide(),this.table.$el.show(),this.paginator&&this.paginator.$el.show()},renderMessage:function(e){var t=this.$(".msg");t.length||(t=r('<div class="msg"></div>').appendTo(this.$el)),l.render(e,t),this._showMessages()},onSearchStart:function(){this._searchRunning=!0,this.clearResults(),this.renderMessage("waiting"),this.paginator&&this.paginator.settings.set("page",0)},onSearchDone:function(e){this._searchRunning=!1;var t=((e||{}).content||{}).resultPreviewCount||0;this.updateCount(t)},onSearchProgress:function(e){e=e||{};var t=e.content||{},n=t.resultPreviewCount||0;n>0&&this.updateCount(n)},onSearchCancelled:function(){this.renderMessage("cancelled")},onSearchRefresh:function(){this.renderMessage("refresh")},onSearchError:function(e,t){var n=l.getSearchErrorMessage(t)||e;this.renderMessage({level:"error",icon:"warning-sign",message:n})},onSearchFailed:function(e,t){var n=l.getSearchFailureMessage(e);this.renderMessage({level:"error",icon:"warning-sign",message:n})},applyFetchOptions:function(){if(!this.resultsModel)return;var e={count:this.metadata.get("pageSize"),offset:this.metadata.get("offset")};this.metadata.has("sortKey")&&(e.search=["|","sort","0",this.metadata.get("sortDirection")==="desc"?"-":"",JSON.stringify(this.metadata.get("sortKey"))].join(" ")),this.resultsModel.set(e)},updateCount:function(e){e===0&&(this.clearResults(),this._searchRunning?this.renderMessage("waiting"):this.renderMessage("no-results")),this.paginator&&this.paginator.settings.set("itemCount",e)},onFieldsChanged:function(){this.transformFieldsToArray(),this.renderResults()},transformFieldsToArray:function(){var e=this.settings.get("fields");i.isString(e)&&(e=r.trim(e),e[0]==="["&&e.slice(-1)==="]"?e=JSON.parse(e):e=i.map(e.match(w),function(e){return e.replace(E,"")}),this.settings.set("fields",e,{silent:!0}))},renderResults:function(){var e,t;if(!this.resultsModel||!this.resultsModel.hasData())return;this.collection=this.resultsModel.collection();if(this.settings.has("fields")&&!i.isEmpty(this.settings.get("fields"))){t=this.settings.get("fields");var n={},r=this.resultsModel.data().fields;i(t).contains("*")&&(t=i(t).chain().map(function(e){return e==="*"?i(r).select(function(e){return!i(t).contains(e)}):e}).flatten().unique().value()),i(r).each(function(e,t){n[e]=t}),e=i(this.resultsModel.data().rows).map(function(e){return i(t).map(function(t){return n.hasOwnProperty(t)?e[n[t]]:null})})}else e=this.resultsModel.data().rows,t=this.resultsModel.data().fields;this.results.set({rows:e,fields:t}),this._hideMessages()},clearResults:function(){this.paginator&&this.paginator.settings.set("itemCount",0),this.results.set({rows:[],fields:[]})},render:function(){return this.table.render(),this.paginator&&this.paginator.render(),this},remove:function(){this.table&&this.table.remove(),this.paginator&&this.paginator.remove(),this.settings&&(this.settings.off(),this.settings._sync&&this.settings._sync.destroy(),this.settings._syncMeta&&this.settings._syncMeta.destroy()),a.prototype.remove.call(this)},addRowExpansionRenderer:function(e){this.table.addRowExpansionRenderer(e),this._rendered&&this.render()},removeRowExpansionRenderer:function(e){this.table.removeRowExpansionRenderer(e),this._rendered&&this.render()},getRowExpansionRenderers:function(){return this.table.getRowExpansionRenderers()},expandRow:function(e){this.table.expandRow(e)},collapseRow:function(){this.table.collapseRow()},addCellRenderer:function(e){this.table.addCellRenderer(e),this._rendered&&this.render()},removeCellRenderer:function(e){this.table.removeCellRenderer(e),this._rendered&&this.render()},getCellRenderers:function(e){return this.table.getCellRenderers(e)},_onShowPagerChanged:function(){this.settings.get("showPager")!==!1?this.paginator||(this.paginator=new h({id:i.uniqueId(this.id+"-paginator"),el:r("<div></div>"),pageSize:this.metadata.get("pageSize")}),this.metadata.on("change:pageSize",this._onPageSizeChanged,this),this.paginator.settings.on("change:page",function(){var e=this.metadata.get("pageSize"),t=this.paginator.settings.get("page");this.metadata.set("offset",e*t)},this),this._onPaginatorPositionChange()):this.paginator&&(this.metadata.off("change:pageSize",this._onPageSizeChanged,this),this.paginator.settings.off("change:page"),this.paginator.remove(),this.paginator=null)},_onPageSizeChanged:function(){this.paginator.settings.set("pageSize",this.metadata.get("pageSize"))},_onPaginatorPositionChange:function(){var e=this.settings.get("pagerPosition")==="bottom"?"appendTo":"prependTo";this.paginator&&(this.paginator.$el.detach(),this.paginator.$el[e](this.$el))}});return S.BaseCellRenderer=p,S.BaseRowExpansionRenderer=d,S}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer('/*  */\n\n.splunk-paginator {\n    user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    margin-bottom: 5px;\n    padding-left: 15px;\n}\n.splunk-paginator .disabled, .splunk-paginator .selected {\n    color: #999;\n    cursor: default;\n}\n.splunk-paginator a {\n    border: 1px solid transparent;\n    border-radius: 3px;\n    padding-left: 5px;\n    padding-right: 5px;\n    text-decoration: none;\n    min-width: 20px;\n    line-height: 20px;\n    display: inline-block;\n    text-align: center;\n}\n.splunk-paginator a.selected, .splunk-paginator a:hover {\n    background: #eee;\n}\n.splunk-paginator span {\n    padding-left: 5px;\n    padding-right: 5px;\n}\n.splunk-paginator a.disabled:hover {\n    background: none;\n}.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:"";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\n.shared-resultstable .simpleResultsTableWrapper{width:100%;overflow:auto;}\n.shared-resultstable table .pos{color:#999999;text-align:right;font-size:11px;width:50px;}\n.shared-resultstable table tr>th:first-child,.shared-resultstable table tr>td:first-child{padding-left:20px;}\n.shared-resultstable table tr>th:last-child,.shared-resultstable table tr>td:last-child{padding-right:20px;}\n.shared-resultstable .table-chrome th a{color:#333333;text-decoration:none;}\n.shared-resultstable .table-chrome th.pos:after{content:"";}\n.shared-resultstable-resultstablemaster{overflow-x:auto;}.shared-resultstable-resultstablemaster table tr>th:first-child,.shared-resultstable-resultstablemaster table tr>td:first-child{padding-left:20px;}\n.shared-resultstable-resultstablemaster table tr>th:last-child,.shared-resultstable-resultstablemaster table tr>td:last-child{padding-right:20px;}\n.shared-resultstable-resultstablemaster td.numeric .multivalue-subcell{text-align:right;}\n.shared-resultstable-resultstablemaster td.timestamp,.shared-resultstable-resultstablemaster th.timestamp{min-width:150px;}\n.shared-resultstable-resultstablemaster table.single-column-table th.numeric{text-align:left;}\n.shared-resultstable-resultstablemaster table.single-column-table td.numeric{text-align:left;}.shared-resultstable-resultstablemaster table.single-column-table td.numeric .multivalue-subcell{text-align:left;}\n.shared-resultstable-resultstablemaster>.table>tbody>tr>td.with-overlay{padding-right:20px !important;}\n.shared-resultstable-resultstablemaster .overlay-cell{height:24px;width:15px;float:right;margin:-4px -20px -24px 0;}\n.shared-resultstable-resultstablemaster .overlay-cell-value{height:24px;width:0;border-left:15px solid #f5f5f5;}\n.shared-resultstable-resultstablemaster .heat-value{border-left-color:#d85d3c;}\n.shared-resultstable-resultstablemaster .max-value{border-left-color:#d85d3c;}\n.shared-resultstable-resultstablemaster .min-value{border-left-color:#6ab7c7;}\n.shared-resultstable-resultstablemaster .no-value{border-left-color:transparent;}\n.shared-resultstable-resultstablemaster .tbody tr.even td{background-color:transparent;}\n.shared-resultstable-resultstablemaster .tbody tr.odd td{background-color:#f5f5f5;}\n.shared-resultstable-resultstablemaster .wrapped-results th,.shared-resultstable-resultstablemaster .wrapped-results td{white-space:normal;}\n.shared-resultstable-resultstablemaster .not-wrapped-results th,.shared-resultstable-resultstablemaster .not-wrapped-results td{white-space:nowrap;}\n.shared-resultstable-resultstablemaster thead tr.sorts th.highlighted{background-image:-moz-linear-gradient(top, #f8f8f8, #f8f8f8);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f8f8f8), to(#f8f8f8));background-image:-webkit-linear-gradient(top, #f8f8f8, #f8f8f8);background-image:-o-linear-gradient(top, #f8f8f8, #f8f8f8);background-image:linear-gradient(to bottom, #f8f8f8, #f8f8f8);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#fff8f8f8\', endColorstr=\'#fff8f8f8\', GradientType=0);-webkit-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);-moz-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);background-color:#f8f8f8;border-color:#c7c7c7;border-top-color:#c7c7c7;border-bottom-color:#c7c7c7;background-position:0 0;}\n.shared-resultstable-resultstablemaster tbody td.highlighted,.shared-resultstable-resultstablemaster tbody tr.highlighted>td{background-color:#e4e4e4 !important;cursor:pointer;}\n.shared-resultstable-resultstablemaster .multivalue-subcell.highlighted{background-color:#e4e4e4 !important;cursor:pointer;}\n.shared-resultstable-resultstablemaster .scroll-table-wrapper{height:100%;}\n.shared-resultstable-resultstablemaster th.col-info{padding-left:20px;padding-right:0px;}.shared-resultstable-resultstablemaster th.col-info .icon-info{display:block;width:15px;}\n.shared-resultstable-resultstablemaster table>tbody>tr>td.row-expansion-toggle{border-right:1px solid #D5D5D5;padding:0px;}.shared-resultstable-resultstablemaster table>tbody>tr>td.row-expansion-toggle a{color:#333333;display:block;padding:4px 0px 4px 20px;width:15px;height:16px;}\n.shared-resultstable-resultstablemaster table>tbody>tr>td.row-expansion-toggle .icon-triangle-right-small:before{content:"\\203A";}\n.shared-resultstable-resultstablemaster table>tbody>tr>td.row-expansion-toggle .icon-triangle-down-small:before{content:"\\02C5";}\n.shared-resultstable-resultstablemaster tr.expanded-row td,.shared-resultstable-resultstablemaster tr.expanded-content-row td{background-color:#E4E4E4 !important;}\n.shared-resultstable-resultstablemaster tr.expanded-content-row td{border-top:none;color:#333333;}\n')}),requirejs.s.contexts._.nextTick=requirejs.nextTick;
