define("views/shared/searchbar/Apps",["underscore","module","views/shared/controls/SyntheticSelectControl","uri/route"],function(e,t,n,r){return n.extend({moduleId:t.id,initialize:function(){this.options=e.defaults({className:"btn-group",toggleClassName:"btn",iconURLClassName:"menu-icon",menuClassName:"dropdown-menu-tall dropdown-menu-apps",label:e("App: ").t(),items:[],model:this.model,modelAttribute:"display.prefs.searchContext",popdownOptions:{attachDialogTo:"body"}},this.options),this.collection.on("change",e.debounce(this.update,0),this),n.prototype.initialize.call(this,this.options),this.update()},update:function(){var e=[];this.collection.each(function(t){var n=t.get("navData");if(n&&n.searchView){var i=this.options.applicationModel,s=r.appIconAlt(i.get("root"),i.get("locale"),i.get("owner"),t.get("appName"));e.push({value:t.get("appName"),label:t.get("appLabel"),iconURL:s})}}.bind(this)),this.setItems(e)}})}),define("models/search/SearchBar",["models/Base"],function(e){return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments)},defaults:{assistantOpen:!1,assistantRolloverEnabled:!0,assistantCursor:0,assistantRolloverTimer:0},sync:function(){throw"Method disabled"}})}),define("util/keyboard",[],function(){var e={};return e.KEYS={ENTER:13,UP_ARROW:38,DOWN_ARROW:40,LEFT_ARROW:37,RIGHT_ARROW:39,PAGE_DOWN:34,PAGE_UP:33,SPACE_BAR:32,TAB:9,ESCAPE:27},e}),define("views/shared/searchbar/input/SearchField",["jquery","underscore","module","views/Base","views/shared/delegates/TextareaResize","util/keyboard","util/dom_utils"],function(e,t,n,r,i,s,o){return r.extend({moduleId:n.id,className:"search-field-wrapper",initialize:function(){r.prototype.initialize.apply(this,arguments),this.multiline=!1,this.useSyntheticPlaceholder=!o.supportsNativePlaceholder(),this.activate()},startListening:function(){this.listenTo(this.model.searchBar,"searchFieldfocus",this.searchFieldfocus),this.listenTo(this.model.searchBar,"change:search",function(){this.setSearchString(this.model.searchBar.get("search")||"")}),this.listenTo(this.model.content,"applied",function(e){this.model.searchBar.trigger("closeAssistant"),this._onFormSubmit(e)}),this.listenTo(this.model.content,"change:search",function(){this.setSearchString(this.model.content.get("search")||"")}),this.listenTo(this.model.content,"change:display.page.search.mode",function(){this._onFormSubmit({silent:!0})}),this.options.disableOnSubmit&&this.listenTo(this.model.content,"enableSearchInput",function(){this.$(".search-field").attr("disabled",!1)}),this.listenTo(this.model.searchBar,"setCaretPositionToEnd",this.setCaretPositionToEnd)},activate:function(e){return this.active?r.prototype.activate.apply(this,arguments):(this.$el.html()&&(this.options.disableOnSubmit&&(this.$(".search-field").attr("disabled",!1),this.searchFieldfocus()),this.render()),r.prototype.activate.apply(this,arguments))},deactivate:function(e){return this.active?(r.prototype.deactivate.apply(this,arguments),this.options.disableOnSubmit&&this.$el.html()&&this.$(".search-field").attr("disabled",!0),this):r.prototype.deactivate.apply(this,arguments)},events:{"change textarea":function(e){this.updatePlaceholder()},"propertychange .search-field":function(e){this.updatePlaceholder()},"click .placeholder":function(e){this.$(".search-field").focus()},"mouseup textarea":function(e){this.updatePlaceholder()},"focus .search-field":function(e){this.model.searchBar.set("assistantCursor",-1)},"keyup .search-field":"onSearchFieldKeyUp","keydown .search-field":"onSearchFieldKeyDown"},updatePlaceholder:function(){this.useSyntheticPlaceholder&&(this.$placeholder||(this.$placeholder=this.$(".placeholder")),this.$placeholder[this.$(".search-field").val()===""?"show":"hide"]())},onSearchFieldKeyUp:function(e){if(!e.metaKey&&!e.ctrlKey){this.updateMultiline();switch(e.keyCode){case s.KEYS.ESCAPE:case s.KEYS.LEFT_ARROW:case s.KEYS.RIGHT_ARROW:case s.KEYS.UP_ARROW:return;case s.KEYS.ENTER:e.preventDefault();return;default:}this.model.searchBar.set({search:this.$(".search-field").val()}),this.model.searchBar.trigger("openAssistant"),this.updatePlaceholder()}},onSearchFieldKeyDown:function(e){if(!e.metaKey&&!e.ctrlKey)switch(e.keyCode){case s.KEYS.TAB:this.model.searchBar.trigger("closeAssistant");break;case s.KEYS.DOWN_ARROW:!e.shiftKey&&(!this.children.resize.isMultiline()||this.children.resize.caretIsLast())&&(this.model.searchBar.trigger("downArrow"),e.preventDefault());break;case s.KEYS.ENTER:if(e.shiftKey)return;this.model.searchBar.trigger("closeAssistant"),this._onFormSubmit(),e.preventDefault();break;default:}},updateMultiline:function(){if(this.children.resize){var e=this.children.resize.isMultiline();e&&e!=this.multiline?(this.$el.addClass("multiline"),this.multiline=!0):!e&&e!=this.multiline&&(this.$el.removeClass("multiline"),this.multiline=!1)}},getSearchFieldValue:function(){return e.trim(this.$(".search-field").val())},_onFormSubmit:function(e){e=e||{};var t=this.model.searchBar.get("search"),n=this.model.content.get("search"),r=this.getSearchFieldValue();t!==r&&(this.model.searchBar.set("search",r),t=r),t&&(this.options.disableOnSubmit&&this.$(".search-field").attr("disabled",!0),n!==t?this.model.content.set({search:t},e):e.silent||(this.model.content.unset("search",{silent:!0}),this.model.content.set({search:t})))},setSearchString:function(e){var t=this.$(".search-field").val();this.model.searchBar.set("search",e),e!==t&&this.$(".search-field").val(e),this.updatePlaceholder(),this.searchFieldfocus(),this.children.resize&&(this.children.resize.resizeTextarea(),this.updateMultiline())},searchFieldfocus:function(){var e=this.$(".search-field");e.attr("disabled")||e.focus()},setCaretPositionToEnd:function(){var e=this.$(".search-field");o.setCaretPosition(e.get(0),e.val().length)},render:function(){var n;if(this.$el.html())n=this.$(".search-field"),this.$(".search-field").val(this.model.searchBar.get("search"));else{var r=t.template(this.template,{placeholder:t("enter search here...").t(),useSyntheticPlaceholder:this.useSyntheticPlaceholder,inputValue:this.model.searchBar.get("search")});this.$el.html(r),n=this.$(".search-field"),t.defer(function(){this.options.useAutoFocus&&this.searchFieldfocus();var t=Math.floor((e(window).height()-100)/parseInt(n.css("lineHeight"),10));this.children.resize=new i({el:n.get(0),maxLines:t,minHeight:20}),this.updateMultiline(),this.setCaretPositionToEnd()}.bind(this))}return this.updatePlaceholder(),this.options.disableOnSubmit&&n.attr("disabled",!1),this},reflow:function(){var e=this.$(".search-field").get(0),t=this.model.searchBar.get("search")||"",n=o.getCaretPosition(e);o.setCaretPosition(e,n||t.length),r.prototype.reflow.apply(this,arguments)},template:'                <textarea rows="1" name="q" spellcheck="false" class="search-field" autocorrect="off" autocapitalize="off"                <% if (!useSyntheticPlaceholder) { %> placeholder="<%- placeholder %>" <% } %>><%- inputValue %></textarea>                <% if (useSyntheticPlaceholder) { %>                 <span class="placeholder"><%- placeholder %></span>                <% } %>                '})}),define("models/search/SHelper",["jquery","underscore","models/Base","backbone","splunk.util"],function(e,t,n,r,i){var s=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments)},url:i.make_url("api/shelper"),sync:function(n,i,s){if(n!=="read")throw new Error("invalid method: "+n);s=s||{};var o={data:{},dataType:"text"},u=t.isFunction(i.url)?i.url():i.url||i.id;return o.url=u,e.extend(!0,o,s),r.sync.call(this,n,i,o)},parse:function(e){return{raw:e}}});return s}),define("views/shared/searchbar/input/SearchAssistant",["jquery","underscore","module","views/Base","models/search/SHelper","util/keyboard","util/dom_utils","splunk.util","jquery.bgiframe"],function(e,t,n,r,i,s,o,u){return r.extend({moduleId:n.id,className:"search-assistant-wrapper",initialize:function(){r.prototype.initialize.apply(this,arguments),this.debouncedFillAssistant=t.debounce(this.fillAssistant,250).bind(this),this.nameSpace=this.uniqueNS(),this.model.sHelper=new i,this.windowListenersActive=!1,this.activate({skipRender:!0})},startListening:function(){this.listenTo(this.model.searchBar,"change:assistantCursor",this._highlightKeyword),this.listenTo(this.model.searchBar,"openAssistant",function(){this.model.searchBar.get("assistantOpen")?this.debouncedFillAssistant():this.options.autoOpenAssistant&&this.openAssistant()}),this.listenTo(this.model.searchBar,"closeAssistant",this.closeAssistant),this.listenTo(this.model.searchBar,"downArrow",this.handleDownArrow)},activate:function(t){return t=t||{},this.ensureDeactivated(),this.windowListenersActive||(e(window).on("resize."+this.nameSpace,this.setAssistantWidth.bind(this)),e(document).on("keyup."+this.nameSpace,function(e){e.keyCode==s.KEYS["ESCAPE"]&&this.closeAssistant()}.bind(this)),e(document).on("click."+this.nameSpace,function(t){if(t.target===this.$el[0]||e.contains(this.$el[0],t.target))return;this.closeAssistant()}.bind(this)),this.windowListenersActive=!0),t.skipRender||(this.options.autoOpenAssistant=u.normalizeBoolean(this.model.content.get("display.prefs.autoOpenSearchAssistant")),this.render()),r.prototype.activate.apply(this,arguments)},deactivate:function(t){return this.active?(r.prototype.deactivate.apply(this,arguments),this.model.sHelper.fetchAbort(),this.resetFillAssistantFlags(),this.closeAssistant(),e(document).off(".assistantResizeActive"),this):r.prototype.deactivate.apply(this,arguments)},events:{"click .search-assistant-autoopen-toggle":function(e){this.setAutoOpen(!this.options.autoOpenAssistant),e.preventDefault()},"click .search-assistant-activator":function(e){this.model.searchBar.trigger("focusSearchField"),this.model.searchBar.get("assistantOpen")?this.closeAssistant():this.openAssistant(),e.preventDefault()},"keydown a.sakeyword":function(e){if(!e.metaKey&&!e.ctrlKey)switch(e.keyCode){case s.KEYS.DOWN_ARROW:if(!e.shiftKey)return this.handleDownArrow(e);break;case s.KEYS.UP_ARROW:this.model.searchBar.get("assistantOpen")&&this.model.searchBar.get("assistantKeywordCount")>0&&(this.selectPreviousKeyword(),e.preventDefault());return;case s.KEYS.TAB:case s.KEYS.ENTER:case s.KEYS.RIGHT_ARROW:case s.KEYS.SPACE_BAR:return this.onSuggestionSelect(e);default:}},"keyup a.sakeyword":"onKeywordKeyUp","keyup .salink":"onKeywordKeyUp","click .search-assistant-container a":"onSuggestionSelect","mousedown .search-assistant-resize":"resizeAssistant","click .saMoreLink":function(n){var r=e(n.target);r.hasClass("saMoreLinkOpen")?(r.removeClass("saMoreLinkOpen").html(t.t("More &raquo;")),e(r.attr("divToShow")).css("display","none")):(r.addClass("saMoreLinkOpen").html(t.t("&laquo; Less")),e(r.attr("divToShow")).css("display","block"))}},setAutoOpen:function(e){this.options.autoOpenAssistant=e,u.normalizeBoolean(this.model.content.get("display.prefs.autoOpenSearchAssistant"))!==e&&this.model.content.set({"display.prefs.autoOpenSearchAssistant":e}),this.$assistantAutoOpenToggle.find("i").toggleClass("icon-check",this.options.autoOpenAssistant)},handleDownArrow:function(e){var t=this.model.searchBar.get("assistantOpen"),n=this.model.searchBar.get("assistantKeywordCount"),r=this.model.searchBar.get("assistantCursor");e&&e.preventDefault(),t&&n>0?r>=n-1?this.model.searchBar.set("assistantCursor",n-1):this.model.searchBar.set("assistantCursor",++r):!t&&!this.model.searchBar.get("search")&&this.openAssistant()},onKeywordKeyUp:function(e){if(!e.metaKey&&!e.ctrlKey&&!e.shiftKey)switch(e.keyCode){case s.KEYS.DOWN_ARROW:case s.KEYS.UP_ARROW:case s.KEYS.TAB:case s.KEYS.ENTER:case s.KEYS.LEFT_ARROW:case s.KEYS.RIGHT_ARROW:case s.KEYS.SPACE_BAR:e.preventDefault();return;default:}},resizeAssistant:function(t){var n=t.pageY,r=this.$assistantContainer.height();t.preventDefault(),t.stopPropagation(),this.$assistantResize.on("click.assistantResizeActive",function(e){e.preventDefault(),e.stopPropagation()}.bind(this)),e(document).on("mousemove.assistantResizeActive",function(e){var t=r-(n-e.pageY);t=t<75?0:t,t=Math.min(t,500),this.setAssistantHeight(t),e.preventDefault(),e.stopPropagation()}.bind(this)),e(document).on("mouseup.assistantResizeActive",function(t){var i=r-(n-t.pageY);i<75&&(this.closeAssistant(),this.setAssistantHeight(r)),e(document).off(".assistantResizeActive")}.bind(this))},closeAssistant:function(){this.model.sHelper.fetchAbort(),this.resetFillAssistantFlags();if(!this.$assistantContainer||!this.model.searchBar.get("assistantOpen"))return;this.$assistantContainer.hide(),this.$assistantAutoOpenToggle.hide(),this.$assistantActivator.addClass("icon-triangle-down-small").removeClass("icon-triangle-up-small"),this.$assistantResize.removeClass("search-assistant-resize-active"),this.$el.removeClass("open"),this.model.searchBar.set("assistantOpen",!1)},openAssistant:function(){this.model.searchBar.get("assistantOpen")||(this.$assistantActivator.addClass("icon-triangle-up-small").removeClass("icon-triangle-down-small"),this.$assistantResize.addClass("search-assistant-resize-active"),this.$el.addClass("open"),this.model.searchBar.set("assistantOpen",!0),this.fillAssistant())},resetFillAssistantFlags:function(){this.assistantFillPending=!1,this.assistantNeedsUpdate=!1},fillAssistant:function(){if(this.model.searchBar.get("assistantOpen"))if(!this.assistantFillPending){var e=u.addLeadingSearchCommand(this.model.searchBar.get("search")||"*",!0);this.assistantFillPending=!0,this.model.sHelper.safeFetch({data:{snippet:"true",snippetEmbedJS:"false",namespace:this.model.application.get("app")||"search",search:e,useTypeahead:this.options.useTypeahead,useAssistant:this.options.useAssistant,showCommandHelp:this.options.showCommandHelp,showCommandHistory:this.options.showCommandHistory,showFieldInfo:this.options.showFieldInfo},success:function(){this.$assistantContainer.html(this.model.sHelper.get("raw")||""),this.assistantFillPending=!1,this.fillAssistantCompleteCallback()}.bind(this)})}else this.assistantNeedsUpdate=!0},fillAssistantCompleteCallback:function(){this.model.searchBar.get("assistantOpen")&&(this.assistantNeedsUpdate&&(this.assistantNeedsUpdate=!1,this.fillAssistant()),this.setAssistantWidth(),this.$assistantContainer.show().bgiframe().scrollTop(0),this.$assistantAutoOpenToggle.show(),this.setAssistantHeight(this.$assistantContainer.height()||250),this.model.searchBar.set({assistantKeywordCount:this.$(".sakeyword").length,assistantCursor:-1}),this.model.searchBar.trigger("searchFieldfocus"))},setAssistantHeight:function(e){e>500&&(e=500),this.$assistantContainer.height(e),this.$(".saHelpWrapper").css("min-height",e)},setAssistantWidth:function(){var e=this.$(".assistantInner");e.length&&this.$el.width()<this.options.minWithForTwoColumns?e.addClass("assistant-inner-narrow"):e.removeClass("assistant-inner-narrow")},_highlightKeyword:function(){if(this.model.searchBar.get("assistantOpen")){var t=this.model.searchBar.get("assistantCursor"),n=e(".sakeyword",this.$assistantContainer).removeClass("saKeywordSelected").slice(t,t+1).addClass("saKeywordSelected");if(n.length){var r=this.$assistantContainer,i=r.scrollTop(),s=r.scrollTop()+r.height(),o=n.position().top+i,u=n.outerHeight();o<i?r.scrollTop(o):o+u>s&&r.scrollTop(o+u-r.height()),n.focus()}}},selectPreviousKeyword:function(){var e=this.model.searchBar.get("assistantCursor");e<=0?(this.model.searchBar.set("assistantCursor",-1),this.model.searchBar.trigger("searchFieldfocus")):this.model.searchBar.set("assistantCursor",--e)},onSuggestionSelect:function(t){var n=e.trim(e(t.currentTarget).attr("replacement"));this.model.searchBar.get("assistantOpen")&&n&&(n.substr(-1)!="="&&(n+=" "),this.model.searchBar.set("search",n),this.fillAssistant(),this.model.searchBar.trigger("setCaretPositionToEnd"),t.preventDefault())},remove:function(){return e(window).off("resize."+this.nameSpace),e(document).off("keyup."+this.nameSpace),e(document).off("click."+this.nameSpace),e(document).off(".assistantResizeActive"),r.prototype.remove.apply(this,arguments)},render:function(){if(this.$el.html())return this;var e=t.template(this.template,{});return this.$el.html(e),this.$assistantWrapper=this.$el,this.$assistantContainer=this.$(".search-assistant-container"),this.$assistantAutoOpenToggle=this.$(".search-assistant-autoopen-toggle"),this.$assistantActivator=this.$(".search-assistant-activator"),this.$assistantResize=this.$(".search-assistant-resize"),this.setAutoOpen(this.options.autoOpenAssistant),this},template:'                <div class="search-assistant-container-wrapper"><div class="search-assistant-container"></div></div>                <a class="search-assistant-autoopen-toggle" href="" style="display:none;"><i></i><%= _("Auto Open").t() %></a>                   <div class="search-assistant-resize"></div>                <a href="#" class="search-assistant-activator icon-triangle-down-small"></a>            '})}),define("views/shared/searchbar/input/Master",["jquery","underscore","models/search/SearchBar","module","views/Base","views/shared/searchbar/input/SearchField","views/shared/searchbar/input/SearchAssistant","util/keyboard","splunk.util"],function(e,t,n,r,i,s,o,u,a){return i.extend({moduleId:r.id,initialize:function(r){i.prototype.initialize.apply(this,arguments),this.options=e.extend(!0,{},this.options,r||{});var u={useTypeahead:!0,useAssistant:!0,useAutoFocus:!0,autoOpenAssistant:a.normalizeBoolean(this.model.content.get("display.prefs.autoOpenSearchAssistant")),showCommandHelp:!0,showCommandHistory:!0,showFieldInfo:!1,maxSearchBarLines:80,minWithForTwoColumns:560,disableOnSubmit:!1};t.defaults(this.options,u),this.model.searchBar=new n,this.children.searchField=new s(e.extend(!0,{},this.options,{model:{content:this.model.content,searchBar:this.model.searchBar}})),this.options.useAssistant&&(this.children.searchAssistant=new o(e.extend(!0,{},this.options,{model:{searchBar:this.model.searchBar,content:this.model.content,application:this.model.application}}))),this.activate()},startListening:function(){this.listenTo(this.model.searchBar,"change:assistantOpen",function(){this.model.searchBar.get("assistantOpen")?this.$el.addClass("search-assistant-open"):this.$el.removeClass("search-assistant-open")})},activate:function(e){return this.active?i.prototype.activate.apply(this,arguments):(this.model.searchBar.set({search:this.model.content.get("search")}),i.prototype.activate.apply(this,arguments))},deactivate:function(e){return this.active?(i.prototype.deactivate.apply(this,arguments),this.model.searchBar.clear({setDefaults:!0}),this):i.prototype.deactivate.apply(this,arguments)},render:function(){if(this.$el.html())return this;var e=t.template(this.template,{});return this.$el.html(e),this.children.searchField.render().appendTo(this.$el),this.options.useAssistant&&this.children.searchAssistant.render().appendTo(this.$el),this},template:'                <div class="search-field-background"></div>            '})}),define("views/shared/searchbar/Submit",["jquery","underscore","backbone","module","views/Base"],function(e,t,n,r,i){return i.extend({moduleId:r.id,initialize:function(){i.prototype.initialize.apply(this,arguments)},events:{"click .btn":function(e){this.model.trigger("applied"),e.preventDefault()}},render:function(){if(this.$el.html())return this;var e=t.template(this.template,{});return this.$el.html(e),this},template:'                <a class="btn" href="#"><i class="icon-search-thin"></i></a>            '})}),define("views/shared/searchbar/Master",["jquery","underscore","backbone","module","views/Base","views/shared/searchbar/Apps","views/shared/searchbar/input/Master","views/shared/timerangepicker/Master","views/shared/searchbar/Submit"],function(e,t,n,r,i,s,o,u,a){return i.extend({moduleId:r.id,className:"search-bar-wrapper",initialize:function(){i.prototype.initialize.apply(this,arguments),t.defaults(this.options,{showTimeRangePicker:!0,disableOnSubmit:!1,primaryAction:!1}),this.showTimeRangePicker=this.options.showTimeRangePicker,this.collection&&this.collection.apps&&(this.children.apps=new s({collection:this.collection.apps,model:this.model.state,applicationModel:this.model.application})),this.children.searchInput=new o(e.extend(!0,{},this.options,{model:{content:this.model.state,application:this.model.application}})),this.children.submit=new a({model:this.model.state})},render:function(){if(!this.$el.html()){var e=t.template(this.template,{showTimeRangePicker:this.showTimeRangePicker,primary:this.options.primaryAction});this.$el.html(e),this.children.apps&&this.children.apps.render().appendTo(this.$(".search-apps")),this.children.searchInput.render().appendTo(this.$(".search-input")),this.showTimeRangePicker&&(this.children.timeRangePicker=new u({model:{state:this.model.state,timeRange:this.model.timeRange,appLocal:this.model.appLocal,user:this.model.user,application:this.model.application},collection:this.collection.times,timerangeClassName:"btn"}),this.children.timeRangePicker.render().appendTo(this.$(".search-timerange"))),this.children.submit.render().appendTo(this.$(".search-button"))}return this},template:'                <form method="get" action="" class="search-form">                    <table class="search-bar <%- primary ? "search-bar-primary" : "" %>">                        <tbody>                            <tr>                                <td class="search-input" width="100%"></td>                                <td class="search-apps"></td>                                <% if (showTimeRangePicker) { %>                                    <td class="search-timerange"></td>                                <% } %>                                <td class="search-button"></td>                            </tr>                        </tbody>                    </table>                </form>            '})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/search-bar.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/searchbarview",["require","exports","module","jquery","underscore","./mvc","backbone","./basesplunkview","util/console","./timerangeview","views/shared/searchbar/Master","models/shared/TimeRange","./utils","./sharedmodels","splunk.config","css!../css/search-bar"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("./mvc"),o=e("backbone"),u=e("./basesplunkview"),a=e("util/console"),f=e("./timerangeview"),l=e("views/shared/searchbar/Master"),c=e("models/shared/TimeRange"),h=e("./utils"),p=e("./sharedmodels"),d=e("splunk.config");e("css!../css/search-bar");var v=u.extend({moduleId:n.id,className:"splunk-searchbar",options:{"default":undefined,managerid:null,timerange:!0,useAssistant:!0,autoOpenAssistant:!0,value:undefined},initialize:function(){var e=this;this.configure(),this.settings.enablePush("value"),this.settings.has("timepicker")&&(a.warn('The "%s" setting of class "%s" is deprecated. Use "%s" instead.',"timepicker","SearchBarView","timerange"),this.settings.set("timerange",this.settings.get("timepicker")),this.settings.unset("timepicker")),this._onDefaultChange(),this._state=new o.Model({"dispatch.earliest_time":this.settings.get("earliest_time"),"dispatch.latest_time":this.settings.get("latest_time"),search:this.settings.get("value")||""});var t=p.get("app"),n=p.get("user"),i=p.get("appLocal"),s=p.get("times"),u=new c;u.save({earliest:this.settings.get("earliest_time"),latest:this.settings.get("latest_time")}),this.timerange=this._createTimeRange(this.settings),this.timepicker=this.timerange,this._dfd=r.when(s.dfd,n.dfd,i.dfd).done(function(){var r=e.settings.get("useAssistant")&&!d.INDEPENDENT_MODE,o=e.settings.get("autoOpenAssistant")&&r;e.searchbar=new l({showTimeRangePicker:!0,useAssistant:r,autoOpenAssistant:o,disableOnSubmit:!1,collection:{times:s},model:{state:e._state,timeRange:u,user:n,appLocal:i,application:t}})}),this.settings.on("change:value",function(t,n,r){r=r||{};var i=r._self;i||e.val(n||"")}),this.bindToComponentSetting("managerid",this._onManagerChange,this),this._state.on("change:search",this._onSearchChange,this),this.settings.on("change:timerange",this._onDisplayTimeRangeChange,this),this.settings.on("change:default",this._onDefaultChange,this)},_createTimeRange:function(e){var t=e.extractWithPrefix("timerange_"),n=e.extractWithPrefix("timepicker_");i.isEmpty(n)||a.warn('The "%s" settings of class "%s" are deprecated. Use "%s" instead.',"timepicker_*","SearchBarView","timerange_*");var r=i.extend({managerid:e.get("managerid")},t,n);return new f(r)},_onDefaultChange:function(e,t,n){var r=this.settings.previous("default"),i=this.settings.get("default"),s=this.settings.get("value");i!==undefined&&(s===r||s===undefined)&&this.settings.set("value",i)},_onDisplayTimeRangeChange:function(){var e=this;r.when(this._dfd).done(function(){e.settings.get("timerange")?e.searchbar.children.timeRangePicker.$el.show():e.searchbar.children.timeRangePicker.$el.hide()})},_onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.manager=t;var n=this;i.defer(function(){n._updateQuery()})},render:function(){var e=this;return r.when(this._dfd).done(function(){e._rendered||(e.searchbar.render(),e._patchTimePicker(),e.$el.append(e.searchbar.el),e._onDisplayTimeRangeChange(),e._rendered=!0)}),this},_patchTimePicker:function(){this.searchbar.children.timeRangePicker.setElement(this.timerange.el),this.timerange.render(),this.searchbar.$(".search-timerange").empty().append(this.timerange.el),r(this.timerange.el).addClass("btn-group"),h.syncModels(this.timerange.timepicker.model.timeRange,this.searchbar.children.timeRangePicker.model.timeRange,{auto:!0})},val:function(e){if(e===undefined)return this._getSearch();this._setSearch(e),this.settings.unset("value",{_self:!0}),this.settings.set("value",e,{_self:!0}),this.trigger("change",e,this)},_onSearchChange:function(e,t,n){n=n||{};var r=n._self;r||this.val(t)},_getSearch:function(){return this._state.get("search")},_setSearch:function(e){this._state.set("search",e,{_self:!0})},_updateQuery:function(){if(this.manager){var e=this._state.get("search")||"",t=(this.manager.settings.resolve()||"").trim();!e&&t&&this._setSearch(t)}}});return v}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer(".clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:\"\";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\nform.search-form{margin-bottom:0;}\n.search-bar .btn,.search-bar .btn.dropdown-toggle{background-color:#f4f4f4;background-image:-moz-linear-gradient(top, #f8f8f8, #eeeeee);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f8f8f8), to(#eeeeee));background-image:-webkit-linear-gradient(top, #f8f8f8, #eeeeee);background-image:-o-linear-gradient(top, #f8f8f8, #eeeeee);background-image:linear-gradient(to bottom, #f8f8f8, #eeeeee);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff8f8f8', endColorstr='#ffeeeeee', GradientType=0);background-color:#eeeeee;border:1px solid #bfbfbf;border-top-color:#bfbfbf;border-bottom-color:#bfbfbf;color:#333333;-webkit-box-shadow:inset 0px 1px 0 #fdfdfd;-moz-box-shadow:inset 0px 1px 0 #fdfdfd;box-shadow:inset 0px 1px 0 #fdfdfd;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;line-height:28px;height:28px;white-space:nowrap;border-left:none;}.search-bar .btn:hover,.search-bar .btn.dropdown-toggle:hover{background-image:-moz-linear-gradient(top, #f8f8f8, #f8f8f8);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f8f8f8), to(#f8f8f8));background-image:-webkit-linear-gradient(top, #f8f8f8, #f8f8f8);background-image:-o-linear-gradient(top, #f8f8f8, #f8f8f8);background-image:linear-gradient(to bottom, #f8f8f8, #f8f8f8);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff8f8f8', endColorstr='#fff8f8f8', GradientType=0);-webkit-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);-moz-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);background-color:#f8f8f8;border-color:#c7c7c7;border-top-color:#c7c7c7;border-bottom-color:#c7c7c7;background-position:0 0;}\n.search-bar td{padding:0;vertical-align:top;}\n.search-bar td.search-input{width:100%;}\n.search-bar .search-timerange .btn{white-space:nowrap;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;min-width:55px;*display:inline;*zoom:1;*position:relative;*margin-top:-1px;}\n.search-bar .search-button .btn{-webkit-border-top-right-radius:4px;-moz-border-radius-topright:4px;border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;-moz-border-radius-bottomright:4px;border-bottom-right-radius:4px;margin-left:-2px;font-size:26px;}\n.search-bar .search-timerange .shared-timerangepicker .btn .time-label{display:inline-block;*display:inline;vertical-align:middle;max-width:10em;overflow:hidden;text-overflow:ellipsis;}\n.shared-searchbar-input{position:relative;padding:0;}.shared-searchbar-input span.placeholder{display:none;padding:8px 0 ;line-height:20px;display:block;position:absolute;z-index:1;margin:0;top:0;left:9px;color:#999999;cursor:text;z-index:3;}\n.shared-searchbar-input textarea[disabled=\"disabled\"]{background-color:#eeeeee;}\n.shared-searchbar-input textarea.search-field{width:100%;display:block;line-height:20px;min-height:38px;margin:0;overflow:hidden;resize:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #bfbfbf;border-top-color:#bfbfbf;border-bottom-color:#bfbfbf;-webkit-border-top-left-radius:4px;-moz-border-radius-topleft:4px;border-top-left-radius:4px;-webkit-border-bottom-left-radius:4px;-moz-border-radius-bottomleft:4px;border-bottom-left-radius:4px;-webkit-border-top-right-radius:0;-moz-border-radius-topright:0;border-top-right-radius:0;-webkit-border-bottom-right-radius:0;-moz-border-radius-bottomright:0;border-bottom-right-radius:0;position:relative;font-family:'Droid Sans Mono','Consolas','Monaco','Courier New',Courier,monospace;padding-top:8px;padding-bottom:8px;}\n.shared-searchbar-input .shadowTextarea{*white-space:pre;*word-wrap:break-word;}\n.shared-searchbar-input.multiline .search-assistant-resize{margin:0;}\n.shared-searchbar-input.multiline textarea.search-field,.shared-searchbar-input.search-assistant-open textarea.search-field{-webkit-border-bottom-right-radius:0;-moz-border-radius-bottomright:0;border-bottom-right-radius:0;-webkit-border-bottom-left-radius:0;-moz-border-radius-bottomleft:0;border-bottom-left-radius:0;border-bottom-color:#cccccc;}\n.search-assistant-wrapper{position:relative;width:100%;height:0;}.search-assistant-wrapper.open{z-index:406;}\n.search-assistant-wrapper .search-assistant-autoopen-toggle{height:20px;position:absolute;right:17px;top:0;padding:5px 3px 5px 10px;background-color:rgba(245, 245, 245, 0.8);}.search-assistant-wrapper .search-assistant-autoopen-toggle>.icon-check{text-decoration:none;display:inline-block;margin-right:3px;}\n.search-assistant-wrapper .search-assistant-container{display:none;position:relative;border:1px solid #cccccc;border-bottom:0px;border-top:0px;overflow:auto;background:#eeeeee url('/static/img/skins/default/bg_search_assistant.png') left top repeat-y;background:-moz-linear-gradient(left, #ffffff 369px, transparent 370px),#f5f5f5;background:-ms-linear-gradient(left, #ffffff 369px, transparent 370px),#f5f5f5;background:-webkit-gradient(linear, 369px 0, 370px 0, from(#ffffff), to(transparent)),#f5f5f5;background:-webkit-linear-gradient(left, #ffffff 369px, transparent 370px),#f5f5f5;background:linear-gradient(left, #ffffff 369px, transparent 370px),#f5f5f5;background-position:0 0;}.search-assistant-wrapper .search-assistant-container .saTypeaheadWrapper,.search-assistant-wrapper .search-assistant-container .saHelpWrapper{float:left;max-width:50%;}\n.search-assistant-wrapper .search-assistant-container .saTypeaheadWrapper{margin-right:-370px;width:370px;}.search-assistant-wrapper .search-assistant-container .saTypeaheadWrapper h4{font-size:inherit;color:#333333;font-weight:normal;padding:5px 10px 0 5px;}\n.search-assistant-wrapper .search-assistant-container .saTypeaheadWrapper a+h4{margin-top:10px;}\n.search-assistant-wrapper .search-assistant-container .saTypeaheadWrapper a{padding:0 10px 0 5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}\n.search-assistant-wrapper .search-assistant-container .saTypeaheadWrapper a:hover{text-decoration:none;}\n.search-assistant-wrapper .search-assistant-container .saHelpWrapper{margin-left:370px;max-width:605px;}\n.search-assistant-wrapper .search-assistant-container .saNotice>strong{font-weight:normal;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent{padding:9px;}.search-assistant-wrapper .search-assistant-container .saHelpContent:before{content:'';display:block;float:right;height:20px;width:85px;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent .splFont-mono{background:transparent;border:none;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent h4{margin-top:1px;font-size:inherit;color:#333333;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent h4:first-child{margin-top:0;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent .intro>h4{color:#65a637;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent .intro+h4{margin-top:10px;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent .saHeadingNav{margin-top:10px;}.search-assistant-wrapper .search-assistant-container .saHelpContent .saHeadingNav h4{color:#333333;display:inline;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent .saHeadingNav .splPipe{display:inline-block;width:30px;overflow:hidden;text-indent:50px;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent h4.saExamplesHeader{margin-top:10px;color:#333333;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent .saExamples{margin-top:0px;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent dt{margin-top:10px;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent dt,.search-assistant-wrapper .search-assistant-container .saHelpContent dt h4{font-weight:normal;color:#333333;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent dd{margin-left:20px;}\n.search-assistant-wrapper .search-assistant-container .saHelpContent a{cursor:pointer;}\n.search-assistant-wrapper .search-assistant-container code{color:#65a637;}\n.search-assistant-wrapper .search-assistant-container .introstep{font-weight:bold;margin-top:1em;display:block;}\n.search-assistant-wrapper .search-assistant-container .sakeyword{display:block;}.search-assistant-wrapper .search-assistant-container .sakeyword:focus,.search-assistant-wrapper .search-assistant-container .sakeyword:hover{background-color:#eeeeee;cursor:pointer;}\n.search-assistant-wrapper .search-assistant-container .saClearBottom{*zoom:1;}.search-assistant-wrapper .search-assistant-container .saClearBottom:before,.search-assistant-wrapper .search-assistant-container .saClearBottom:after{display:table;content:\"\";line-height:0;}\n.search-assistant-wrapper .search-assistant-container .saClearBottom:after{clear:both;}\n.search-assistant-wrapper .search-assistant-resize-active{background-color:#eeeeee;border:0 solid #bfbfbf;border-top-color:#bfbfbf;border-bottom-color:#bfbfbf;border-bottom-width:1px;margin:0 3px;height:3px;margin:0;}\n.search-assistant-wrapper .search-assistant-resize-active{margin:0;cursor:ns-resize;}\n.search-assistant-wrapper .search-assistant-resize-active:before{content:\"\";display:block;height:1px;width:10px;margin:0 auto;border-width:1px 0;border-style:solid;opacity:0.8;filter:alpha(opacity=80);}\n.search-assistant-wrapper .search-assistant-activator{background-color:#ffffff;cursor:pointer;-webkit-border-bottom-left-radius:3px;-moz-border-radius-bottomleft:3px;border-bottom-left-radius:3px;-webkit-border-bottom-right-radius:3px;-moz-border-radius-bottomright:3px;border-bottom-right-radius:3px;border:1px solid #bfbfbf;border-top:none;width:15px;height:4px;*height:5px;line-height:4px;*line-height:5px;padding-bottom:2px;font-size:11px;display:block;color:#333333;text-align:center;text-decoration:none;margin:-1px 0 0 7px;}\n.search-assistant-wrapper .icon-triangle-down-small:before{content:\"\\02C5\";}\n.search-assistant-wrapper .icon-triangle-up-small:before{content:\"\\02C4\";}\n.search-assistant-wrapper.search-assistant-enabled{-webkit-box-shadow:0 3px 7px rgba(0, 0, 0, 0.3);-moz-box-shadow:0 3px 7px rgba(0, 0, 0, 0.3);box-shadow:0 3px 7px rgba(0, 0, 0, 0.3);}\n.multiline .search-assistant-resize,.search-assistant-open .search-assistant-resize{border-width:1px;}\n.search-bar-primary .btn{background-color:#61a035;background-image:-moz-linear-gradient(top, #65a637, #5c9732);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#65a637), to(#5c9732));background-image:-webkit-linear-gradient(top, #65a637, #5c9732);background-image:-o-linear-gradient(top, #65a637, #5c9732);background-image:linear-gradient(to bottom, #65a637, #5c9732);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff65a637', endColorstr='#ff5c9732', GradientType=0);border-color:#4e802a;border-top-color:#4e802a;border-bottom-color:#4e802a;color:#ffffff;}.search-bar-primary .btn:hover{background-color:#72b13b;background-image:-moz-linear-gradient(top, #7bb93d, #65a637);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#7bb93d), to(#65a637));background-image:-webkit-linear-gradient(top, #7bb93d, #65a637);background-image:-o-linear-gradient(top, #7bb93d, #65a637);background-image:linear-gradient(to bottom, #7bb93d, #65a637);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff7bb93d', endColorstr='#ff65a637', GradientType=0);background-color:#7ec44c;border-color:#55802a;border-bottom-color:#55802a;border-top-color:#55802a;background-position:0 0;-webkit-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);-moz-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);}\n.search-bar-primary .search-field-wrapper-inner{background-color:#61a035;background-image:-moz-linear-gradient(top, #65a637, #5c9732);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#65a637), to(#5c9732));background-image:-webkit-linear-gradient(top, #65a637, #5c9732);background-image:-o-linear-gradient(top, #65a637, #5c9732);background-image:linear-gradient(to bottom, #65a637, #5c9732);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff65a637', endColorstr='#ff5c9732', GradientType=0);border-color:#4e802a;border-top-color:#4e802a;border-bottom-color:#4e802a;}\n.search-bar-primary .search-field-background{background-color:#61a035;background-image:-moz-linear-gradient(top, #65a637, #5c9732);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#65a637), to(#5c9732));background-image:-webkit-linear-gradient(top, #65a637, #5c9732);background-image:-o-linear-gradient(top, #65a637, #5c9732);background-image:linear-gradient(to bottom, #65a637, #5c9732);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff65a637', endColorstr='#ff5c9732', GradientType=0);border-color:#4e802a;border-top-color:#4e802a;border-bottom-color:#4e802a;}\n.search-bar-primary .search-assistant-resize{border-bottom:1px solid #4e802a;}\n.search-bar-primary .search-assistant-activator{background-color:#5c9732;color:#ffffff;border-color:#4e802a;}\n.search-bar-primary .search-assistant-resize{background-color:#5c9732;color:#ffffff;border-color:#4e802a;}\n.search-bar-primary .multiline .search-assistant-resize{border-right-color:#4e802a;border-left-color:#4e802a;}\n.search-bar-primary .search-assistant-resize-active{border-left:1px solid #4e802a;}\n.search-bar-primary textarea.search-field{border:1px solid #4e802a;border-top-color:#4e802a;border-bottom-color:#4e802a;}\n.search-bar-primary .search-apps .link-label,.search-bar-primary .search-apps .label-prefix{display:inline-block;*display:inline;*zoom:1;vertical-align:middle;line-height:1.2em;max-width:10em;overflow:hidden;text-overflow:ellipsis;}\n.search-bar-primary .search-apps .caret{line-height:1em;vertical-align:middle;}\n.dropdown-menu-apps li{line-height:20px;position:relative;}\n.dropdown-menu-apps .link-label{display:block;white-space:nowrap;word-wrap:normal;overflow:hidden;text-overflow:ellipsis;padding-right:28px;}\n.dropdown-menu-apps .menu-icon{width:18px;height:18px;position:absolute;right:10px;top:7px;}\n.lt-ie9 .shared-search-input{*min-height:28px;}\n.lt-ie9 .search-field-wrapper{*min-height:28px;}\n.lt-ie9 .placeholder{*padding:4px 0 !important;*min-height:15px !important;}\n.lt-ie9 .search-field{padding:2px 0px 0 0px;min-height:20px !important;*margin-top:-1px;}\n.ie7 .search-bar-wrapper{*position:relative;*z-index:1;}\n.ie7 .search-bar *{*min-width:1px;}\n.ie7 .icon-search-thin{*line-height:1.2em;}\n.ie7 .search-field-background,.ie7 .search-assistant-resize{display:none;}\n.ie7 .search-assistant-resize-active{display:block;}\n.ie7 .shared-searchbar-input{top:-1px;}\n@media print{.shared-searchbar-input{padding:0 !important;} .search-bar{width:100%;display:block;}.search-bar td,.search-bar tbody,.search-bar tr{display:block;width:100%;} .search-field{display:none !important;} .shadowTextarea{width:100% !important;left:auto !important;top:auto !important;position:static !important;border-color:transparent !important;} .search-field-background,.search-assistant-wrapper,.search-button{display:none !important;}}\n")}),requirejs.s.contexts._.nextTick=requirejs.nextTick;
