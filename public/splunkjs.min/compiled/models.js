define("splunkjs/compiled/models",function(){}),define("models/shared/splunkbar/SystemMenuSection",["models/Base"],function(e){return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments),this.get("items")||this.set({items:[]})}})}),define("collections/shared/splunkbar/SystemMenuSections",["models/shared/splunkbar/SystemMenuSection","collections/Base"],function(e,t){return t.extend({model:e,initialize:function(){t.prototype.initialize.apply(this,arguments)},comparator:function(e,t){var n=e.get("order"),r=t.get("order");return n===r?0:n>r?1:-1}})}),define("models/shared/FlashMessage",["models/Base"],function(e){return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments)},idAttribute:"key"})}),define("collections/shared/FlashMessages",["collections/Base","models/shared/FlashMessage"],function(e,t){return e.extend({model:t,initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("models/services/authentication/CurrentContext",["models/SplunkDBase"],function(e){return e.extend({url:"authentication/current-context",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("collections/services/authentication/CurrentContexts",["models/services/authentication/CurrentContext","collections/SplunkDsBase"],function(e,t){return t.extend({model:e,url:"authentication/current-context",initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),define("models/services/data/ui/Manager",["models/SplunkDBase"],function(e){return e.extend({url:"data/ui/manager",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("collections/services/data/ui/Managers",["models/services/data/ui/Manager","collections/SplunkDsBase"],function(e,t){return t.extend({url:"data/ui/manager",model:e,initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),define("models/services/data/ui/View",["jquery","splunk.util","models/SplunkDBase","underscore"],function(e,t,n,r){return n.extend({url:"data/ui/views",initialize:function(){n.prototype.initialize.apply(this,arguments)},isXML:function(){return this.entry.content.get("eai:type")==="views"},isHTML:function(){return this.entry.content.get("eai:type")==="html"},getViewType:function(){var e="n/a";return this.isXML()?e="XML":this.isHTML()&&(e="HTML"),e},getLabel:function(){return this.entry.content.get("label")||this.entry.get("name")},isRoot:function(e){function s(e){return e&&e.toLowerCase()||e}if(!this.isXML())return!1;var t=this.entry.content.get("eai:data"),n=this.get$XML(),i=n.find(":eq(0)")[0];return i?arguments.length>1?r.any(arguments,function(e){return s(i.nodeName)===s(e)}):s(i.nodeName)===s(e):!1},isAdvanced:function(e){var n,r,i,s;if(!this.isRoot("view"))return!1;if(e){n=this.get$XML(),r=n.find(":eq(0)"),i=r.attr("type"),s=r.attr("isVisible");if(i&&i=="html")return!1;if(s&&!t.normalizeBoolean(s))return!1}return!0},get$XML:function(){var t=this.isXML()&&this.entry.content.get("eai:data")||"<dashboard/>",n;try{n=e.parseXML(t)}catch(r){n=e.parseXML("<dashboard/>")}return e(n).find("script").remove(),e(n)},isDashboard:function(){return this.isRoot("dashboard")},isForm:function(){return this.isRoot("form")},isSimpleXML:function(){return this.isXML()&&this.isRoot("dashboard","form")}})}),define("collections/services/data/ui/Views",["jquery","backbone","models/services/data/ui/View","collections/SplunkDsBase","splunk.util"],function(e,t,n,r,i){return r.extend({url:"data/ui/views",model:n,initialize:function(){r.prototype.initialize.apply(this,arguments)}})}),define("models/services/Message",["models/SplunkDBase"],function(e){return e.extend({url:"messages",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("collections/services/Messages",["jquery","models/services/Message","collections/SplunkDsBase"],function(e,t,n){return n.extend({model:t,url:"messages",initialize:function(){n.prototype.initialize.apply(this,arguments)},destroyAll:function(){if(this.destroying===!0)return this.destroyDFD;this.destroying=!0;var t=this;return this.destroyDFD=new e.Deferred(function(n){function r(){var i=new e.Deferred;if(t.length>0){var s=t.pop(),o=s.destroy()||i.resolve().promise();return o.always(r),o}n.resolve()}r()}),this.destroyDFD.then(function(){t.destroying=!1}),this.destroyDFD.promise()}})}),define("models/services/SavedSearch",["jquery","backbone","util/splunkd_utils","models/Base","models/SplunkDBase","underscore","splunk.util"],function(e,t,n,r,i,s,o){var u=r.extend({initialize:function(e,t){r.prototype.initialize.apply(this,arguments)},sync:function(r,i,s){var o={data:{output_mode:"json"}};switch(r){case"update":o.processData=!0,o.type="POST",o.url=n.fullpath(i.id),e.extend(!0,o,s);break;default:throw new Error("invalid method: "+r)}return t.sync.call(this,r,i,o)}});return i.extend({url:"saved/searches",initialize:function(){i.prototype.initialize.apply(this,arguments),this.on("change:id",function(){var e,t;this.id&&(e=this.id+"/embed",t=this.id+"/unembed"),this.embed.set("id",e),this.unembed.set("id",t)},this),this.embed.on("sync",function(){this.safeFetch()},this),this.unembed.on("sync",function(){this.safeFetch()},this)},initializeAssociated:function(){i.prototype.initializeAssociated.apply(this,arguments),this.embed=this.embed||new this.constructor.Embed,this.associated.embed=this.embed,this.unembed=this.unembed||new this.constructor.Embed,this.associated.unembed=this.unembed},parse:function(e,t){e=this.migrateAttributes(e,t),s.extend(t,{skipClone:!0}),this.initializeAssociated();if(n.isExistingEntity(e)){var r=e.entry[0].links.alternate;this.embed.set("id",r+"/embed"),this.unembed.set("id",r+"/unembed")}return i.prototype.parse.call(this,e,t)},setFromSplunkD:function(e,t){e=this.migrateAttributes(e,t),s.extend(t,{skipClone:!0});if(n.isExistingEntity(e)){var r=e.entry[0].links.alternate;this.embed.set("id",r+"/embed"),this.unembed.set("id",r+"/unembed")}return i.prototype.setFromSplunkD.call(this,e,t)},migrateAttributes:function(t,n){n=n||{},n.skipClone||(t=e.extend(!0,{},t));if(t&&t.entry&&t.entry[0].content){var r=t.entry[0].content,i=r["action.email.format"];s.indexOf(["html","plain","pdf"],i)!=-1?t.entry[0].content["action.email.format"]="table":i==="csv"&&o.normalizeBoolean(r["action.email.sendresults"])&&!(o.normalizeBoolean(r["action.email.sendcsv"])||o.normalizeBoolean(r["action.email.sendpdf"])||o.normalizeBoolean(r["action.email.inline"]))&&(t.entry[0].content["action.email.sendcsv"]="1")}return t}},{Embed:u})}),define("collections/services/SavedSearches",["models/services/SavedSearch","collections/SplunkDsBase"],function(e,t){return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments)},url:"saved/searches",model:e})}),define("models/services/search/TimeParser",["jquery","underscore","backbone","models/Base","util/splunkd_utils"],function(e,t,n,r,i){return r.extend({initialize:function(e){r.prototype.initialize.call(this,e)},sync:function(e,t,r){switch(e){case"read":var s=i.prepareSyncOptions(r,t.url);if(r.data.time===""){t.set({key:"",value:""});return}return n.sync.call(this,"read",t,s);default:throw"Operation not supported"}},url:"/services/search/timeparser",parse:function(e){if(!e)return{};var n=t.keys(e)[0],r=e[n];return{key:n,value:r}},idAttribute:"key"})}),define("collections/services/search/TimeParsers",["underscore","backbone","models/services/search/TimeParser","collections/Base","util/splunkd_utils"],function(e,t,n,r,i){return r.extend({model:n,intialize:function(){r.prototype.initialize.apply(this,arguments)},sync:function(e,n,r){var s={},o={data:{output_mode:"json"},traditional:!0};switch(e){case"read":return r&&r.data&&(s=$.extend(s,{app:r.data.app||undefined,owner:r.data.owner||undefined}),delete r.data.app,delete r.data.owner),o.url=i.fullpath(n.url,s),$.extend(!0,o,r||{}),t.sync.call(this,"read",n,o);default:throw"Operation not supported"}},url:"/services/search/timeparser",parse:function(e){var t,n=[];for(var r in e)t={},t[r]=e[r],n.push(t);return n}})}),define("models/services/data/ui/Nav",["models/SplunkDBase"],function(e){return e.extend({url:"data/ui/nav",id:"data/ui/nav",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("collections/services/data/ui/Navs",["models/services/data/ui/Nav","collections/SplunkDsBase"],function(e,t){return t.extend({url:"data/ui/nav",model:e,initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),define("models/search/SelectedField",["models/Base"],function(e){return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments)},sync:function(){throw"Method disabled"}})}),define("collections/search/SelectedFields",["collections/Base","models/search/SelectedField"],function(e,t){return e.extend({model:t,initialize:function(){e.prototype.initialize.apply(this,arguments),this.on("reset add remove",function(){delete this._names},this)},sync:function(){throw"Method disabled"},valuesToJSONString:function(){return JSON.stringify(this.pluck("name"))},names:function(){return this._names||(this._names=this.pluck("name")),this._names},findByName:function(e){return this.find(function(t){return e===t.get("name")})}})}),define("models/services/configs/EventRenderer",["models/SplunkDBase"],function(e){return e.extend({url:"configs/conf-event_renderers",initialize:function(){e.prototype.initialize.apply(this,arguments)},getPriority:function(){return parseInt(this.entry.content.get("priority"),10)},getEventtype:function(){return this.entry.content.get("eventtype")}})}),define("collections/services/configs/EventRenderers",["underscore","models/services/configs/EventRenderer","collections/SplunkDsBase"],function(e,t,n){return n.extend({url:"configs/conf-event_renderers",model:t,initialize:function(){n.prototype.initialize.apply(this,arguments)},getRenderer:function(e){var t;if(e)for(var n=0;n<e.length;n++)for(var r=0;r<this.models.length;r++){var i=this.models[r];if(i.getEventtype()===e[n]){if(!t||i.getPriority()>t.getPriority())t=i;break}}return t}})}),define("models/services/data/ui/WorkflowAction",["backbone","underscore","models/SplunkDBase"],function(e,t,n){var r=/\$_raw\$/g;return n.extend({url:"data/ui/workflow-actions",initialize:function(){n.prototype.initialize.apply(this,arguments)},fieldSubstitute:function(e,n){var r={interpolate:/\$([\s\S]+?)\$/g},i=e.match(r.interpolate);return e=this.convertRaw(e,n),i&&t(i).each(function(t){n[t.match(/\$([\s\S]+?)\$/)[1]]||(e=e.replace(t,""))},this),t.template(e,n,r)},systemSubstitute:function(e,n,r,i,s,o,u){var a={interpolate:/\$@([\s\S]+?)\$/g},f={sid:n,offset:r,namespace:i,latest_time:s,field_name:o,field_value:u};return t.template(e,f,a)},convertRaw:function(e,n){return r.test(e)&&!t(n._raw).isArray()?e.replace(r,n._raw.value):e},isInFieldMenu:function(){return this.entry.content.get("display_location")!="event_menu"},isInEventMenu:function(){return this.entry.content.get("display_location")!="field_menu"},isRestrictedByPresenceOfAllFields:function(e){var n=e.toJSON(),r=0,i=t(this.entry.content.get("fields").split(",")).map(function(e){return $.trim(e)},this),s=new Array(i.length),o=i.length;for(var u in n)for(var a=0;a<o;a++){var f=this.globber(i[a]);if(f){var l=f.exec(u);if(!s[a]&&l&&l.length>0){s[a]=!0,r++;if(r>=o)return!1}}}return!0},isRestrictedByEventtype:function(e){var n,r;if(!this.entry.content.has("eventtypes"))return!1;n=t(this.entry.content.get("eventtypes").split(",")).map(function(e){return $.trim(e)},this);if(e.has("eventtype")){r=e.get("eventtype");var i=n.length,s=0;for(s;s<i;s++){var o=this.globber(n[s]);if(o){var u=r.length,a=0;for(a;a<u;a++){var f=o.exec(r[a]);if(f&&f.length>0)return!1}}}}else if(n.indexOf("*")>-1)return!1;return!0},globber:function(e){var n,r=e.split("");t.first(r)!=="*"&&r.unshift("^"),t.last(r)!=="*"&&r.push("$"),e=r.join("").replace(/\*/g,".*");try{n=new RegExp(e)}catch(i){}return n}})}),define("collections/services/data/ui/WorkflowActions",["jquery","underscore","backbone","models/services/data/ui/WorkflowAction","collections/SplunkDsBase"],function(e,t,n,r,i){return i.extend({url:"data/ui/workflow-actions",model:r,initialize:function(){i.prototype.initialize.apply(this,arguments)},getEventActions:function(e){var t=[];return this.each(function(n,r){n.isInEventMenu()&&!n.isRestrictedByEventtype(e)&&!n.isRestrictedByPresenceOfAllFields(e)&&t.push(r)},this),t},getFieldActions:function(n,r){var i=[];return this.each(function(s,o){if(s.isInFieldMenu()&&!s.isRestrictedByEventtype(n)){var u=t(s.entry.content.get("fields").split(",")).map(function(t){return e.trim(t)},this),a=0,f=u.length;for(a;a<f;a++){var l=s.globber(u[a]);if(l){var c=l.exec(r);if(c&&c.length>0){i.push(o);break}}}}},this),i}})}),define("models/services/search/jobs/Control",["jquery","backbone","models/Base","util/splunkd_utils"],function(e,t,n,r){return n.extend({initialize:function(e,t){n.prototype.initialize.apply(this,arguments)},sync:function(n,i,s){var o={data:{output_mode:"json"}};switch(n){case"update":o.processData=!0,o.type="POST",o.url=r.fullpath(i.id),e.extend(!0,o,s);break;default:throw new Error("invalid method: "+n)}return t.sync.call(this,n,i,o)}})}),define("models/services/search/Job",["jquery","underscore","backbone","models/Base","models/ACLReadOnly","models/services/ACL","models/services/search/jobs/Control","util/splunkd_utils","splunk.util","util/console"],function(e,t,n,r,i,s,o,u,a,f){var l=function(t,n){var i=n,s=t,o=e.Deferred(),f=new r,l=new r,c={data:{rf:"*",auto_cancel:d.DEFAULT_AUTO_CANCEL,status_buckets:300,output_mode:"json"}},h={},p=this.getCustomDataPayload();n=n||{},n.data=n.data||{},h=e.extend(h,{app:n.data.app||undefined,owner:n.data.owner||undefined,sharing:n.data.sharing||undefined});var v=u.fullpath(t.url,h);e.extend(!0,c.data,p||{}),e.extend(!0,c.data,n.data),delete c.data.app,delete c.data.owner,delete c.data.sharing,c.data.search&&(c.data.search=a.addLeadingSearchCommand(c.data.search,!0)),n.data=e.extend(!0,{},h),t.trigger("request",t,o,n);var m=f.save({},{url:v,processData:!0,data:c.data,success:function(e,t,n){s.set("id",e.get("sid"));var r=l.fetch({url:v+"/"+encodeURIComponent(e.get("sid")),data:{output_mode:"json"},success:function(e,t,n){i.success(t)},error:function(e,t,n){i.error(t)}});r.done(function(){o.resolve.apply(o,arguments)}),r.fail(function(){o.reject.apply(o,arguments)})},error:function(e,t,n){i.error(t)}});return m.fail(function(){o.reject.apply(o,arguments)}),o.promise()},c=function(t,r){var i={data:{output_mode:"json"}},s={};if(t.isNew())throw new Error("You cannot read a job without an id.");return r&&r.data&&(s=e.extend(s,{app:r.data.app||undefined,owner:r.data.owner||undefined,sharing:r.data.sharing||undefined})),i.url=u.fullpath(t.url+"/"+encodeURIComponent(t.id),s),e.extend(!0,i,r||{}),delete i.data.app,delete i.data.owner,delete i.data.sharing,n.sync.call(this,"read",t,i)},h=function(t,r){var i={data:{output_mode:"json"}},s={},o=this.getCustomDataPayload();return r&&r.data&&(s=e.extend(s,{app:r.data.app||undefined,owner:r.data.owner||undefined,sharing:r.data.sharing||undefined})),e.extend(!0,i.data,o||{}),i.url=u.fullpath(t.url+"/"+encodeURIComponent(t.id),s),i.processData=!0,i.type="POST",e.extend(!0,i,r||{}),delete i.data.app,delete i.data.owner,delete i.data.sharing,n.sync.call(this,"update",t,i)},p=function(t,r){var i={data:{output_mode:"json"}},s=t.url+"/"+encodeURIComponent(t.id);return r.data&&r.data.output_mode?(i.url=u.fullpath(s,{})+"?output_mode="+encodeURIComponent(r.data.output_mode),delete r.data.output_mode):(i.url=u.fullpath(s,{})+"?output_mode="+encodeURIComponent(i.data.output_mode),delete i.data.output_mode),e.extend(!0,i,r),i.processData=!0,n.sync.call(this,"delete",t,i)},d=r.extend({url:"search/jobs",initialize:function(e,t){r.prototype.initialize.apply(this,arguments),this.initializeAssociated(),this.entry.links.on("change:control",function(){this.control.set("id",this.entry.links.get("control"))},this),this.entry.links.on("change:alternate",function(){var e=this.entry.links.get("alternate");e&&(e+="/acl"),this.acl.set("id",e)},this),t&&t.splunkDPayload&&this.setFromSplunkD(t.splunkDPayload,{silent:!0})},parseSplunkDMessages:function(e){var n=r.prototype.parseSplunkDMessages.call(this,e);if(e&&e.entry&&e.entry.length>0){var i=e.entry[0],s=i.content||{};n=t.union(n,u.parseMessagesObject(i.messages),u.parseMessagesObject(s.messages)),s.isZombie&&n.push(u.createMessageObject(u.FATAL,"Job terminated unexpectedly"))}return n},initializeAssociated:function(){var e=this.constructor;this.associated=this.associated||{},this.links=this.links||new e.Links,this.associated.links=this.links,this.generator=this.generator||new e.Generator,this.associated.generator=this.generator,this.paging=this.paging||new e.Paging,this.associated.paging=this.paging,this.entry||(this.entry=new e.Entry,this.entry.links=new e.Entry.Links,this.entry.associated.links=this.entry.links,this.entry.acl=new e.Entry.ACL,this.entry.associated.acl=this.entry.acl,this.entry.content=new e.Entry.Content,this.entry.content.performance=new e.Entry.Content.Performance,this.entry.content.associated.performance=this.entry.content.performance,this.entry.content.request=new e.Entry.Content.Request,this.entry.content.associated.request=this.entry.content.request,this.entry.content.runtime=new e.Entry.Content.Runtime,this.entry.content.associated.runtime=this.entry.content.runtime,this.entry.content.custom=new e.Entry.Content.Custom,this.entry.content.associated.custom=this.entry.content.custom,this.entry.associated.content=this.entry.content),this.associated.entry=this.entry,this.control=this.control||new o,this.associated.control=this.control,this.acl=this.acl||new s,this.associated.acl=this.acl},sync:function(e,t,n){switch(e){case"create":return l.call(this,t,n);case"read":return c.call(this,t,n);case"update":return h.call(this,t,n);case"delete":return p.call(this,t,n);default:throw new Error("invalid method: "+e)}},parse:function(t){t=e.extend(!0,{},t),this.initializeAssociated();if(!t||!t.entry||t.entry.length===0){f.log("Response has no content to parse");return}var n=t.entry[0];return this.id=n.content.sid,t.id=n.content.sid,this.links.set(t.links),delete t.links,this.generator.set(t.generator),delete t.generator,this.paging.set(t.paging),delete t.paging,this.entry.links.set(n.links),delete n.links,this.entry.acl.set(n.acl),delete n.acl,this.entry.content.performance.set(n.content.performance),delete n.content.performance,this.entry.content.request.set(n.content.request),delete n.content.request,this.entry.content.runtime.set(n.content.runtime),delete n.content.runtime,this.entry.content.custom.set(n.content.custom),delete n.content.custom,this.entry.content.set(n.content),delete n.content,this.entry.set(n),delete t.entry,t},setFromSplunkD:function(t,n){this.attributes={};var r=e.extend(!0,{},t),i=this.id;if(r){if(r.entry&&r.entry[0]){var s=r.entry[0];s.content&&(this.set({id:s.content.sid},{silent:!0}),r.id=s.content.sid,s.content.performance&&(this.entry.content.performance.set(s.content.performance,n),delete s.content.performance),s.content.request&&(this.entry.content.request.set(s.content.request,n),delete s.content.request),s.content.runtime&&(this.entry.content.runtime.set(s.content.runtime,n),delete s.content.runtime),s.content.custom&&(this.entry.content.custom.set(s.content.custom,n),delete s.content.custom),this.entry.content.set(s.content,n),delete s.content),s.links&&(this.entry.links.set(s.links,n),s.links.control&&this.control.set("id",s.links.control,n),s.links.alternate&&this.acl.set("id",s.links.alternate+"/acl",n),delete s.links),s.acl&&(this.entry.acl.set(s.acl,n),delete s.acl),this.entry.set(s,n),delete r.entry}r.links&&(this.links.set(r.links,n),delete r.links),r.generator&&(this.generator.set(r.generator,n),delete r.generator),r.paging&&(this.paging.set(r.paging,n),delete r.paging),this.set(r,n),this.id!==i&&this.trigger("change:"+this.idAttribute)}},toSplunkD:function(){var t={};return t=e.extend(!0,{},this.toJSON()),t.links=e.extend(!0,{},this.links.toJSON()),t.generator=e.extend(!0,{},this.generator.toJSON()),t.paging=e.extend(!0,{},this.paging.toJSON()),t.entry=[e.extend(!0,{},this.entry.toJSON())],t.entry[0].links=e.extend(!0,{},this.entry.links.toJSON()),t.entry[0].acl=e.extend(!0,{},this.entry.acl.toJSON()),t.entry[0].content=e.extend(!0,{},this.entry.content.toJSON()),t.entry[0].content.performance=e.extend(!0,{},this.entry.content.performance.toJSON()),t.entry[0].content.request=e.extend(!0,{},this.entry.content.request.toJSON()),t.entry[0].content.runtime=e.extend(!0,{},this.entry.content.runtime.toJSON()),t.entry[0].content.custom=e.extend(!0,{},this.entry.content.custom.toJSON()),delete t.id,t},getCustomDataPayload:function(){var n=e.extend(!0,{},this.entry.content.custom.toJSON()),r=t.keys(n);return t.each(r,function(e){var t="custom."+e;n[t]=n[e],delete n[e]}),n},canSummarize:function(){return a.normalizeBoolean(this.entry.content.get("canSummarize"))}},{QUEUED:"QUEUED",PARSING:"PARSING",RUNNING:"RUNNING",PAUSED:"PAUSED",FINALIZING:"FINALIZING",FAILED:"FAILED",DONE:"DONE",DEFAULT_AUTO_CANCEL:30,DEFAULT_AUTO_PAUSE:30,DEFAULT_POLLING_INTERVAL:1e3,DEFAULT_METADATA_POLLING_INTERVAL:3e3,DEFAULT_KEEP_ALIVE_INTERVAL:15e3,Links:r,Generator:r,Paging:r,Entry:r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments)}},{Links:r,ACL:i,Content:r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments)}},{Performance:r,Request:r,Runtime:r,Custom:r})})});return d}),define("collections/services/search/Jobs",["models/services/search/Job","collections/SplunkDsBase"],function(e,t){return t.extend({url:"search/jobs",model:e,initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),define("models/search/Job",["jquery","underscore","backbone","models/services/search/Job","util/splunkd_utils","util/time","util/console","splunk.util","helpers/Session","util/Ticker"],function(e,t,n,r,i,s,o,u,a,f){var l=r.extend({initialize:function(e,t){r.prototype.initialize.apply(this,arguments),this.options=t||{},this.setInstanceDefaults(),this.entry.content.on("change",function(){var e=this.entry.content.changedAttributes(),t=this.entry.content.previousAttributes();this.handleJobProgress(e,t)},this),this.entry.content.on("change:dispatchState",function(){this.entry.content.get("dispatchState")&&!this.isPreparing()&&!this.prepared&&(this.prepared=!0,this.trigger("prepared"))},this),this.ticker=new f({interval:100}),this.ticker.on("tick",function(){this.safeFetch({data:{app:this.entry.acl.get("app"),owner:this.entry.acl.get("owner"),sharing:this.entry.acl.get("sharing")}})},this),this.entry.content.on("change:dispatchState",function(){(this.entry.content.get("isDone")||this.entry.content.get("isFailed"))&&this.stopPolling()},this),this.on("prepared",function(){var e=0,t=30,n=function(){var r;e++;if(this.entry.content.get("isDone")||this.entry.content.get("isFailed")){this.off("sync",n,this);return}this.isReportSearch()?this.entry.content.get("isPreviewEnabled")?r=this.entry.content.get("resultPreviewCount"):r=this.entry.content.get("resultCount"):r=this.entry.content.get("eventAvailableCount");if(r>0||e===t)this.off("sync",n,this),this.trigger("slowDownPoller")}.bind(this);this.on("slowDownPoller",function(){this._poll&&this.ticker.restart({interval:this.pollingDelay})},this),this.on("sync",n,this)},this),this.on("error",function(){i.messagesContainsOneOfTypes(this.error.get("messages"),[i.NOT_FOUND,i.FATAL])&&this.handleJobDestroy()},this),this.entry.content.on("change:isFailed",function(){this.entry.content.get("isFailed")&&this.handleJobDestroy()},this),this.on("destroy",this.handleJobDestroy,this)},setInstanceDefaults:function(){this._poll=!1,this.pollingDelay=this.options.delay||r.DEFAULT_POLLING_INTERVAL,this.prepared=this.entry.content.get("dispatchState")&&!this.isPreparing(),this.processKeepAlive=this.options.processKeepAlive||!1,this.keepAlivePoller=null,this.keepAliveInterval=this.options.keepAliveInterval||r.DEFAULT_KEEP_ALIVE_INTERVAL},clear:function(){return r.prototype.clear.apply(this,arguments),this.setInstanceDefaults(),this},handleJobProgress:function(e,n){if(this.isNew())return!1;var r=this.entry.content.get("isRealTimeSearch"),s=this.entry.content.get("reportSearch"),o=this.getAdhocSearchMode()===i.VERBOSE,u=this.entry.content.get("isPreviewEnabled"),a=this.entry.content.get("isDone"),f=t.isEmpty(e);if(f||!a&&s&&!u&&!o)return!1;var c=!t(e.scanCount).isUndefined()&&e.scanCount>n.scanCount,h=!t(e.eventCount).isUndefined(),p=!t(e.resultCount).isUndefined(),d=!t(e.isDone).isUndefined()&&e.isDone===!0,v=c||h||p||d||r;if(!v)return!1;this.trigger("jobProgress");var m=this.entry.links;return this.trigger("jobProgress:"+l.RESULTS_PREVIEW,m.get(l.RESULTS_PREVIEW)),this.trigger("jobProgress:"+l.RESULTS,m.get(l.RESULTS)),this.trigger("jobProgress:"+l.SUMMARY,m.get(l.SUMMARY)),this.trigger("jobProgress:"+l.TIMELINE,m.get(l.TIMELINE)),this.trigger("jobProgress:"+l.EVENTS,m.get(l.EVENTS)),d&&this.processKeepAlive&&this.startKeepAlive(),!0},registerJobProgressLinksChild:function(e,t,n,r){var i=this.entry.links.get(e);return i?(t.set("id",i),n.call(r),this.on("jobProgress",n,r),!0):(o.warn("Search Job Model: You attempted to register a child model with a links key that doesn't exist. Have you fetched your job lately? Key:",e),!1)},unregisterJobProgressLinksChild:function(e,t){this.off("jobProgress",e,t)},handleJobDestroy:function(){this.stopPolling(),this.processKeepAlive=!1,this.stopKeepAlive(),this.fetchAbort(),this.control.fetchAbort()},startKeepAlive:function(){this.stopPolling(),a.on("timeout",this.stopKeepAlive,this),a.on("start",this.startKeepAlive,this),this.stopKeepAlive(),this.keepAlivePoller=new f({interval:this.keepAliveInterval}),this.keepAlivePoller.on("tick",function(){this.control.save({},{data:{action:"touch"},success:function(e,t,n){o.log("touched job:",e.id)}.bind(this),error:function(e,t,n){if(!(!t.hasOwnProperty("status")||t.status!=0&&t.status!=12029))return;o.log("error touching job (stopping keep alive):",e.id),this.stopKeepAlive()}.bind(this)})},this),this.keepAlivePoller.start()},stopKeepAlive:function(){this.keepAlivePoller&&(this.keepAlivePoller.stop(),this.keepAlivePoller.off())},startPolling:function(e){if(!this._poll||e)this._poll=!0,a.off("timeout",null,this),a.off("start",null,this),a.on("timeout",this.stopPolling,this),a.on("start",function(){this.startPolling(!0)},this),(e||!this.entry.content.get("isDone")&&!this.entry.content.get("isFailed"))&&this.ticker.start(!0)},stopPolling:function(){this._poll&&(this._poll=!1,a.off("timeout",null,this),a.off("start",null,this),this.ticker.stop())},noParamControlUpdate:function(t,n){return n&&n.data&&delete n.data,this.control.save({},e.extend(!0,n,{data:{action:t}}))},pause:function(e){return this.noParamControlUpdate("pause",e)},unpause:function(e){return this.noParamControlUpdate("unpause",e)},finalize:function(e){return this.noParamControlUpdate("finalize",e)},cancel:function(e){return this.noParamControlUpdate("cancel",e)},touch:function(e){return this.noParamControlUpdate("touch",e)},setTTL:function(t,n){return n&&n.data&&delete n.data,this.control.save({},e.extend(!0,n,{data:{action:"setttl",ttl:t}}))},setPriority:function(t,n){return n&&n.data&&delete n.data,this.control.save({},e.extend(!0,n,{data:{action:"setpriority",priority:t}}))},enablePreview:function(e){return this.noParamControlUpdate("enablepreview",e)},disablePreview:function(e){return this.noParamControlUpdate("disablepreview",e)},setPreview:function(n,r){var i=this.entry.content.get("isPreviewEnabled");return n!==i?n?this.enablePreview(r):this.disablePreview(r):(r&&r.success&&t.isFunction(r.success)&&r.success(this,{},r),e.Deferred().resolve())},saveControlUpdate:function(t,n){n=n||{},n.data=n.data||{};var r={action:t,auto_cancel:n.data.auto_cancel,auto_pause:n.data.auto_pause,email_list:n.data.email_list,email_subject:n.data.email_subject,email_results:n.data.email_results,ttl:n.data.ttl};return n&&n.data&&delete n.data,this.control.save({},e.extend(!0,n,{data:r}))},saveJob:function(e){return this.saveControlUpdate("save",e)},unsaveJob:function(e){return this.saveControlUpdate("unsave",e)},makeWorldReadable:function(t){var n=this.entry.acl.get("owner"),r={sharing:i.GLOBAL,owner:this.entry.acl.get("owner"),"perms.read":"*"};return t&&t.data&&delete t.data,this.acl.save({},e.extend(!0,t,{data:r}))},undoWorldReadable:function(t){var n=this.entry.acl.get("owner"),r={sharing:i.GLOBAL,owner:n,"perms.read":""};return t&&t.data&&delete t.data,this.acl.save({},e.extend(!0,t,{data:r}))},isSharedAccordingToTTL:function(e){var t=this.entry.acl.permsToObj();return t.read.indexOf("*")!=-1&&this.entry.content.get("ttl")===e?!0:!1},saveIsBackground:function(e){return this.entry.content.custom.set("isBackground","1"),this.save({},e)},isBackground:function(){return u.normalizeBoolean(this.entry.content.custom.get("isBackground"))},resultCountSafe:function(){return this.entry.content.get("isPreviewEnabled")&&!this.entry.content.get("isDone")?this.entry.content.get("resultPreviewCount"):this.entry.content.get("resultCount")},eventAvailableCountSafe:function(){return this.entry.content.get("statusBuckets")==0?this.resultCountSafe():this.entry.content.get("eventAvailableCount")},latestTimeSafe:function(){var e=this.entry;return e.content.get("latestTime")||e.get("published")},isQueued:function(){return this.checkUppercaseValue("dispatchState",l.QUEUED)},isParsing:function(){return this.checkUppercaseValue("dispatchState",l.PARSING)},isFinalizing:function(){return this.checkUppercaseValue("dispatchState",l.FINALIZING)},isPreparing:function(){return this.isQueued()||this.isParsing()},isRunning:function(){return!this.isNew()&&!this.entry.content.get("isPaused")&&!this.entry.content.get("isDone")&&!this.isPreparing()&&!this.isFinalizing()},isReportSearch:function(){return this.entry.content.get("reportSearch")?!0:!1},isOverAllTime:function(){var e=this.getDispatchEarliestTime();return(!e||e==="0")&&!this.getDispatchLatestTime()},isRealtime:function(){return this.entry.content.get("isRealTimeSearch")},checkUppercaseValue:function(e,t){var n=this.entry.content.get(e);return n?n.toUpperCase()===t:!1},getDispatchEarliestTime:function(){var e=this.entry.content.request.get("earliest_time");return e===void 0?this.entry.content.get("searchEarliestTime"):e},getDispatchEarliestTimeOrAllTime:function(){return this.entry.content.get("delegate")==="scheduler"&&this.entry.content.get("searchLatestTime")!==void 0?this.entry.content.get("searchEarliestTime")||"":this.entry.content.request.get("earliest_time")||""},getDispatchLatestTime:function(){var e=this.entry.content.request.get("latest_time");return e===void 0?this.entry.content.get("searchLatestTime"):e},getDispatchLatestTimeOrAllTime:function(){var e=this.entry.content.get("searchLatestTime");return this.entry.content.get("delegate")==="scheduler"&&e!==void 0?e:this.entry.content.request.get("latest_time")||""},getStrippedEventSearch:function(){var e=this.entry.content.get("eventSearch");return e&&(e=u.stripLeadingSearchCommand(e)),e},getSearch:function(){var e=this.entry.get("name");return e?e:this.entry.content.request.get("search")},getAdhocSearchMode:function(){var e=this.entry.content.request.get("adhoc_search_level"),t=this.entry.content.get("statusBuckets"),n;if(!e){if(t!==void 0&&t==0)return i.FAST;n=this.entry.content.get("delegate");if(this.entry.content.get("isSavedSearch")&&n==="scheduler")return i.FAST}return e},canBePausedOnRemove:function(){return!this.isNew()&&!this.entry.content.get("isDone")&&!this.get("cannotPauseOnRemove")&&!this.entry.content.get("isPaused")&&!this.isBackground()&&!this.entry.content.get("isSaved")?!0:!1},deepOff:function(){r.prototype.deepOff.apply(this,arguments),a.off(null,null,this)}},{RESULTS_PREVIEW:"results_preview",SUMMARY:"summary",TIMELINE:"timeline",EVENTS:"events",RESULTS:"results",createMetaDataSearch:function(e,t,n){var i=new l({},{delay:r.DEFAULT_METADATA_POLLING_INTERVAL});return i.save({},{data:{app:n.get("app"),owner:n.get("owner"),search:e,preview:"true",earliest_time:"rt",latest_time:"rt",auto_cancel:r.DEFAULT_AUTO_CANCEL,max_count:1e5},success:function(e,n){t.resolve()},error:function(e,n){t.resolve()}}),i}});return l}),define("collections/search/Jobs",["underscore","models/search/Job","collections/services/search/Jobs"],function(e,t,n){return n.extend({model:t,comparator:function(e){var t=new Date(e.entry.get("published"));return t.valueOf()||0},initialize:function(){n.prototype.initialize.apply(this,arguments)},fetchNonAutoSummaryJobs:function(t){var n='(NOT _AUTOSUMMARY AND NOT "|*summarize*action=")',r={};return t=t||{},t.data=t.data||{},t.data.count=t.data.count||10,t.data.offset=t.data.offset||0,t.data.sortKey=t.data.sortKey||"dispatch_time",t.data.sortDir=t.data.sortDir||"desc",t.data.search?t.data.search=n+" AND ("+t.data.search+")":t.data.search=n,r["NOT isDataPreview"]="1",t.data.app&&t.data.app!=="*"&&(r["eai:acl.app"]=t.data.app),delete t.data.app,t.data.owner&&t.data.owner!=="*"&&(r["eai:acl.owner"]=t.data.owner),delete t.data.owner,t.data.label&&(r.label=t.data.label),delete t.data.label,t.data.jobStatus&&t.data.jobStatus!=="*"&&(t.data.jobStatus==="running"?(r.isDone=0,r.isPaused=0,r.isFinalized=0):t.data.jobStatus==="done"?r.isDone=1:t.data.jobStatus==="paused"?r.isPaused=1:t.data.jobStatus==="finalized"&&(r.isFinalized=1)),delete t.data.jobStatus,e.each(r,function(e,n){t.data.search=t.data.search+" "+n+'="'+e+'"'}),this.fetch(t)}})}),define("models/shared/DateInput",["jquery","underscore","models/Base","jquery.ui.datepicker","strftime"],function(e,t,n){var r=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d+)/,i=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments)},defaults:function(){var e=new Date;return this.convertDateToAttrsObject(e)},validation:{year:{required:!0,range:[1e3,9999],pattern:"digits",msg:t("Year must be a 4 digit number.").t()},month:{required:!0,range:[0,11],pattern:"digits",msg:t("Month must be a number between 0 and 11.").t()},day:{required:!0,range:[1,31],pattern:"digits",msg:t("Day must be a number between 1 and 31.").t()},hour:[{required:!0,range:[0,24],pattern:"digits",msg:t("Hour must be a number between 0 and 24.").t()},{fn:"validateFullTime"}],minute:[{required:!0,range:[0,59],pattern:"digits",msg:t("Minute must be a number between 0 and 59.").t()},{fn:"validateFullTime"}],second:[{required:!0,range:[0,59],pattern:"digits",msg:t("Second must be a number between 0 and 59.").t()},{fn:"validateFullTime"}],millisecond:[{required:!0,range:[0,999],pattern:"digits",msg:t("Millisecond must be a number between 0 and 999.").t()},{fn:"validateFullTime"}]},validateFullTime:function(e,n,r){if(r.hour===24&&(n==="minute"||n==="second"||n==="millisecond")&&e>0)return t("You cannot set the time greater than 24:00:00.000.").t()},setHoursMinSecFromStr:function(e,n){var r,i,s=e.split(":");if(s.length==3){var o=s[2].split(".");if(o.length==2)return this.set({hour:parseInt(s[0],10),minute:parseInt(s[1],10),second:parseInt(o[0],10),millisecond:parseInt(o[1],10)},n);r=t("Could not parse the time stamp given into second and millisecond.").t()}else r=t("Could not parse the time stamp given into hour, minute, second, and millisecond.").t();return i={second:r},this.trigger("validated",!1,this,i),this.trigger("validated:invalid",this,i),!1},setMonDayYearFromJSDate:function(e,t){return this.set({year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),hour:0,minute:0,second:0,millisecond:0},t)},setFromJSDate:function(e,t){return this.set(this.convertDateToAttrsObject(e),t)},jsDate:function(){var e=this.get("year"),n=this.get("month"),r=this.get("day"),i=this.get("hour"),s=this.get("minute"),o=this.get("second"),u=this.get("millisecond");if(this.isValid(!0)&&!t.isUndefined(e)&&!t.isUndefined(n)&&!t.isUndefined(r)&&!t.isUndefined(i)&&!t.isUndefined(s)&&!t.isUndefined(o)&&!t.isUndefined(u))return new Date(e,n,r,i,s,o,u);throw"You have an invalid DateTime object for creating a JSDate."},strftime:function(e){return this.jsDate().strftime(e)},isoWithoutTZ:function(){return this.strftime("%Y-%m-%dT%H:%M:%S.%Q")},time:function(){return this.strftime("%H:%M:%S.%Q")},dateFormat:function(){return e.datepicker._defaults.dateFormat},formattedDate:function(){return e.datepicker.formatDate(this.dateFormat(),this.jsDate())},convertDateToAttrsObject:function(e){return{year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}},{createFromIsoString:function(e){var t=r.exec(e);if(!t||t.length!==8)throw"Invalid ISO string: "+e;var n=new i({year:parseInt(t[1],10),month:parseInt(t[2],10)-1,day:parseInt(t[3],10),hour:parseInt(t[4],10),minute:parseInt(t[5],10),second:parseInt(t[6],10),millisecond:parseInt(t[7],10)});if(!n.isValid(!0))throw"Invalid time encoded: "+e;return n}});return i}),define("models/shared/TimeRange",["jquery","underscore","splunk.i18n","models/Base","collections/services/search/TimeParsers","util/splunkd_utils","util/time"],function(e,t,n,r,i,s,o){return r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments),this.timeParsers=new i,this.associated.timeParsers=this.timeParsers,this.units=o.TIME_UNITS},clear:function(e){return delete this.timeParsersXHR,r.prototype.clear.apply(this,arguments)},defaults:{enableRealTime:!0},validation:{earliest:[{},{fn:"validateTime"}],latest:[{},{fn:"validateTime"}]},validateTime:function(e,n,r){var i=r.earliest||"",s=r.latest||"",u=this.get("enableRealTime"),a=o.isRealtime(i),f=o.isRealtime(s),l=o.stripRTSafe(i,!1),c=o.stripRTSafe(s,!0);if(l&&c&&l===c&&n==="latest")return t("You cannot have equivalent times.").t();if(!u){if(a&&f&&n==="latest"||a&&!f&&n==="earliest"||f&&!a&&n==="latest")return t("rt time values are not allowed").t()}else{if(a&&!f&&n==="latest")return t("You must set a rt value for latest time if you set a rt value for earliest time.").t();if(!a&&f&&n==="earliest")return t("You must set a rt value for earliest time if you set a rt value for latest time.").t()}},sync:function(n,r,i){var u=e.Deferred(),a=r,f=i,l,c,h=[],p={},d,v,m;r.trigger("request",r,u,i);switch(n){case"create":m=o.stripRTSafe((r.get("earliest")||"")+"",!1),m&&h.push(m),v=o.stripRTSafe((r.get("latest")||"")+"",!0),v&&h.push(v);if(!h.length)return i.success(p),u.resolve.apply(u),u.promise();return this.timeParsers.reset([]),this.timeParsersXHR=this.timeParsers.fetch({data:{time:h,output_time_format:"%s.%Q|%Y-%m-%dT%H:%M:%S.%Q%:z"},success:function(){var e=this.timeParsers.get(m),n=e?(e.get("value")||"").split("|"):[],r=n[0],i=n[1],u=this.timeParsers.get(v),a=u?(u.get("value")||"").split("|"):[],l=a[0],c=a[1];e&&(p.earliest_epoch=parseFloat(r)),u&&(p.latest_epoch=parseFloat(l)),i&&(p.earliest_iso=i,p.earliest_date=o.isoToDateObject(i)),c&&(p.latest_iso=c,p.latest_date=o.isoToDateObject(c));if(e&&u){var h=Math.round(p.earliest_epoch*1e3)/1e3,g=Math.round(p.latest_epoch*1e3)/1e3;h===g&&(d=s.createSplunkDMessage(s.ERROR,t("You cannot have equivalent times.").t())),h>g&&(d=s.createSplunkDMessage(s.ERROR,t("Earliest time cannot be greater than latest time.").t()));if(d){f.error(d);return}}f.success(p)}.bind(this),error:function(){var e=s.createSplunkDMessage(s.ERROR,t("You have an invalid time in your range.").t());f.error(e)}}),this.timeParsersXHR.done(function(){u.resolve.apply(u,arguments)}),this.timeParsersXHR.fail(function(){u.reject.apply(u,arguments)}),u.promise();default:throw"Operation not supported"}},getTimeParse:function(e){return o.parseTimeString(this.get(e))},isRealtime:function(e){return o.isRealtime(this.get(e))},isAbsolute:function(e){return o.isAbsolute(this.get(e))},isEpoch:function(e){return o.isEpoch(this.get(e))},isWholeDay:function(e){return o.timeAndJsDateIsWholeDay(this.get(e),this.get(e+"_date"))},latestIsNow:function(){return o.isNow(this.get("latest"))},hasNoEarliest:function(){return o.isEmpty(this.get("earliest"))},generateLabel:function(e){return o.generateLabel(e,this.get("earliest"),this.get("earliest_date"),this.get("latest"),this.get("latest_date"))},fetchAbort:function(){r.prototype.fetchAbort(),this.timeParsersXHR&&this.timeParsersXHR.state&&this.timeParsersXHR.state()==="pending"&&this.timeParsersXHR.abort()}})}),define("models/services/data/UserPref",["models/SplunkDBase"],function(e){return e.extend({url:"data/user-prefs",id:"data/user-prefs/general",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("models/services/configs/Web",["models/SplunkDBase"],function(e){return e.extend({url:"configs/conf-web",urlRoot:"configs/conf-web",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("models/services/search/jobs/Summary",["jquery","underscore","backbone","models/Base","collections/Base","util/splunkd_utils"],function(e,t,n,r,i,s){var o=n.Model.extend({idAttribute:"name",isNumeric:function(){return this.get("numeric_count")>this.get("count")/2},replace:function(){return r.prototype.replace.apply(this,arguments)},deepOff:function(){this.off()}}),u=i.extend({model:o}),a=r.extend({url:"",initialize:function(e,t){r.prototype.initialize.apply(this,arguments),this.initializeAssociated(),t&&t.splunkDPayload&&this.setFromSplunkD(t.splunkDPayload,{silent:!0}),this.memoizedFrequency={},this.memoizedFields={},this.memoizedFilterByMinFrequency={},this.getFields().on("reset",function(){this.memoizedFrequency={},this.memoizedFields={},this.memoizedFilterByMinFrequency={}},this)},initializeAssociated:function(){var e=this.constructor;this.associated=this.associated||{},this.fields=this.fields||new e.Fields,this.associated.fields=this.fields},sync:function(r,i,o){if(r!=="read")throw new Error("invalid method: "+r);o=o||{};var u={},a={data:{output_mode:"json"}},f=t.isFunction(i.url)?i.url():i.url||i.id;return o.data&&(u=e.extend(u,{app:o.data.app||undefined,owner:o.data.owner||undefined,sharing:o.data.sharing||undefined})),a.url=s.fullpath(f,u),e.extend(!0,a,o),delete a.data.app,delete a.data.owner,delete a.data.sharing,n.sync.call(this,r,i,a)},_fields:function(e){var n=[];return t.each(e,function(e,r){var i={name:r};t.each(e,function(e,t){i[t]=e}),n.push(i)},this),n},parse:function(t,n){return this.initializeAssociated(),t?(t=e.extend(!0,{},t),this.parseAssociated(t,n)):{}},setFromSplunkD:function(t,n){var r;t=e.extend(!0,{},t),this.attributes={},t&&this.parseAssociated(t,n)},parseAssociated:function(t,n){var r=this._fields(this.getFieldsFromResponse(t));this.deleteFieldsFromResponse(t),this.set(t,n);var i=e.extend(!0,{parse:!0},n);return this.getFields().reset(r,i),t},filterByMinFrequency:function(e){if(this.memoizedFilterByMinFrequency.hasOwnProperty(e))return this.memoizedFilterByMinFrequency[e];var t=this.getEventCount(),n=this.getFields().filter(function(n){return n.get("count")/t>=e});return this.memoizedFilterByMinFrequency[e]=n,n},frequency:function(e){if(this.memoizedFrequency[e]!==void 0)return this.memoizedFrequency[e];var t=this.findByFieldName(e),n;return t?(n=t.get("count")/this.getEventCount(),this.memoizedFrequency[e]=n,n):(this.memoizedFrequency[e]=0,0)},findByFieldName:function(e){if(this.memoizedFields.hasOwnProperty(e))return this.memoizedFields[e];var t=this.getFields().get(e);return this.memoizedFields[e]=t,t},distribution:function(e){var t,n=this.findByFieldName(e),r=this.get("histogram");if(!n)return[];t=n.get("histogram");if(!r||!t)return[];var i=Math.min(r.length,t.length),s=[],o=[],u;for(u=0;u<i;u++)s.push(t[u].count),o.push(r[u].count);var a=30,f,l;while(i>a){f=[],l=[];for(u=i-1;u>=0;u-=2)u>0?(f.unshift(s[u]+s[u-1]),l.unshift(o[u]+o[u-1])):(f.unshift(s[u]),l.unshift(o[u]));s=f,o=l,i=s.length}var c=[];for(u=0;u<i;u++)c.push(o[u]>0?Math.min(100,s[u]/o[u]*100):0);return c},getEventCount:function(){return this.get("event_count")},getFields:function(){return this.fields},getFieldsFromResponse:function(e){return e.fields},deleteFieldsFromResponse:function(e){delete e.fields}},{Fields:u,Field:o});return a}),define("models/shared/fetchdata/ResultsFetchData",["underscore","models/Base"],function(e,t){return t.extend({defaults:{filter:{}},toJSON:function(n){var r=t.prototype.toJSON.apply(this,arguments),i=r.sortKey,s=r.sortDirection,o=[];return e(r.filter).size()>0&&(e(r.filter).each(function(t,n){var r=e.isArray(t)?t:t.split(" ");r.length>1?o.push("("+e.chain(r).map(function(e){return n+"=*"+e+"*"},this).join(" AND ").value()+")"):o.push("("+n+"=*"+r[0]+"*"+")")}),o=["search "+o.join(" OR ")]),delete r.filter,i&&o.push("| sort 0 "+(s==="desc"?"-":"")+'"'+i+'"'),delete r.sortKey,delete r.sortDirection,o.length>0&&(r.search=(r.search!=undefined?r.search:"")+o.join(" ")),r}})}),define("models/services/search/jobs/Result",["jquery","underscore","backbone","models/Base","models/shared/fetchdata/ResultsFetchData","collections/Base","util/splunkd_utils","util/time","splunk.i18n"],function(e,t,n,r,i,s,o,u,a){var f=n.Model.extend({initialize:function(e,t){this.on("change",function(){this._keys=void 0,this._strip=void 0},this)},clear:function(e){delete this._keys,delete this._strip,n.Model.prototype.clear.apply(this,arguments)},idAttribute:"1ee63861-c188-11e2-8743-0017f209b4d8",systemFields:["host","source","sourcetype","punct"],timeFields:["_time","date_zone","date_year","date_month","date_mday","date_wday","date_hour","date_minute","date_second","timeendpos","timestartpos"],keys:function(){return this._keys||(this._keys=t.keys(this.toJSON())),this._keys},strip:function(){return this._strip||(this._strip=t.intersection(this.keys(),t.filter(this.keys(),function(e){return e.indexOf("_")!==0&&e.indexOf("tag::")!==0&&e.indexOf("_raw")!==0}))),this._strip},system:function(){return t.intersection(this.strip(),this.systemFields)},notSystemOrTime:function(){var e=this.strip();return t.intersection(e,t.difference(e,t.union(this.time(),this.system())))},time:function(){return t.intersection(this.keys(),this.timeFields)},isTruncated:function(){return this.has("_fulllinecount")},getFieldsLength:function(e){return t(e).reduce(function(e,t){return e+this.get(t).length},0,this)},rawToHTML:function(e){function o(e){var n=[],i=0;for(i=0;i<e.length;i++){var s=e[i];typeof s=="object"?n.push('<span class="t'+(s.highlight?" a":"")+'">',o(s.array),"</span>"):n.push(t.escape(r[s]||""))}return n.join("")}var n=this.get("_raw");if(!n)return"";var r=n.tokens,i=n.segment_tree,s=n.types;return o(i)},getRawText:function(){var e=this.get("_raw");return e?t.isArray(e)?e[0]:e.value:""},getRawSegmentation:function(){var e=this.get("_raw");return t.isArray(e)?t.escape(e[0]):this.rawToHTML()},formattedTime:function(){var e=this.get("_time");return e?a.format_datetime_microseconds(u.jsDateToSplunkDateTimeWithMicroseconds(u.isoToDateObject(e[0]))):""},replace:function(){return r.prototype.replace.apply(this,arguments)},deepOff:function(){this.off()},sync:function(t,r,i){if(t!=="read")throw new Error("invalid method: "+t);i=i||{};var s,u=i.data.search,a={},f={data:{output_mode:"json"}},l=r.id;return i.data&&(a=e.extend(a,{app:i.data.app||undefined,owner:i.data.owner||undefined,sharing:i.data.sharing||undefined})),i.data.isRt?f.data.search=["search _serial=",this.get("_serial")[0]," AND ","splunk_server=",this.get("splunk_server")[0]," | head 1"].join(""):f.data.offset=this.collection.indexOf(this)+i.data.eventsOffset,f.url=o.fullpath(l,a),f.data.count=1,f.truncation_mode="abstract",e.extend(!0,f,i),delete f.data.isRt,delete f.data.app,delete f.data.owner,delete f.data.sharing,delete f.data.eventsOffset,n.sync.call(this,t,r,f)},parse:function(e,n){return t(e.results).each(function(e,n){t.each(e,function(t,n){e[n]=typeof t=="string"?[t]:t},this)},this),e.results[0]}}),l=r.extend({url:"",initialize:function(e,t){t=t||{},t.fetchData=t.fetchData||new i,r.prototype.initialize.call(this,e,t),this.initializeAssociated(),t&&t.splunkDPayload&&this.setFromSplunkD(t.splunkDPayload,{silent:!0})},clear:function(){return delete this.responseText,r.prototype.clear.apply(this,arguments)},initializeAssociated:function(){var e=this.constructor;this.associated=this.associated||{},this.results=this.results||new e.Results,this.associated.results=this.results,this.messages=this.messages||new e.Messages,this.associated.messages=this.messages,this.fields=this.fields||new e.Fields,this.associated.fields=this.fields},sync:function(r,i,s){if(r!=="read")throw new Error("invalid method: "+r);s=s||{};var u={},a={data:{output_mode:"json"},dataType:"text"},f=t.isFunction(i.url)?i.url():i.url||i.id;return s.data&&(u=e.extend(u,{app:s.data.app||undefined,owner:s.data.owner||undefined,sharing:s.data.sharing||undefined})),a.url=o.fullpath(f,u),e.extend(!0,a,s),delete a.data.app,delete a.data.owner,delete a.data.sharing,n.sync.call(this,r,i,a)},setFromSplunkD:function(e,t){t=t||{},t.skipStoringResponseText||(this.responseText=JSON.stringify(e)),this.attributes={},e&&(e.messages&&(this.messages.reset(e.messages,t),delete e.messages),e.fields&&(this.fields.reset(e.fields,t),delete e.fields),this.set(e,t),e.results&&(this.normalizeResults(e.results),this.results.reset(e.results,t),delete e.results))},parse:function(e,n){this.initializeAssociated(),this.responseText=e,e=JSON.parse(e);if(n.parseLite)return this.results.reset(t(e.results).map(function(){return{}})),{};this.normalizeResults(e.results),this.messages.reset(e.messages),delete e.messages,this.fields.reset(e.fields),delete e.fields;var r=e.results;return delete e.results,this.set(e),this.results.reset(r),{}},normalizeResults:function(e){t(e).each(function(e,n){t(e).each(function(t,n){e[n]=typeof t=="string"?[t]:t},this)},this)},endOffset:function(){return(this.get("init_offset")||0)+this.results.length},lineNumber:function(e,t){return t?this.endOffset()-e:(this.get("init_offset")||0)+e+1},offset:function(e){return(this.get("init_offset")||0)+e},getTags:function(e,t){var n=this.get("tags"),r=[];return n&&(r=n[e],r&&(r=r[t]||[])),r||[]},setTagsSynthetically:function(e,t,n){this.get("tags")||this.set("tags",{}),this.get("tags")[e]||(this.get("tags")[e]={}),this.get("tags")[e][t]||(this.get("tags")[e][t]=[]),this.get("tags")[e][t]=n,this.trigger("tags-updated")}},{Results:s.extend({model:f,get:function(e){return e==null?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e[this._idAttr]])}},{Result:f}),Messages:s.extend({model:r}),Fields:s.extend({model:r})});return l}),define("models/services/saved/FVTags",["jquery","underscore","models/SplunkDBase"],function(e,t,n){return n.extend({url:"saved/fvtags",initialize:function(){n.prototype.initialize.apply(this,arguments)},resetTags:function(e){t(this.entry.content.toJSON()).each(function(e,t){t.match(/^tag.+/g)&&this.entry.content.unset(t)},this),this.entry.content.unset("tags");if(e){var n={};t(e).each(function(e){n["tag."+e]=e},this),this.entry.content.set(n)}},setId:function(e,t,n,r){this.set("id","/servicesNS/"+encodeURIComponent(t)+"/"+encodeURIComponent(e)+"/saved/fvtags/"+encodeURIComponent(n)+"%3D"+encodeURIComponent(r))}},{tagStringtoArray:function(t){return t?e.trim(t.replace(/,/g," ")).split(/\s+/):[]},tagArraytoString:function(e){return e.join(", ")}})}),define("helpers/user_agent",["underscore"],function(e){var t={Chrome:/chrome/i,Firefox:/firefox/i,Safari:/safari/i,IE:/(?=.*msie ([\d.]+))|(?=.*trident)(?=.*rv\:([\d.]+))/i,IE11:/(?=.*trident)(?=.*rv\:11)/i,IE10:/msie 10\.0/i,IE9:/msie 9\.0/i,IE8:/msie 8\.0/i,IE7:/msie 7\.0/i,SafariiPhone:/iPhone/,SafariiPad:/iPad/},n=2048,r={agentString:window.navigator.userAgent,isChrome:function(){return t.Chrome.test(r.agentString)},isFirefox:function(){return t.Firefox.test(r.agentString)},isIE:function(){return t.IE.test(r.agentString)},isIE11:function(){return t.IE11.test(r.agentString)},isIE10:function(){return t.IE10.test(r.agentString)},isIE9:function(){return t.IE9.test(r.agentString)},isIE8:function(){return t.IE8.test(r.agentString)},isIE7:function(){return t.IE7.test(r.agentString)},isSafari:function(){return!r.isChrome()&&!r.isSafariiPhone()&&!r.isSafariiPad()&&t.Safari.test(r.agentString)},isSafariiPhone:function(){return t.SafariiPhone.test(r.agentString)},isSafariiPad:function(){return t.SafariiPad.test(r.agentString)},isiOS:function(){return r.isSafariiPhone()||r.isSafariiPad()},isIELessThan:function(e){return r.isIE()&&parseFloat(t.IE.exec(r.agentString).sort(function(e,t){return t-e})[0])<e},isInIE7DocumentMode:function(){return document.documentMode==7?!0:!1},hasUrlLimit:function(){return r.isIE()?!0:!1},getUrlLimit:function(){return r.hasUrlLimit()?n:Infinity}};return e(e.functions(r)).chain().each(function(t){r[t]=e(r[t]).memoize()}),r}),define("util/router_utils",["jquery","underscore","backbone","splunk.util","helpers/user_agent"],function(e,t,n,r,i){var s={},o=/^[#\/]|\s+$/g,u={};s.AGENT_HAS_URL_LIMIT=i.hasUrlLimit(),s.URL_MAX_LENGTH=i.getUrlLimit();var a=function(e){if(!s.AGENT_HAS_URL_LIMIT)return!0;var t=window.location,n=t.href.split("#")[0];return n.length+e.length<s.URL_MAX_LENGTH},f=0,l=function(){return"_suid_"+ ++f},c=/^#?_suid_\d+$/,h=function(e){return c.test(e)},p=function(e){var t=l();return u[t]=e,t};return n.history.getFragment=function(e,t){var n=/\/$/;if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var r=window.location.search;r&&(e+=r);var i=this.root.replace(n,"");e.indexOf(i)||(e=e.substr(i.length))}else e=this.getHash();return h(e)&&(e=u[e]||""),s.strip_route(e)},n.history.navigate=function(e,t){var r=n.History;if(!r.started)return!1;if(!t||t===!0)t={trigger:!!t};var i=this.root+(e=this.getFragment(e||""));if(this.fragment===e)return;this.fragment=e,e===""&&i!=="/"&&(i=i.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},n.history._updateHash=t(n.history._updateHash).wrap(function(e,t,r,i){if(!a(r)){r=p(r);if(i){var s=this.getHash();delete u[s]}}e.call(n.history,t,r,i)}),s.strip_route=function(e){return e.replace(o,"")},s.start_backbone_history=function(t){var o="pushState"in window.history;t||!o||i.isIE()?e(document).ready(function(){var t=n.history.getHash(),i=t.split("?"),o=i[0]||"",u=r.queryStringToProp(i[1]||""),f=r.queryStringToProp(window.location.search.split("?")[1]||""),l=e.extend(f,u),c=r.propToQueryString(l),d=(o&&!h(o)?o:s.strip_route(window.location.pathname))+(c?"?"+c:"");a(d)||(d=p(d)),window.location.replace(window.location.href.split("#")[0]+"#"+d),n.history.start()}):n.history.start({pushState:!0})},s}),define("models/shared/ClassicURL",["jquery","underscore","splunk.util","backbone","models/Base","util/router_utils","util/console"],function(e,t,n,r,i,s,o){var u=i.extend({id:"classicURL",initialize:function(){i.prototype.initialize.apply(this,arguments)},sync:function(t,n,r){var i,s,o=e.Deferred();r=r||{};var u=r.silentClear,a=r.replaceState;delete r.silentClear,delete r.replaceState,u&&n.clear({silent:!0});if(t==="read")i=n.currentQueryString();else if(t==="create"||t==="update")s=n.encode(r),a?n.replaceState(s,r):n.pushState(s,r),i=this.currentQueryString();else{if(t!=="delete")throw new Error("invalid method: "+t);this.pushState("",r),i=this.currentQueryString()}return n.trigger("request",n,o,r),r.success(i),o.resolve().promise()},parse:function(e){var n=this.decode(e),r=t.clone(this.attributes);return t.each(r,function(e,t){r[t]=undefined}),t.extend(r,n),r},encode:function(e){var n=[],r;return t.each(this.toJSON(),function(i,s){if(t.isUndefined(i))return;if(i===""&&e&&e.preserveEmptyStrings===!1)return;r=encodeURIComponent(s);if(t.isObject(i))throw o.error("Non-primitive values are not allowed in the query string: ",i),new Error("Non-primitive values are not allowed in the query string");n.push(r+"="+encodeURIComponent(i))}),n.join("&")},decode:function(e){return n.queryStringToProp(e)},currentQueryString:function(){var e;return r.history._hasPushState?window.location.href.split("?")[1]||"":(e=r.history.getFragment(window.location.href.split("#")[1]||""),e.split("?")[1]||"")},pushState:function(t,n){t&&(t="?"+t),r.history.navigate(this.root()+t,e.extend(!0,{},n,{replace:!1}))},replaceState:function(t,n){t&&(t="?"+t),r.history.navigate(this.root()+t,e.extend(!0,{},n,{replace:!0}))},root:function(){return r.history._hasPushState?window.location.pathname:"#"+s.strip_route(window.location.pathname)}});return u}),define("models/classicurl",["models/shared/ClassicURL"],function(e){return new e}),define("models/services/configs/AlertAction",["underscore","models/SplunkDBase"],function(e,t){return t.extend({urlRoot:"configs/conf-alert_actions",getSetting:function(e,t){return this.entry.content.has(e)?this.entry.content.get(e):t},initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),define("models/services/data/ui/Viewstate",["underscore","models/SplunkDBase","util/splunkd_utils","splunk.util"],function(e,t,n,r){return t.extend({url:"data/ui/viewstates",initialize:function(){t.prototype.initialize.apply(this,arguments)},getFlattenedAndDedupedModules:function(){var t=this.entry.content.toJSON(),n={};return delete t["eai:acl"],delete t["eai:appName"],delete t["eai:userName"],delete t.disabled,e.each(t,function(e,t){var r=t.split("."),i=r[0].split("_")[0],s=r[1];n[i]||(n[i]={}),n[i][s]||(n[i][s]=e)}),n},convertToReportPoperties:function(){var e=this.getFlattenedAndDedupedModules(),t={},i,s,o,u,a,f,l,c,h;return e.ButtonSwitcher?(u=e.ButtonSwitcher.selected,u==="splIcon-results-table"?(t["display.general.type"]="statistics",s=!0):u==="splIcon-events-list"&&(t["display.general.type"]="events",i=!0)):(t["display.general.type"]="visualizations",o=!0),e.AxisScaleFormatter&&(t["display.visualizations.charting.axisY.scale"]=e.AxisScaleFormatter["default"]),e.FancyChartTypeFormatter&&(t["display.visualizations.type"]="charting",t["display.visualizations.charting.chart"]=e.FancyChartTypeFormatter["default"]),e.ChartTypeFormatter&&(t["display.visualizations.type"]="charting",t["display.visualizations.charting.chart"]=e.ChartTypeFormatter["default"]),e.LegendFormatter&&(t["display.visualizations.charting.legend.placement"]=e.LegendFormatter["default"]),e.LineMarkerFormatter&&(t["display.visualizations.charting.axisX.markers"]=n.normalizeBooleanTo01String(e.LineMarkerFormatter["default"])),e.NullValueFormatter&&(t["display.visualizations.charting.chart.nullValueMode"]=e.NullValueFormatter["default"]),e.StackModeFormatter&&(t["display.visualizations.charting.chart.stackMode"]=e.StackModeFormatter["default"]),e.XAxisTitleFormatter&&(t["display.visualizations.charting.axisTitleX.text"]=e.XAxisTitleFormatter["default"]),e.YAxisRangeMaximumFormatter&&(t["display.visualizations.charting.axisY.maximumNumber"]=e.YAxisRangeMaximumFormatter["default"]),e.YAxisRangeMinimumFormatter&&(t["display.visualizations.charting.axisY.minimumNumber"]=e.YAxisRangeMinimumFormatter["default"]),e.YAxisRangeMinimumFormatter&&(t["display.visualizations.charting.axisY.minimumNumber"]=e.YAxisRangeMinimumFormatter["default"]),e.YAxisTitleFormatter&&(t["display.visualizations.charting.axisTitleY.text"]=e.YAxisTitleFormatter["default"]),e.FlashChart&&(t["display.visualizations.chartHeight"]=e.FlashChart.height.replace("px","")),e.JSChart&&(t["display.visualizations.chartHeight"]=e.JSChart.height.replace("px","")),e.FlashTimeline&&(r.normalizeBoolean(e.FlashTimeline.minimized)?t["display.page.search.timeline.format"]="compact":t["display.page.search.timeline.format"]="hidden"),e.Count&&(a=e.Count["default"]||e.Count.count,s||o?t["display.prefs.statistics.count"]=a:t["display.prefs.events.count"]=a),e.DataOverlay&&(t["display.statistics.overlay"]=e.DataOverlay["default"]||e.DataOverlay.dataOverlayMode),e.HiddenSoftWrap&&(f=n.normalizeBooleanTo01String(e.HiddenSoftWrap.enable),s||o?t["display.statistics.wrap"]=f:(t["display.events.list.wrap"]=f,t["display.events.table.wrap"]=f)),e.SoftWrap&&(f=n.normalizeBooleanTo01String(e.SoftWrap.enable),s||o?t["display.statistics.wrap"]=f:(t["display.events.list.wrap"]=f,t["display.events.table.wrap"]=f)),e.MaxLines&&(t["display.events.maxLines"]=e.MaxLines["default"]||e.MaxLines.maxLines),e.RowNumbers&&(h=e.RowNumbers["default"]||e.RowNumbers.displayRowNumbers,h=n.normalizeBooleanTo01String(h),s||o?t["display.statistics.rowNumbers"]=h:t["display.events.rowNumbers"]=h),e.Segmentation&&(l=e.Segmentation["default"]||e.Segmentation.segmentation,s||o?["row","cell","none"].indexOf(l)>-1&&(t["display.statistics.drilldown"]=l):["inner","outer","full","none"].indexOf(l)>-1&&(t["display.events.list.drilldown"]=l,t["display.events.raw.drilldown"]=l)),e.FieldPicker&&(c=e.FieldPicker.fields.split(","),t["display.events.fields"]='["'+c.join('","')+'"]',t["display.page.search.showFields"]=n.normalizeBooleanTo01String(e.FieldPicker.sidebarDisplay)),t}})}),define("models/search/Report",["jquery","underscore","models/services/SavedSearch","models/services/data/ui/Viewstate","collections/search/Jobs","util/time","util/splunkd_utils","util/general_utils","splunk.util","splunk.i18n","uri/route","util/math_utils"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=n.extend({reportTree:{match:{"display.general.type":{visualizations:{match:{"display.visualizations.type":{singlevalue:{view:"single",icon:"single-value",label:t("Single Value").t()},charting:{match:{"display.visualizations.charting.chart":{line:{view:"line",icon:"chart-line",label:t("Line").t()},area:{view:"area",icon:"chart-area",label:t("Area").t()},column:{view:"column",icon:"chart-column",label:t("Column").t()},bar:{view:"bar",icon:"chart-bar",label:t("Bar").t()},pie:{view:"pie",icon:"chart-pie",label:t("Pie").t()},scatter:{view:"scatter",icon:"chart-scatter",label:t("Scatter").t()},radialGauge:{view:"radialGauge",icon:"gauge-radial",label:t("Radial").t()},fillerGauge:{view:"fillerGauge",icon:"gauge-filler",label:t("Filler").t()},markerGauge:{view:"markerGauge",icon:"gauge-marker",label:t("Marker").t()}}}},mapping:{view:"mapping",icon:"location",label:t("Map").t()}}}},statistics:{view:"statistics"},events:{view:"events"}}}},initialize:function(){n.prototype.initialize.apply(this,arguments),this.jobs=new i,this.associated.jobs=this.jobs},sync:function(i,s,u){u=u||{},t.defaults(u,{migrateViewState:!0});if(!u.migrateViewState||i!=="read")return n.prototype.sync.apply(this,arguments);var f=e.Deferred(),l=e.Deferred(),c=new n({id:this.id}),h;return s.trigger("request",s,f,u),h=c.fetch(e.extend(!0,{},u,{success:function(e,t){this.setFromSplunkD(c.toSplunkD());var n=this.entry.content.get("vsid"),i=this.entry.content.get("displayview"),s=a.normalizeBoolean(this.entry.content.get("display.general.migratedFromViewState")),f,h;n&&i&&!s?(f=/.*:/.test(n)?n:i+":"+n,h=new r,h.fetch({url:o.fullpath(h.url+"/"+encodeURIComponent(f),{app:u.data.app,owner:u.data.owner}),success:function(e,n){var r=h.convertToReportPoperties();r["display.general.migratedFromViewState"]="1",this.entry.content.set(r),u.success(t),l.resolve()}.bind(this),error:function(e,n){this.entry.content.set("display.general.migratedFromViewState","1"),u.success(t),l.resolve()}.bind(this)})):(u.success(t),l.resolve())}.bind(this),error:function(e,t){u.error(t)}.bind(this)})),e.when(l).then(function(){h.done(function(){f.resolve.apply(f,arguments)}.bind(this))}.bind(this)),h.fail(function(){f.reject.apply(f,arguments)}.bind(this)),f.promise()},parse:function(e){var t=n.prototype.parse.apply(this,arguments),r=this.entry.content;return r.has("display.visualizations.type")&&r.set({"display.visualizations.type":r.get("display.visualizations.type").toLowerCase()}),t},fetchJobs:function(e){var t=this.entry.get("name");if(!t)throw"Report must have a name to associate it with Jobs";return e=e||{},e.data=e.data||{},e.data.app=this.entry.acl.get("app"),e.data.owner=this.entry.acl.get("owner"),e.data.label=t,this.jobs.fetchNonAutoSummaryJobs(e)},openInView:function(){return this.entry.content.get("request.ui_dispatch_view")==="pivot"||this.entry.content.get("request.ui_dispatch_view")===""&&this.isPivotReport()?"pivot":"search"},getVizType:function(){var e=this,n=function(r){if(r&&r.view)return r;if(r&&r.match){var i;t(r.match).each(function(t,n){i=t[e.entry.content.get(n)]},e);if(i)return n(i)}};return n(this.reportTree.match["display.general.type"].visualizations)},isAlert:function(){var e=this.entry.content.get("is_scheduled"),t=this.entry.content.get("alert_type"),n=this.entry.content.get("alert.track"),r=this.entry.content.get("actions"),i=this.isRealTime();return e&&(t!=="always"||n||i&&r)},isRealTime:function(){var e=s.isRealtime(this.entry.content.get("dispatch.earliest_time")),t=s.isRealtime(this.entry.content.get("dispatch.latest_time"));return e&&t},isPivotReport:function(){return u.isValidPivotSearch(this.entry.content.get("search"))},stripAlertAttributes:function(e){return this.entry.content.set({"alert.track":0,alert_type:"always",is_scheduled:0},e)},stripReportAttributesToSaveAsAlert:function(e){return this.entry.content.set({auto_summarize:!1},e)},stripPivotAttributes:function(){this.entry.content.set({"display.page.pivot.dataModel":""})},setTimeRangeWarnings:function(e){var n=this.entry.content.get("dispatch.earliest_time"),r=this.entry.content.get("dispatch.latest_time"),i=[],u,a;(!s.isEmpty(n)&&s.isAbsolute(n)||!s.isEmpty(r)&&s.isAbsolute(r))&&i.push(o.createMessageObject(o.WARNING,t("Your report has an absolute time range.").t()));if(e)if(e.isAlert()){u=e.entry.content.get("dispatch.earliest_time"),a=e.entry.content.get("dispatch.latest_time");if(n!==u||r!==a)this.entry.content.set({"dispatch.earliest_time":u,"dispatch.latest_time":a}),i.push(o.createMessageObject(o.WARNING,t("Your changes to the time range of this alert will not be saved.").t()))}else!e.isRealTime()&&e.entry.content.get("is_scheduled")&&this.isRealTime()&&(this.entry.content.set({is_scheduled:!1}),i.push(o.createMessageObject(o.WARNING,t("Saving a scheduled report as a real-time report will remove the schedule.").t())));i.length&&this.error.set({messages:i})},setAccelerationWarning:function(e,n){var r=this.entry.content.get("display.page.search.mode")===o.VERBOSE,i=[];e?r&&(t.isUndefined(n)||n.entry.content.get("display.page.search.mode")===o.VERBOSE)?(i.push(o.createMessageObject(o.WARNING,t("A report running in verbose mode cannot be accelerated. Your search mode will be saved as Smart Mode.").t())),this.entry.content.set("display.page.search.mode",o.SMART)):r&&!t.isUndefined(n)&&(i.push(o.createMessageObject(o.WARNING,t("A report running in verbose mode cannot be accelerated. Your search mode will not be saved.").t())),this.entry.content.set("display.page.search.mode",n.entry.content.get("display.page.search.mode"))):(i.push(o.createMessageObject(o.WARNING,t("This report cannot be accelerated. Acceleration will be disabled.").t())),this.entry.content.set("auto_summarize",!1)),i.length&&(this.trigger("serverValidated",!1,this,i),this.error.set({messages:i}))},setPivotWarning:function(){var e=[];this.isPivotReport()&&(e.push(o.createMessageObject(o.WARNING,t("Saving from Search will prevent this report from opening in Pivot.").t())),this.stripPivotAttributes()),e.length&&(this.trigger("serverValidated",!1,this,e),this.error.set({messages:e}))},setDisplayType:function(e,t,n){var r=this.entry.content.get("display.general.type")||"statistics",i=t?this.getSearchSpecificDefaults(t):{};if(r==="events")e&&(r=i["display.general.type"]||"statistics");else if(r==="statistics"||r==="visualizations")e||(r="events");this.entry.content.set({"display.general.type":r},n)},getSearchSpecificDefaults:function(e){return/(^geostats)|([|\s]geostats\s)/.test(e||"")?{"display.general.type":"visualizations","display.visualizations.type":"mapping"}:{}},isDirty:function(e,n){n=n||h.DIRTY_WHITELIST;var r=u.filterObjectByRegexes(this.entry.content.toJSON(),n),i=u.filterObjectByRegexes(e.entry.content.toJSON(),n);return!t.isEqual(r,i)},canDelete:function(){return this.entry.links.get("remove")?!0:!1},canWrite:function(e,t){return this.entry.acl.get("can_write")&&(!this.entry.content.get("is_scheduled")||!!e)&&(!this.isRealTime()||!!t)},canClone:function(e,t){return(!this.entry.content.get("is_scheduled")||!!e)&&(!this.isRealTime()||!!t)},canEmbed:function(e,t){return this.entry.acl.get("can_write")&&e&&!this.isRealTime()&&t},getAlertTriggerConditionString:function(){var e=this.entry.content.get("alert_type"),n=this.entry.content.get("dispatch.earliest_time"),r=this.entry.content.get("dispatch.latest_time"),i=n&&s.isRealtime(n)||r&&s.isRealtime(r),o=this.entry.content.get("alert_threshold"),u=s.parseTimeString(n),l=this.entry.content.get("alert_condition"),c=n==="rt"||r==="rt";switch(e){case"always":if(i)return t("Per-Result.").t();return t("Number of Results is > 0.").t();case"number of events":case"number of hosts":case"number of sources":if(c)return t("Unsupported.").t();var h={"number of events":t("Results").t(),"number of hosts":t("Hosts").t(),"number of sources":t("Sources").t()};switch(this.entry.content.get("alert_comparator")){case"greater than":if(!i)return a.sprintf(t("Number of %(typetext)s is > %(threshold)s.").t(),{typetext:h[e],threshold:o});switch(u.unit){case"m":return a.sprintf(f.ungettext("Number of %(typetext)s is > %(threshold)s in %(timeAmount)s minute.","Number of %(typetext)s is > %(threshold)s in %(timeAmount)s minutes.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"h":return a.sprintf(f.ungettext("Number of %(typetext)s is > %(threshold)s in %(timeAmount)s hour.","Number of %(typetext)s is > %(threshold)s in %(timeAmount)s hours.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"d":return a.sprintf(f.ungettext("Number of %(typetext)s is > %(threshold)s in %(timeAmount)s day.","Number of %(typetext)s is > %(threshold)s in %(timeAmount)s days.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount})}break;case"less than":if(!i)return a.sprintf(t("Number of %(typetext)s is < %(threshold)s.").t(),{typetext:h[e],threshold:o});switch(u.unit){case"m":return a.sprintf(f.ungettext("Number of %(typetext)s is < %(threshold)s in %(timeAmount)s minute.","Number of %(typetext)s is < %(threshold)s in %(timeAmount)s minutes.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"h":return a.sprintf(f.ungettext("Number of %(typetext)s is < %(threshold)s in %(timeAmount)s hour.","Number of %(typetext)s is < %(threshold)s in %(timeAmount)s hours.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"d":return a.sprintf(f.ungettext("Number of %(typetext)s is < %(threshold)s in %(timeAmount)s day.","Number of %(typetext)s is < %(threshold)s in %(timeAmount)s days.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount})}break;case"equal to":if(!i)return a.sprintf(t("Number of %(typetext)s is = %(threshold)s.").t(),{typetext:h[e],threshold:o});switch(u.unit){case"m":return a.sprintf(f.ungettext("Number of %(typetext)s is = %(threshold)s in %(timeAmount)s minute.","Number of %(typetext)s is = %(threshold)s in %(timeAmount)s minutes.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"h":return a.sprintf(f.ungettext("Number of %(typetext)s is = %(threshold)s in %(timeAmount)s hour.","Number of %(typetext)s is = %(threshold)s in %(timeAmount)s hours.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"d":return a.sprintf(f.ungettext("Number of %(typetext)s is = %(threshold)s in %(timeAmount)s day.","Number of %(typetext)s is = %(threshold)s in %(timeAmount)s days.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount})}break;case"not equal to":if(!i)return a.sprintf(t("Number of %(typetext)s is &#8800; %(threshold)s.").t(),{typetext:h[e],threshold:o});switch(u.unit){case"m":return a.sprintf(f.ungettext("Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s minute.","Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s minutes.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"h":return a.sprintf(f.ungettext("Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s hour.","Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s hours.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount});case"d":return a.sprintf(f.ungettext("Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s day.","Number of %(typetext)s is &#8800; %(threshold)s in %(timeAmount)s days.",u.amount),{typetext:h[e],threshold:o,timeAmount:u.amount})}break;case"drops by":return a.sprintf(t("Number of %(typetext)s drops by %(threshold)s.").t(),{typetext:h[e],threshold:o});case"rises by":return a.sprintf(t("Number of %(typetext)s rises by %(threshold)s.").t(),{typetext:h[e],threshold:o})}break;case"custom":if(c)return t("Unsupported.").t();if(!i)return a.sprintf(t('Custom. "%s".').t(),l);switch(u.unit){case"m":return a.sprintf(f.ungettext('Custom. "%(alertCondition)s" in %(timeAmount)s minute.','Custom. "%(alertCondition)s" in %(timeAmount)s minutes.',u.amount),{alertCondition:l,timeAmount:u.amount});case"h":return a.sprintf(f.ungettext('Custom. "%(alertCondition)s" in %(timeAmount)s hour.','Custom. "%(alertCondition)s" in %(timeAmount)s hours.',u.amount),{alertCondition:l,timeAmount:u.amount});case"d":return a.sprintf(f.ungettext('Custom. "%(alertCondition)s" in %(timeAmount)s day.','Custom. "%(alertCondition)s" in %(timeAmount)s days.',u.amount),{alertCondition:l,timeAmount:u.amount})}}},getStringOfActions:function(){var e=[];if(this.entry.content.get("action.email")||this.entry.content.get("action.script")){var n=this.entry.content.get("actions");n.search("email")!=-1&&e.push(t("Send Email").t()),n.search("script")!=-1&&e.push(t("Run a Script").t())}return this.entry.content.get("alert.track")&&e.push(t("List in Triggered Alerts").t()),e.join(t(", ").t())},routeToViewReport:function(e,t,n,r){var i={s:this.id};return this.isAlert()?l.alert(e,t,n,{data:i}):(r&&(i.sid=r),l.report(e,t,n,{data:i}))},getNearestMaxlines:function(){var e=parseInt(this.entry.content.get("display.events.maxLines"),10);return isNaN(e)&&(e=5),""+c.nearestMatchAndIndexInArray(e,[5,10,20,50,100,200,0]).value},getSortingSearch:function(){var e,n=this.entry.content,r=n.get("display.prefs.events.offset"),i=n.get("display.prefs.events.count"),s=n.get("display.events.table.sortColumn");return s&&!t.isUndefined(r)&&!t.isUndefined(i)&&(e="| sort "+(parseInt(r,10)+parseInt(i,10))+(n.get("display.events.table.sortDirection")==="desc"?" - ":" ")+s),e},getDisplayEventsFields:function(e){e||(e={});var n,r=[];return t.each(this.entry.content.toObject("display.events.fields")||[],function(t){e.key?(n={},n[e.key]=t,r.push(n)):r.push(t)}),r}},{DOCUMENT_TYPES:{ALERT:"alert",PIVOT_REPORT:"pivot-report",REPORT:"report"},DIRTY_WHITELIST:["^dispatch.earliest_time$","^dispatch.latest_time$","^display.events.fields$","^display.events.list.drilldown$","^display.events.list.wrap$","^display.events.maxLines$","^display.events.raw.drilldown$","^display.events.rowNumbers$","^display.events.table.drilldown$","^display.events.table.wrap$","^display.events.type$","^display.general.enablePreview$","^display.general.migratedFromViewState$","^display.general.timeRangePicker.show$","^display.general.type$","^display.page.pivot.dataModel$","^display.page.search.mode$","^display.page.search.showFields$","^display.page.search.timeline.format$","^display.page.search.timeline.scale$","^display.statistics.drilldown$","^display.statistics.overlay$","^display.statistics.rowNumbers$","^display.statistics.wrap$","^display.visualizations.chartHeight$","^display.visualizations.charting.axisLabelsX.majorLabelStyle.overflowMode$","^display.visualizations.charting.axisLabelsX.majorLabelStyle.rotation$","^display.visualizations.charting.axisLabelsX.majorUnit$","^display.visualizations.charting.axisLabelsY2.majorUnit$","^display.visualizations.charting.axisLabelsY.majorUnit$","^display.visualizations.charting.axisTitleX.text$","^display.visualizations.charting.axisTitleX.visibility$","^display.visualizations.charting.axisTitleY2.text$","^display.visualizations.charting.axisTitleY2.visibility$","^display.visualizations.charting.axisTitleY.text$","^display.visualizations.charting.axisTitleY.visibility$","^display.visualizations.charting.axisX.maximumNumber$","^display.visualizations.charting.axisX.minimumNumber$","^display.visualizations.charting.axisX.scale$","^display.visualizations.charting.axisY2.enabled$","^display.visualizations.charting.axisY2.maximumNumber$","^display.visualizations.charting.axisY2.minimumNumber$","^display.visualizations.charting.axisY2.scale$","^display.visualizations.charting.axisY.maximumNumber$","^display.visualizations.charting.axisY.minimumNumber$","^display.visualizations.charting.axisY.scale$","^display.visualizations.charting.chart$","^display.visualizations.charting.chart.nullValueMode$","^display.visualizations.charting.chart.overlayFields$","^display.visualizations.charting.chart.rangeValues$","^display.visualizations.charting.chart.sliceCollapsingThreshold$","^display.visualizations.charting.chart.stackMode$","^display.visualizations.charting.chart.style$","^display.visualizations.charting.drilldown$","^display.visualizations.charting.gaugeColors$","^display.visualizations.charting.layout.splitSeries$","^display.visualizations.charting.legend.labelStyle.overflowMode$","^display.visualizations.charting.legend.placement$","^display.visualizations.mapHeight$","^display.visualizations.mapping.data.maxClusters$","^display.visualizations.mapping.drilldown$","^display.visualizations.mapping.map.center$","^display.visualizations.mapping.map.zoom$","^display.visualizations.mapping.markerLayer.markerMaxSize$","^display.visualizations.mapping.markerLayer.markerMinSize$","^display.visualizations.mapping.markerLayer.markerOpacity$","^display.visualizations.mapping.tileLayer.maxZoom$","^display.visualizations.mapping.tileLayer.minZoom$","^display.visualizations.mapping.tileLayer.url$","^display.visualizations.show$","^display.visualizations.singlevalue.afterLabel$","^display.visualizations.singlevalue.beforeLabel$","^display.visualizations.singlevalue.underLabel$","^display.visualizations.type$","^search$"]});return h}),define("models/shared/eventsviewer/UIWorkflowAction",["underscore","models/Base"],function(e,t){return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments)},sync:function(e,t,n){throw"unsupported method:"+e}})});
